import{r as i,e as me,o as p,f as N,w as a,b as l,a as b,t as A,c as F,F as ie,X as ce,u as e,Z as ve,z as Z,h as H,W as J,j as T,Y as oe,V as S,m as _e,A as M,s as se,$ as Ve,a0 as ke,l as xe,x as he,n as we}from"./main-DqauxyHN.js";import{r as w}from"./rules-CkvmYWH-.js";import{a as ue,c as ge,V as de,b as Ce}from"./VCard-MjPDBD3x.js";import{V as be}from"./VForm-Bq272WOg.js";import{V as pe,a as g}from"./VRow-DUTGde6O.js";import{V as O}from"./VAutocomplete-B96Fouut.js";import{V as te}from"./VTooltip-CcwVhVpq.js";import{V as ye}from"./VTextarea-BY1UFUZ4.js";import{V as je}from"./VAlert-Ci-QDowl.js";import{d as Te}from"./debounce-BWdamgSW.js";import{V as fe}from"./VDialog-BaYg0raZ.js";import{a as Ue,V as qe}from"./VTable-BzkA4luM.js";import{V as Ne}from"./VPagination-DW9AUZIy.js";import{T as Se}from"./index-C3SKfx_T.js";import{V as Pe}from"./VCheckbox-Bfq3THW6.js";import"./VAvatar-DiuKrZsf.js";import"./VImg-BNFkvpJ6.js";import"./VList-DpfpAaJi.js";import"./ssrBoot-Bo8Nc6Hg.js";import"./VDivider-2uABg6id.js";import"./VCheckboxBtn-BN3-VYWr.js";import"./VSelectionControl-CY56I1b2.js";import"./VSlideGroup-Bn7UiDXm.js";const $e={class:"mb-4 d-flex gap-1"},Fe={class:"text-sm"},Me={__name:"program_add",props:{selected:Object},emits:["close","reload"],setup(ae,{emit:y}){var s,x,$,le;const V=ae,D=y,n=i(!1),v=i([]),K=i([]),Y=i([]),z=i([]),U=i([]),Q=i([]),G=i([]),L=i(!1),C=(x=(s=V.selected[0])==null?void 0:s.require)==null?void 0:x.toLowerCase(),W=i(null),B=i(null),u=i(V.selected.map(r=>r.mentee)),j=i(),t=i({ref_id:V.selected.map(r=>r.id),mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:(($=V.selected[0])==null?void 0:$.package)??null,tax:null,individual_fee:null,duration:"",notes:"",pic_id:[],curriculum_id:((le=V.selected[0])==null?void 0:le.curriculum)??null}),E=async(r=!1)=>{const o=r?"api/v1/user/mentor-tutors?inhouse=true&role="+C:"api/v1/user/mentor-tutors?role="+C;try{const k=await M.get(o);k&&(r?G.value=Object.values(k):K.value=k)}catch(k){console.error(k)}},_=async()=>{try{const r=await M.get("api/v1/package/component/list?category="+C);r&&(U.value=r)}catch(r){console.error(r)}},ee=()=>{const r=t.value.package_id,o=U.value.findIndex(h=>h.id===r);let k=U.value[o];k.detail?(L.value=!0,t.value.duration=k.detail):(L.value=!1,t.value.duration=null)},d=async()=>{try{const r=await M.get("api/v1/user/component/list");r&&(Q.value=r)}catch(r){console.error(r)}},X=async(r,o=null,k=0)=>{if(W.value=k,t.value.tax=(k==1,2.5),t.value.subject_id=null,C=="mentor")t.value.subject_id=r[0].subjects[0].id;else try{const h=await M.get("api/v1/user/mentor-tutors/"+o+"/subjects");h&&(z.value=h)}catch(h){console.error(h)}},I=async(r,o,k)=>{if(o)try{const h=await M.get("api/v1/component/fee/"+r+"/"+o+"/"+k);h&&(t.value.individual_fee=h.fee_individual,h.fee_individual?f():B.value=null)}catch(h){console.error(h)}},R=async()=>{try{const r=await M.get("api/v1/curriculum/component/list");r&&(Y.value=r)}catch(r){console.error(r)}},ne=async()=>{var o,k,h;t.value.mentortutor_email=v.value.email;const{valid:r}=await j.value.validate();if(r){n.value=!0;try{const q=await M.post("api/v1/timesheet/create",t.value);q&&(se("success",q.message,"bottom-end"),D("reload"),t.value={ref_id:[],mentortutor_email:null,subject_id:null,subject_name:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[],tax:null,individual_fee:""},v.value=[],window.open("/admin/timesheet/tutoring/"+((o=q.data)==null?void 0:o.timesheet_id),"_blank"))}catch(q){if(console.log(q),(h=(k=q==null?void 0:q.response)==null?void 0:k.data)!=null&&h.errors){const re=q.response.data.errors;se("error",re,"bottom-end")}}finally{D("close"),n.value=!1}}},f=()=>{const r=t.value.individual_fee*(1-t.value.tax/100);B.value=Math.trunc(r)},c=()=>{const r=B.value/(1-t.value.tax/100);t.value.individual_fee=Math.trunc(r)};return me(()=>{E(),E(!0),_(),d(),R()}),(r,o)=>{var k;return p(),N(de,{"max-width":"650","prepend-icon":"ri-send-plane-line",title:(k=V.selected[0])==null?void 0:k.program_name},{default:a(()=>[l(ue,null,{default:a(()=>{var h;return[b("div",$e,[b("p",Fe,A(((h=V.selected)==null?void 0:h.length)>1?"Students":"Student")+":",1),(p(!0),F(ie,null,ce(e(u),q=>(p(),F("p",{key:q,class:"text-sm bg-info px-2 rounded"},A(q),1))),128))]),l(be,{onSubmit:ve(ne,["prevent"]),ref_key:"formData",ref:j,"validate-on":"input"},{default:a(()=>[l(pe,null,{default:a(()=>{var q,re;return[l(g,{md:"12",cols:"12"},{default:a(()=>[l(O,{clearable:"",modelValue:e(v),"onUpdate:modelValue":[o[0]||(o[0]=m=>Z(v)?v.value=m:null),o[1]||(o[1]=m=>X(e(v).roles,e(v).uuid,e(v).has_npwp))],label:"Tutor Name",items:e(K),"item-props":m=>({title:m.full_name,subtitle:m.roles.map(P=>P.name).join(", ")}),rules:e(w).required,loading:e(n),disabled:e(n),density:"compact"},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),l(g,{md:"6",cols:"6"},{default:a(()=>{var m;return[l(O,{clearable:"",modelValue:e(t).curriculum_id,"onUpdate:modelValue":[o[2]||(o[2]=P=>e(t).curriculum_id=P),o[3]||(o[3]=P=>I(e(v).id,e(t).subject_name,e(t).curriculum_id))],label:"Curriculum",items:e(Y),"item-props":P=>({title:P.name}),rules:e(w).required,loading:e(n),disabled:e(n)||((m=V.selected[0])==null?void 0:m.curriculum),density:"compact","item-value":"id"},null,8,["modelValue","items","item-props","rules","loading","disabled"])]}),_:1}),((re=(q=V.selected[0])==null?void 0:q.require)==null?void 0:re.toLowerCase())=="tutor"?(p(),N(g,{key:0,md:"6",cols:"6"},{default:a(()=>[l(O,{clearable:"",modelValue:e(t).subject_name,"onUpdate:modelValue":[o[4]||(o[4]=m=>e(t).subject_name=m),o[5]||(o[5]=m=>I(e(v).id,e(t).subject_name,e(t).curriculum_id))],label:"Subject Tutoring",items:e(z),loading:e(n),disabled:e(n),rules:e(w).required,density:"compact"},null,8,["modelValue","items","loading","disabled","rules"])]),_:1})):H("",!0),l(g,{md:"8",cols:"8"},{default:a(()=>{var m;return[l(O,{clearable:"",label:"Package",modelValue:e(t).package_id,"onUpdate:modelValue":[o[6]||(o[6]=P=>e(t).package_id=P),ee],items:e(U),density:"compact","item-props":P=>({title:P.package!=null?P.type_of+" - "+P.package:P.type_of,subtitle:P.detail?P.detail/60+" Hours":"Customizable"}),"item-value":"id",rules:e(w).required,loading:e(n),disabled:e(n)||((m=V.selected[0])==null?void 0:m.package)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]}),_:1}),l(g,{md:"4",cols:"4"},{default:a(()=>[l(J,{type:"number",clearable:"",label:e(t).duration/60?"Minutes ("+(e(t).duration/60).toFixed(1)+" Hours)":"Minutes",readonly:e(L),modelValue:e(t).duration,"onUpdate:modelValue":o[7]||(o[7]=m=>e(t).duration=m),density:"compact",rules:e(w).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),l(g,{md:"4",cols:"7"},{default:a(()=>[l(J,{type:"number",clearable:"",label:"Fee/hours (Nett)",modelValue:e(B),"onUpdate:modelValue":[o[8]||(o[8]=m=>Z(B)?B.value=m:null),c],density:"compact",rules:e(w).required},null,8,["modelValue","rules"])]),_:1}),l(g,{md:"4",cols:"5"},{default:a(()=>[l(J,{type:"number",clearable:"",label:"Tax",modelValue:e(t).tax,"onUpdate:modelValue":[o[9]||(o[9]=m=>e(t).tax=m),c],rules:e(w).required,density:"compact"},null,8,["modelValue","rules"])]),_:1}),l(g,{md:"4",cols:"12"},{default:a(()=>[l(te,{activator:"parent",location:"top"},{default:a(()=>[T(" Fee Gross is automatically calculated based on the entered Net Fee and Tax Rate. ")]),_:1}),l(J,{type:"number",clearable:"",label:"Fee/hours (Gross)",modelValue:e(t).individual_fee,"onUpdate:modelValue":[o[10]||(o[10]=m=>e(t).individual_fee=m),f],density:"compact",readonly:"",rules:e(w).required},null,8,["modelValue","rules"])]),_:1}),l(g,{md:"6",cols:"6"},{default:a(()=>[l(O,{clearable:"",modelValue:e(t).inhouse_id,"onUpdate:modelValue":o[11]||(o[11]=m=>e(t).inhouse_id=m),label:"Inhouse Mentor/Tutor",items:e(G),density:"compact","item-props":m=>({title:m.full_name}),"item-value":"uuid",loading:e(n),disabled:e(n),rules:e(w).required},null,8,["modelValue","items","item-props","loading","disabled","rules"])]),_:1}),l(g,{md:"6",cols:"6"},{default:a(()=>[l(O,{multiple:"",clearable:"",chips:"",label:"PIC",modelValue:e(t).pic_id,"onUpdate:modelValue":o[12]||(o[12]=m=>e(t).pic_id=m),items:e(Q),"item-title":"full_name","item-value":"id",loading:e(n),density:"compact",disabled:e(n),rules:e(w).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1}),l(g,{md:"12"},{default:a(()=>[l(ye,{label:"Notes",modelValue:e(t).notes,"onUpdate:modelValue":o[13]||(o[13]=m=>e(t).notes=m),density:"compact"},null,8,["modelValue"])]),_:1})]}),_:1}),l(ge,{class:"mt-5 px-0"},{default:a(()=>[l(oe,{variant:"tonal",color:"error",type:"button",onClick:o[14]||(o[14]=q=>D("close"))},{default:a(()=>[l(S,{icon:"ri-close-line",class:"me-3"}),T(" Close ")]),_:1}),l(_e),l(oe,{variant:"tonal",color:"success",type:"submit"},{default:a(()=>[T(" Save "),l(S,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]}),_:1})]),_:1},8,["title"])}}},Ie={__name:"program_add_specialist",props:{selected:Object},emits:["close","reload"],setup(ae,{emit:y}){var R,ne;const V=ae,D=y,n=i(!1),v=i([]),K=i([]),Y=i([]),z=i([]),U=i([]),Q=i([]),G=i(!1),L=(ne=(R=V.selected[0])==null?void 0:R.require)==null?void 0:ne.toLowerCase(),C=i(null),W=i(null),B=i(),u=i({ref_id:V.selected.map(f=>f.id),mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",tax:null,individual_fee:null,notes:"",pic_id:[]}),j=async(f=!1)=>{const c=L=="mentor"?"External Mentor":L,s=f?"api/v1/user/mentor-tutors?inhouse=true&role="+L:"api/v1/user/mentor-tutors?role="+c;try{const x=await M.get(s);x&&(f?Q.value=Object.values(x):K.value=x)}catch(x){console.error(x)}},t=async()=>{try{const f=await M.get("api/v1/package/component/list?category="+L);f&&(z.value=f)}catch(f){console.error(f)}},E=()=>{const f=u.value.package_id,c=z.value.findIndex(x=>x.id===f);let s=z.value[c];s.detail?(G.value=!0,u.value.duration=s.detail):(G.value=!1,u.value.duration=null)},_=async()=>{try{const f=await M.get("api/v1/user/component/list");f&&(U.value=f)}catch(f){console.error(f)}},ee=async(f,c=null,s=0)=>{var x,$,le,r;if(u.value.subject_id=null,C.value=s,u.value.tax=(s==1,2.5),L=="mentor")u.value.subject_id=($=(x=f[0])==null?void 0:x.subjects[0])==null?void 0:$.id,u.value.individual_fee=(r=(le=f[0])==null?void 0:le.subjects[0])==null?void 0:r.fee_individual,u.value.individual_fee?X():W.value=null;else try{const o=await M.get("api/v1/user/mentor-tutors/"+c+"/subjects");o&&(Y.value=o)}catch(o){console.error(o)}},d=async()=>{var c,s,x;u.value.mentortutor_email=v.value.email;const{valid:f}=await B.value.validate();if(f){n.value=!0;try{const $=await M.post("api/v1/timesheet/create",u.value);$&&(se("success",$.message,"bottom-end"),D("reload"),u.value={ref_id:[],mentortutor_email:null,subject_id:null,subject_name:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[],tax:null,individual_fee:""},v.value=[],window.open("/admin/timesheet/specialist/"+((c=$.data)==null?void 0:c.timesheet_id),"_blank"))}catch($){if((x=(s=$==null?void 0:$.response)==null?void 0:s.data)!=null&&x.errors){const le=$.response.data.errors;se("error",le,"bottom-end")}}finally{D("close"),n.value=!1}}},X=()=>{const f=u.value.individual_fee*(1-u.value.tax/100);W.value=Math.trunc(f)},I=()=>{const f=W.value/(1-u.value.tax/100);u.value.individual_fee=Math.trunc(f)};return me(()=>{j(),j(!0),t(),_()}),(f,c)=>(p(),N(de,{"max-width":"650","prepend-icon":"ri-send-plane-line",title:"Assign to Subject Specialist"},{default:a(()=>[l(ue,null,{default:a(()=>[l(be,{onSubmit:ve(d,["prevent"]),ref_key:"formData",ref:B,"validate-on":"input"},{default:a(()=>[l(pe,null,{default:a(()=>[l(g,{md:"12",cols:"12"},{default:a(()=>[l(O,{density:"compact",clearable:"",modelValue:e(v),"onUpdate:modelValue":[c[0]||(c[0]=s=>Z(v)?v.value=s:null),c[1]||(c[1]=s=>ee(e(v).roles,e(v).uuid,e(v).has_npwp))],label:"Subject Specialist Name",items:e(K),"item-props":s=>({title:s.full_name,subtitle:s.roles.map(x=>x.name).join(", ")}),rules:e(w).required,loading:e(n),disabled:e(n)},null,8,["modelValue","items","item-props","rules","loading","disabled"]),e(C)!=null?(p(),N(je,{key:0,color:e(C)==1?"success":"error",class:"py-2 mt-2"},{default:a(()=>[l(S,{icon:"ri-error-warning-line",class:"mr-2"}),b("small",null," Mentor "+A(e(C)==1?"already":"don`t")+" have NPWP ",1)]),_:1},8,["color"])):H("",!0)]),_:1}),l(g,{md:"8",cols:"8"},{default:a(()=>[l(O,{density:"compact",clearable:"",label:"Package",modelValue:e(u).package_id,"onUpdate:modelValue":[c[2]||(c[2]=s=>e(u).package_id=s),E],items:e(z),"item-props":s=>({title:s.package!=null?s.type_of+" - "+s.package:s.type_of,subtitle:s.detail?s.detail/60+" Hours":"Customizable"}),"item-value":"id",rules:e(w).required,loading:e(n),disabled:e(n)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),l(g,{md:"4",cols:"4"},{default:a(()=>[l(J,{density:"compact",type:"number",clearable:"",label:+e(u).duration/60?""+e(u).duration/60+" Hours":"Minutes",readonly:e(G),modelValue:e(u).duration,"onUpdate:modelValue":c[3]||(c[3]=s=>e(u).duration=s),rules:e(w).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),l(g,{md:"4",cols:"7"},{default:a(()=>[l(J,{type:"number",clearable:"",label:"Fee/hours (Nett)",modelValue:e(W),"onUpdate:modelValue":[c[4]||(c[4]=s=>Z(W)?W.value=s:null),I],density:"compact",rules:e(w).required},null,8,["modelValue","rules"])]),_:1}),l(g,{md:"4",cols:"5"},{default:a(()=>[l(J,{type:"number",clearable:"",label:"Tax",modelValue:e(u).tax,"onUpdate:modelValue":[c[5]||(c[5]=s=>e(u).tax=s),I],rules:e(w).required,density:"compact"},null,8,["modelValue","rules"])]),_:1}),l(g,{md:"4",cols:"12"},{default:a(()=>[l(te,{activator:"parent",location:"top"},{default:a(()=>[T(" Fee Gross is automatically calculated based on the entered Net Fee and Tax Rate. ")]),_:1}),l(J,{type:"number",clearable:"",label:"Fee/hours (Gross)",modelValue:e(u).individual_fee,"onUpdate:modelValue":[c[6]||(c[6]=s=>e(u).individual_fee=s),X],density:"compact",readonly:"",rules:e(w).required},null,8,["modelValue","rules"])]),_:1}),l(g,{md:"6",cols:"12"},{default:a(()=>[l(O,{density:"compact",clearable:"",modelValue:e(u).inhouse_id,"onUpdate:modelValue":c[7]||(c[7]=s=>e(u).inhouse_id=s),label:"Inhouse Mentor",items:e(Q),"item-props":s=>({title:s.full_name}),"item-value":"uuid",loading:e(n),disabled:e(n),rules:e(w).required},null,8,["modelValue","items","item-props","loading","disabled","rules"])]),_:1}),l(g,{md:"6",cols:"12"},{default:a(()=>[l(O,{density:"compact",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:e(u).pic_id,"onUpdate:modelValue":c[8]||(c[8]=s=>e(u).pic_id=s),items:e(U),"item-title":"full_name","item-value":"id",loading:e(n),disabled:e(n),rules:e(w).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1}),l(g,{md:"12"},{default:a(()=>[l(ye,{label:"Notes",modelValue:e(u).notes,"onUpdate:modelValue":c[9]||(c[9]=s=>e(u).notes=s)},null,8,["modelValue"])]),_:1})]),_:1}),l(ge,{class:"mt-5 px-0"},{default:a(()=>[l(oe,{variant:"tonal",color:"error",type:"button",onClick:c[10]||(c[10]=s=>D("close"))},{default:a(()=>[l(S,{icon:"ri-close-line",class:"me-3"}),T(" Close ")]),_:1}),l(_e),l(oe,{variant:"tonal",color:"success",type:"submit"},{default:a(()=>[T(" Save "),l(S,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}))}},Ae=["innerHTML"],De=b("div",{class:"d-flex justify-between align-center"},[b("div",{class:"w-100"},[b("h4",null,"Program Name")])],-1),Ge={key:0,class:"d-flex bg-secondary py-1 px-2 rounded-lg",style:{"align-items":"center"}},Le=b("th",{class:"text-uppercase",width:"1%"}," # ",-1),Re=b("th",{class:"text-uppercase text-center"},"Timesheet",-1),He=b("th",{class:"text-uppercase text-center"},"Student",-1),ze=b("th",{class:"text-uppercase text-center"},"School Name",-1),Be={class:"text-uppercase text-center"},Ee={key:0,class:"text-uppercase text-center"},Oe={class:"text-center"},We={class:"text-left",nowrap:""},Ye=["onClick"],Xe={class:"text-left",nowrap:""},Ze={key:0,class:"text-left",nowrap:""},Je={key:1,class:"text-left",nowrap:""},Ke={key:2,nowrap:""},Qe={key:0},el=b("tr",null,[b("td",{colspan:"6",class:"text-center"}," Sorry, no data found. ")],-1),ll=[el],tl={class:"d-flex justify-center mt-5"},jl={__name:"program",props:{name:String},setup(ae){const y=i([]),V=i(!1),D=i(!1),n=ae,v=i(1),K=i(),Y=i(),z=i([]),U=i(!1),Q=i([]),G=i(),L=i(),C=async()=>{var X,I;const j=n.name,t="?page="+v.value,E=Y.value?"&keyword="+Y.value:"",_=G.value?"&program_name="+encodeURIComponent(G.value):"",d=j=="tutoring"?"api/v1/program/list"+t+E+_+"&paginate=true":"api/v1/request"+t+Y+"&is_cancelled=true";try{U.value=!0;const R=await M.get(d);R&&(v.value=R.current_page,K.value=R.last_page,z.value=R),U.value=!1}catch(R){se("error",(I=(X=R.response)==null?void 0:X.data)==null?void 0:I.message,"bottom-end"),console.error(R),U.value=!1}},W=async()=>{try{const j=await M.get("api/v1/program/component/list");j&&(Q.value=j)}catch(j){console.error(j)}},B=Te(async j=>{v.value=1,Y.value=j.target.value,await C()},1e3),u=j=>{window.open("/admin/timesheet/"+n.name+"/"+j)};return Ve(()=>{C()}),ke(()=>{y.value=[]}),me(()=>{C(),W()}),(j,t)=>{const E=xe("VText");return p(),F(ie,null,[l(fe,{modelValue:e(D),"onUpdate:modelValue":t[0]||(t[0]=_=>Z(D)?D.value=_:null),width:"400"},{default:a(()=>[l(de,{title:"Notes","prepend-icon":"ri-chat-3-line"},{default:a(()=>[l(ue,null,{default:a(()=>[b("div",{innerHTML:e(L)},null,8,Ae)]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(de,null,{default:a(()=>[l(Ce,null,{default:a(()=>[De]),_:1}),l(ue,null,{default:a(()=>[l(pe,{class:"my-1"},{default:a(()=>[n.name=="tutoring"?(p(),N(g,{key:0,cols:"12",md:"3"},{default:a(()=>[l(O,{clearable:"",modelValue:e(G),"onUpdate:modelValue":[t[1]||(t[1]=_=>Z(G)?G.value=_:null),C],label:"Program Name",items:e(Q),"item-title":"program_name",placeholder:"Select Program Name",density:"compact","hide-details":"","single-line":"",loading:e(U),disabled:e(U)},null,8,["modelValue","items","loading","disabled"])]),_:1})):H("",!0),l(g,{cols:"12",md:"3"},{default:a(()=>[l(J,{loading:e(U),disabled:e(U),"append-inner-icon":"ri-search-line",density:"compact",label:"Search","hide-details":"","single-line":"",onInput:e(B)},null,8,["loading","disabled","onInput"])]),_:1}),l(g,{cols:"12",md:n.name=="tutoring"?6:9,class:"text-end"},{default:a(()=>[he((p(),N(oe,{density:"compact",color:e(y).length>0?"warning":"primary",class:"mb-2",disabled:!(e(y).length>0),onClick:t[2]||(t[2]=_=>V.value=!0)},{default:a(()=>[l(S,{icon:"ri-add-line",class:"me-3"}),T(" Assign "+A(e(y).length>1?"to Group":""),1)]),_:1},8,["color","disabled"])),[[Se,"Generate Timesheet","start"]])]),_:1},8,["md"])]),_:1}),l(fe,{modelValue:e(V),"onUpdate:modelValue":t[7]||(t[7]=_=>Z(V)?V.value=_:null),width:"auto",persistent:""},{default:a(()=>[n.name=="tutoring"?(p(),N(Me,{key:0,selected:e(y),onClose:t[3]||(t[3]=_=>{V.value=!1,y.value=[]}),onReload:t[4]||(t[4]=_=>{y.value=[],C()})},null,8,["selected"])):H("",!0),n.name=="specialist"?(p(),N(Ie,{key:1,selected:e(y),onClose:t[5]||(t[5]=_=>V.value=!1),onReload:t[6]||(t[6]=_=>{y.value=[],C()})},null,8,["selected"])):H("",!0)]),_:1},8,["modelValue"]),e(y).length>0?(p(),F("div",Ge,[T(" Selected: "),(p(!0),F(ie,null,ce(e(y),_=>(p(),F("small",{class:"bg-info px-3 rounded-xl ms-1 d-flex",style:{"font-size":"10px","align-items":"center"},key:_},[T(A(_.mentee)+" ",1),l(S,{icon:"ri-close-line",color:"error",class:"ms-2 cursor-pointer",onClick:ee=>y.value=e(y).filter(d=>d!==_)},null,8,["onClick"])]))),128))])):H("",!0),e(U)?(p(),N(qe,{key:1,class:"mx-auto border",type:"table-thead, table-row@10"})):(p(),N(Ue,{key:2,class:"table-responsive"},{default:a(()=>{var _,ee;return[b("thead",null,[b("tr",null,[Le,Re,He,ze,b("th",Be,A(n.name=="tutoring"?"Program Name":"Engagement Type"),1),n.name=="tutoring"?(p(),F("th",Ee," Tutor Name ")):H("",!0)])]),b("tbody",null,[(p(!0),F(ie,null,ce(e(z).data,(d,X)=>(p(),F("tr",{key:X,class:we({"bg-secondary":e(y).includes(d.id)})},[b("td",null,[d.cancellation_reason?(p(),N(E,{key:0},{default:a(()=>[l(te,{activator:"parent",location:"top"},{default:a(()=>[T(" Cancel: "+A(d.cancellation_reason),1)]),_:2},1024),l(S,{icon:"ri-subtract-line",color:"error"})]),_:2},1024)):(!d.timesheet_id||!d.scnd_timesheet_id)&&!d.cancellation_reason?(p(),N(Pe,{key:1,modelValue:e(y),"onUpdate:modelValue":t[8]||(t[8]=I=>Z(y)?y.value=I:null),value:{id:d.id,require:d.require,mentee:d.student_name,package:d.package,curriculum:d.curriculum,program_name:d.program_name}},null,8,["modelValue","value"])):d.timesheet_id&&d.scnd_timesheet_id&&!d.cancellation_reason?(p(),N(S,{key:2,icon:"ri-check-line",color:"success"})):H("",!0)]),b("td",Oe,[d.timesheet_id?(p(),N(E,{key:0,class:"cursor-pointer",onClick:I=>u(d.timesheet_id)},{default:a(()=>[l(S,{icon:"ri-file-check-line",class:"mx-1",color:"success"}),l(te,{activator:"parent",location:"top"},{default:a(()=>[T("Already")]),_:1})]),_:2},1032,["onClick"])):(p(),N(E,{key:1},{default:a(()=>[l(S,{icon:"ri-file-close-line",class:"mx-1",color:"error"}),l(te,{activator:"parent",location:"top"},{default:a(()=>[T("Not Yet")]),_:1})]),_:1})),d.scnd_timesheet_id?(p(),N(E,{key:2,class:"cursor-pointer",onClick:I=>u(d.scnd_timesheet_id)},{default:a(()=>[l(S,{icon:"ri-file-check-line",class:"mx-1",color:"success"}),l(te,{activator:"parent",location:"top"},{default:a(()=>[T("Already")]),_:1})]),_:2},1032,["onClick"])):H("",!0)]),b("td",We,[l(S,{icon:"ri-user-line",class:"me-3"}),T(" "+A(d.student_name)+" ",1),n.name=="specialist"&&d.notes?(p(),F("div",{key:0,class:"d-inline ms-2 cursor-pointer",onClick:I=>{D.value=!0,L.value=d.notes}},[l(te,{activator:"parent",location:"start"},{default:a(()=>[T(" Notes ")]),_:1}),l(S,{icon:"ri-chat-3-line",color:"info"})],8,Ye)):H("",!0)]),b("td",Xe,A(d.student_school),1),n.name=="tutoring"?(p(),F("td",Ze,[l(S,{icon:"ri-bookmark-line",class:"me-3"}),T(" "+A(d.free_trial?"[TRIAL]":"")+" "+A(d.program_name),1)])):(p(),F("td",Je,[l(S,{icon:"ri-bookmark-line",class:"me-3"}),T(" "+A(d.engagement_type),1)])),n.name=="tutoring"?(p(),F("td",Ke,A(d.tutor_name),1)):H("",!0)],2))),128))]),((ee=(_=e(z))==null?void 0:_.data)==null?void 0:ee.length)==0?(p(),F("tfoot",Qe,ll)):H("",!0)]}),_:1})),b("div",tl,[l(Ne,{modelValue:e(v),"onUpdate:modelValue":[t[9]||(t[9]=_=>Z(v)?v.value=_:null),C],length:e(K),"total-visible":4,color:"primary",density:"compact","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})],64)}}};export{jl as default};
