import{_ as ye}from"./DeleteHandler.vue_vue_type_script_setup_true_lang-CCcehyLo.js";import{r as g,l as K,o as v,f as U,w as a,b as t,am as oe,W as z,u as e,v as I,Y as A,V as w,j as $,m as ne,A as L,s as Y,ao as ie,e as de,a as l,x as Z,c as E,F as be,X as he,t as h,h as re,z as Ve,ap as ke,k as le,an as we,P as xe,i as De,aq as $e,ar as Ce,as as ge}from"./main-CzT7uzRK.js";import{r as R}from"./rules-B5G8qOzK.js";import{a as B,c as ue,V as F,b as W,d as se,e as Te}from"./VCard-tEuXfKy8.js";import{V as ce}from"./VForm-_qgyrfcJ.js";import{V as Q,a as C}from"./VRow-JoPojWIY.js";import{V as pe}from"./VTextarea-un1ORx3Z.js";import{V as X}from"./VDialog-DdXC2y6v.js";import{a as fe,V as J}from"./VTable-BfmrBn65.js";import{T as ee}from"./index-Z5hdUKVe.js";import{V as Me}from"./VCheckbox-BBXEfmyO.js";import{V as te}from"./VAutocomplete-GyIV6LGX.js";import{V as Se}from"./VDivider-D_Q9DxiI.js";import{V as Ye,a as ae,b as Ue}from"./VList-DCqCLOcv.js";import"./VAvatar-CJXsJV-i.js";import"./VImg-DBnCC04G.js";import"./VTooltip-BvXBKISB.js";import"./VCheckboxBtn-GL2PgKne.js";import"./VSelectionControl-CeIzsl1E.js";import"./VSlideGroup-DKHHA9wt.js";import"./ssrBoot-BgL4C7Wt.js";const je={__name:"activity-add",props:{id:String},emits:["close","reload"],setup(N,{emit:T}){const f=N,V=T,s=g(!1),y=g(),n=g({activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}),_=()=>{n.value={activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}},D=async()=>{const{valid:k}=await y.value.validate();if(k){s.value=!0;try{const o=await L.post("api/v1/timesheet/"+f.id+"/activity",n.value);o&&Y("success",o.message,"bottom-end")}catch(o){Y("error",o.response.data.errors,"bottom-end")}finally{_(),s.value=!1,V("reload"),V("close")}}};return(k,o)=>{const M=K("DialogCloseBtn"),m=K("VDateInput");return v(),U(F,{title:"New Activity"},{default:a(()=>[t(M,{variant:"text",size:"default",onClick:o[0]||(o[0]=i=>V("close"))}),t(B,null,{default:a(()=>[t(ce,{onSubmit:oe(D,["prevent"]),ref_key:"formData",ref:y,"validate-on":"input"},{default:a(()=>[t(Q,null,{default:a(()=>[t(C,{cols:"12",class:"d-none"},{default:a(()=>[t(z,{modelValue:e(n).activity,"onUpdate:modelValue":o[1]||(o[1]=i=>e(n).activity=i),label:"Activity Name",placeholder:"Activity",loading:e(s),disabled:e(s),variant:"solo"},null,8,["modelValue","loading","disabled"])]),_:1}),t(C,{cols:"12"},{default:a(()=>[t(pe,{modelValue:e(n).description,"onUpdate:modelValue":o[2]||(o[2]=i=>e(n).description=i),label:"Meeting Discussion",placeholder:"Meeting Discussion",variant:"solo",loading:e(s),disabled:e(s),rules:e(R).required},null,8,["modelValue","loading","disabled","rules"])]),_:1}),t(C,{md:"6",cols:"12"},{default:a(()=>[t(m,{modelValue:e(n).date,"onUpdate:modelValue":o[3]||(o[3]=i=>e(n).date=i),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",loading:e(s),disabled:e(s),rules:e(R).required},null,8,["modelValue","loading","disabled","rules"])]),_:1}),t(C,{md:"3",cols:"6"},{default:a(()=>[t(z,{type:"time",modelValue:e(n).start_time,"onUpdate:modelValue":o[4]||(o[4]=i=>e(n).start_time=i),label:"Start Time",placeholder:"Start Time",rules:e(R).required,variant:"solo",class:"mb-3",loading:e(s),disabled:e(s),onChange:o[5]||(o[5]=i=>e(n).start_date=e(I)(e(n).date).format("YYYY-MM-DD")+" "+e(n).start_time+":00")},null,8,["modelValue","rules","loading","disabled"])]),_:1}),t(C,{md:"3",cols:"6"},{default:a(()=>[t(z,{type:"time",modelValue:e(n).end_time,"onUpdate:modelValue":o[6]||(o[6]=i=>e(n).end_time=i),label:"End Time",placeholder:"End Time",variant:"solo",loading:e(s),disabled:e(s),onChange:o[7]||(o[7]=i=>e(n).end_date=e(I)(e(n).date).format("YYYY-MM-DD")+" "+e(n).end_time+":00")},null,8,["modelValue","loading","disabled"])]),_:1}),t(C,{md:"12",cols:"12"},{default:a(()=>[t(z,{type:"text",modelValue:e(n).meeting_link,"onUpdate:modelValue":o[8]||(o[8]=i=>e(n).meeting_link=i),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",loading:e(s),disabled:e(s)},null,8,["modelValue","loading","disabled"])]),_:1})]),_:1}),t(ue,{class:"mt-5"},{default:a(()=>[t(A,{type:"button",color:"error",loading:e(s),disabled:e(s),onClick:o[9]||(o[9]=i=>V("close"))},{default:a(()=>[t(w,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1},8,["loading","disabled"]),t(ne),t(A,{type:"submit",color:"success",loading:e(s),disabled:e(s)},{default:a(()=>[$(" Save "),t(w,{icon:"ri-save-line",class:"ms-3"})]),_:1},8,["loading","disabled"])]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Pe={__name:"activity-edit",props:{timesheet_id:Number,activity:String},emits:["close","reload"],setup(N,{emit:T}){const f=g(!1),V=g(),s=N,y=T,n=ie("updateReload"),_=g({activity:s==null?void 0:s.activity.activity,description:s==null?void 0:s.activity.description,date:new Date(s==null?void 0:s.activity.start_date),start_time:s==null?void 0:s.activity.start_time,end_time:s==null?void 0:s.activity.end_time,start_date:I(s==null?void 0:s.activity.start_date).format("YYYY-MM-DD")+" "+(s==null?void 0:s.activity.start_time)+":00",end_date:(s==null?void 0:s.activity.end_time)!=0?I(s==null?void 0:s.activity.start_date).format("YYYY-MM-DD")+" "+(s==null?void 0:s.activity.end_time)+":00":null,meeting_link:s==null?void 0:s.activity.meeting_link}),D=async()=>{var o,M;const{valid:k}=await V.value.validate();if(k){f.value=!0;try{_.value.start_date=I(_.value.date).format("YYYY-MM-DD")+" "+_.value.start_time+":00",_.value.end_date=I(_.value.date).format("YYYY-MM-DD")+" "+_.value.end_time+":00";const m=await L.put("api/v1/timesheet/"+s.timesheet_id+"/activity/"+s.activity.id,_.value);m&&(Y("success",m.message,"bottom-end"),y("reload"))}catch(m){if((M=(o=m==null?void 0:m.response)==null?void 0:o.data)!=null&&M.errors){const i=m.response.data.errors;let r="Validation errors:";if(typeof i!="string"){for(const u in i)i.hasOwnProperty(u)&&(r+=`
${u}: ${i[u].join(", ")}`);Y("error",r,"bottom-end")}else Y("error",m.response.data.errors,"bottom-end")}}finally{f.value=!1,y("close"),setTimeout(()=>{n(!0)},3e3)}}};return(k,o)=>{const M=K("DialogCloseBtn"),m=K("VDateInput");return v(),U(F,{title:"Edit Activity"},{default:a(()=>[t(M,{variant:"text",size:"default",onClick:o[0]||(o[0]=i=>y("close"))}),t(B,null,{default:a(()=>[t(ce,{onSubmit:oe(D,["prevent"]),ref_key:"formData",ref:V,"validate-on":"input"},{default:a(()=>[t(Q,null,{default:a(()=>[t(C,{cols:"12",class:"d-none"},{default:a(()=>[t(z,{modelValue:e(_).activity,"onUpdate:modelValue":o[1]||(o[1]=i=>e(_).activity=i),label:"Activity Name",placeholder:"Activity",variant:"solo",disabled:e(f),loading:e(f)},null,8,["modelValue","disabled","loading"])]),_:1}),t(C,{cols:"12"},{default:a(()=>[t(pe,{modelValue:e(_).description,"onUpdate:modelValue":o[2]||(o[2]=i=>e(_).description=i),label:"Meeting Discussion",rules:e(R).required,placeholder:"Meeting Discussion",variant:"solo",disabled:e(f),loading:e(f)},null,8,["modelValue","rules","disabled","loading"])]),_:1}),t(C,{md:"6",cols:"12"},{default:a(()=>[t(m,{modelValue:e(_).date,"onUpdate:modelValue":o[3]||(o[3]=i=>e(_).date=i),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",disabled:e(f),loading:e(f),rules:e(R).required},null,8,["modelValue","disabled","loading","rules"])]),_:1}),t(C,{md:"3",cols:"6"},{default:a(()=>[t(z,{type:"time",modelValue:e(_).start_time,"onUpdate:modelValue":o[4]||(o[4]=i=>e(_).start_time=i),label:"Start Time",rules:e(R).required,placeholder:"Start Time",variant:"solo",disabled:e(f),loading:e(f),onChange:o[5]||(o[5]=i=>e(_).start_date=e(I)(s==null?void 0:s.activity.date).format("YYYY-MM-DD")+" "+e(_).start_time+":00")},null,8,["modelValue","rules","disabled","loading"])]),_:1}),t(C,{md:"3",cols:"6"},{default:a(()=>[t(z,{type:"time",modelValue:e(_).end_time,"onUpdate:modelValue":o[6]||(o[6]=i=>e(_).end_time=i),label:"End Time",placeholder:"End Time",variant:"solo",disabled:e(f),loading:e(f),onChange:o[7]||(o[7]=i=>e(_).end_date=e(I)(s==null?void 0:s.activity.date).format("YYYY-MM-DD")+" "+e(_).end_time+":00")},null,8,["modelValue","disabled","loading"])]),_:1}),t(C,{md:"12",cols:"12"},{default:a(()=>[t(z,{type:"text",modelValue:e(_).meeting_link,"onUpdate:modelValue":o[8]||(o[8]=i=>e(_).meeting_link=i),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",disabled:e(f),loading:e(f)},null,8,["modelValue","disabled","loading"])]),_:1})]),_:1}),t(ue,{class:"mt-5"},{default:a(()=>[t(A,{color:"error",disabled:e(f),loading:e(f),onClick:o[9]||(o[9]=i=>y("close"))},{default:a(()=>[t(w,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1},8,["disabled","loading"]),t(ne),t(A,{color:"success",type:"submit",disabled:e(f),loading:e(f)},{default:a(()=>[$(" Save "),t(w,{icon:"ri-save-line",class:"ms-3"})]),_:1},8,["disabled","loading"])]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Le={class:"d-flex justify-between align-center"},Ae=l("div",{class:"w-100"},[l("h4",null,"Activity")],-1),Ne=l("thead",null,[l("tr",null,[l("th",{class:"text-uppercase",width:"1%"}," No "),l("th",{class:"text-uppercase text-center"},"Meeting Discussion"),l("th",{class:"text-uppercase text-center"},"Date"),l("th",{class:"text-uppercase text-center"},"Start Time"),l("th",{class:"text-uppercase text-center"},"End Time"),l("th",{class:"text-uppercase text-center"},"Time Spent"),l("th",{class:"text-uppercase text-center"},"Status"),l("th",{class:"text-uppercase text-end"},"#")])],-1),qe={key:0},Be=l("tr",null,[l("th",{colspan:"8",class:"text-center"}," No Activity Found ")],-1),Ee=[Be],Re={key:1},Ie={width:"1%"},ze={class:"d-none"},Fe={class:"text-start"},Oe={class:"text-center"},He={class:"text-center"},Ge={class:"text-center"},Je={class:"text-end"},We=["href"],Xe={__name:"timesheet-detail",props:{id:String},setup(N){const T=N,f=ie("updateReload"),V=g([]),s=g(!1),y=g([{add:!1,edit:!1,delete:!1}]),n=g([]),_=async()=>{s.value=!0;try{const m=await L.get("api/v1/timesheet/"+T.id+"/activities");m&&(V.value=m)}catch(m){console.error(m)}finally{s.value=!1}},D=m=>{y.value[m]?y.value[m]=!1:y.value[m]=!0},k=(m,i)=>{n.value=i,D(m)},o=async()=>{var m,i,r;try{const u=await L.delete("api/v1/timesheet/"+T.id+"/activity/"+n.value.id);u&&(Y("success",u.message,"bottom-end"),D("delete"))}catch(u){((m=u.response)==null?void 0:m.status)==400&&Y("error",(r=(i=u.response)==null?void 0:i.data)==null?void 0:r.errors,"bottom-end")}finally{_(),f(!0)}},M=async m=>{var i,r,u,d;try{const c=await L.patch("api/v1/timesheet/"+T.id+"/activity/"+m.id,m);c&&Y("success",c.message,"bottom-end")}catch(c){if((r=(i=c==null?void 0:c.response)==null?void 0:i.data)!=null&&r.message)Y("error",c.response.data.message,"bottom-end");else if((d=(u=c==null?void 0:c.response)==null?void 0:u.data)!=null&&d.errors){const p=c.response.data.errors;let q="Validation errors:";if(typeof p!="string"){for(const P in p)p.hasOwnProperty(P)&&(q+=`
${P}: ${p[P].join(", ")}`);Y("error",q,"bottom-end")}else Y("error",c.response.data.errors,"bottom-end")}}finally{_(),f(!0)}};return de(()=>{_()}),(m,i)=>(v(),U(F,null,{default:a(()=>[t(W,null,{default:a(()=>[l("div",Le,[Ae,Z((v(),U(A,{onClick:i[0]||(i[0]=r=>D("add"))},{default:a(()=>[t(w,{icon:"ri-add-line"})]),_:1})),[[ee,"New Activity","start"]]),t(X,{modelValue:e(y).add,"onUpdate:modelValue":i[2]||(i[2]=r=>e(y).add=r),"max-width":"600",persistent:""},{default:a(()=>[t(je,{id:T.id,onClose:i[1]||(i[1]=r=>D("add")),onReload:_},null,8,["id"])]),_:1},8,["modelValue"])])]),_:1}),t(B,null,{default:a(()=>[e(s)?(v(),U(J,{key:1,type:"table"})):(v(),U(fe,{key:0,class:"text-no-wrap",height:"400","fixed-header":""},{default:a(()=>{var r;return[Ne,((r=e(V))==null?void 0:r.length)==0?(v(),E("tbody",qe,Ee)):(v(),E("tbody",Re,[(v(!0),E(be,null,he(e(V),(u,d)=>(v(),E("tr",{key:d},[l("td",Ie,h(d+1),1),l("td",ze,h(u.activity),1),l("td",Fe,h(u.description),1),l("td",null,h(m.$moment(u.start_date).format("dddd"))+", "+h(m.$moment(u.start_date).format("MMM Do YYYY")),1),l("td",Oe,h(u.start_time),1),l("td",He,h(u.end_time),1),l("td",Ge,[t(w,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),$(" "+h(u.estimate)+" Minutes ",1)]),l("td",null,[Z(t(Me,{color:"success",modelValue:u.status,"onUpdate:modelValue":[c=>u.status=c,c=>M(u)],value:!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue"]),[[ee,u.status?"Completed":"Not Yet","start"]])]),l("td",Je,[u.meeting_link?(v(),U(A,{key:0,color:"primary",density:"compact",class:"me-1"},{default:a(()=>[l("a",{href:u.meeting_link,target:"_blank",class:"bg-primary"},[t(w,{icon:"ri ri-link"}),$(" Join ")],8,We)]),_:2},1024)):re("",!0),Z((v(),U(A,{color:"warning",density:"compact",class:"me-1",onClick:c=>k("edit",u)},{default:a(()=>[t(w,{icon:"ri-edit-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Edit Activity","start"]]),Z((v(),U(A,{color:"error",density:"compact",onClick:c=>k("delete",u)},{default:a(()=>[t(w,{icon:"ri-delete-bin-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Delete Activity","start"]])])]))),128))]))]}),_:1}))]),_:1}),t(X,{modelValue:e(y).edit,"onUpdate:modelValue":i[4]||(i[4]=r=>e(y).edit=r),"max-width":"600",persistent:""},{default:a(()=>[t(Pe,{timesheet_id:T==null?void 0:T.id,activity:e(n),onClose:i[3]||(i[3]=r=>D("edit")),onReload:_},null,8,["timesheet_id","activity"])]),_:1},8,["modelValue"]),t(X,{modelValue:e(y).delete,"onUpdate:modelValue":i[6]||(i[6]=r=>e(y).delete=r),"max-width":"400",persistent:""},{default:a(()=>[t(ye,{title:"activity",onClose:i[5]||(i[5]=r=>D("delete")),onDelete:o})]),_:1},8,["modelValue"])]),_:1}))}},Ke={__name:"timesheet-transfer",props:{timesheet_id:Number,require:String},emits:["close","reload"],setup(N,{emit:T}){const f=g(),V=N,s=T,y=g([]),n=g([]),_=g([]),D=V.require.toLowerCase(),k=g(!1),o=g({mentortutor_email:null,subject_id:null}),M=async()=>{const r="api/v1/user/mentor-tutors?role="+D;k.value=!0;try{const u=await L.get(r);u&&(y.value=u)}catch(u){console.error(u)}finally{k.value=!1}},m=async(r,u=null)=>{if(o.value.subject_id=null,D=="mentor")o.value.subject_id=r[0].subjects[0].id;else{k.value=!0;try{const d=await L.get("api/v1/user/mentor-tutors/"+u+"/subjects");d&&(_.value=d)}catch(d){console.error(d)}finally{k.value=!1}}},i=async()=>{var d,c;s("close"),o.value.mentortutor_email=n.value.email;const{valid:r}=await f.value.validate(),u=await ke("Are you sure you want to change the owner?");if(r&&u){k.value=!0;try{const p=await L.patch("api/v1/timesheet/"+V.timesheet_id+"/void/",o.value);p&&(Y("success",p.message,"bottom-end"),le.push({path:"/admin/timesheet/"+p.data.timesheet_id}),o.value={mentortutor_email:null,subject_id:null},n.value=[],setTimeout(()=>{le.go(0)},1e3))}catch(p){if(console.log(p),(c=(d=p==null?void 0:p.response)==null?void 0:d.data)!=null&&c.errors){const q=p.response.data.errors;Y("error",q,"bottom-end")}}finally{s("close"),k.value=!1}}};return de(()=>{M()}),(r,u)=>(v(),U(F,{class:"mx-auto my-8",elevation:"16",width:"450"},{default:a(()=>[t(ce,{ref_key:"formData",ref:f,"validate-on":"input",onSubmit:oe(i,["prevent"])},{default:a(()=>[t(se,null,{default:a(()=>[t(W,null,{default:a(()=>[$(" Timesheet Ownership Transfer ")]),_:1}),t(Te,null,{default:a(()=>[$(" Change Timesheet Handler ")]),_:1})]),_:1}),t(B,null,{default:a(()=>[t(Q,null,{default:a(()=>{var d;return[t(C,{md:"12"},{default:a(()=>[t(te,{variant:"solo",clearable:"",modelValue:e(n),"onUpdate:modelValue":[u[0]||(u[0]=c=>Ve(n)?n.value=c:null),u[1]||(u[1]=c=>m(e(n).roles,e(n).uuid))],label:"Mentor/Tutor",items:e(y),"item-props":c=>({title:c.full_name,subtitle:c.roles.map(p=>p.name).join(", ")}),rules:e(R).required,loading:e(k),disabled:e(k)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),((d=V.require)==null?void 0:d.toLowerCase())=="tutor"?(v(),U(C,{key:0,md:"12"},{default:a(()=>[t(te,{variant:"solo",clearable:"",modelValue:e(o).subject_id,"onUpdate:modelValue":u[2]||(u[2]=c=>e(o).subject_id=c),label:"Subject Tutoring",items:e(_),"item-title":"subject","item-value":"id",loading:e(k),disabled:e(k),rules:e(R).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1})):re("",!0)]}),_:1})]),_:1}),t(ue,{class:"mx-3 mb-3"},{default:a(()=>[t(A,{color:"error",onClick:u[3]||(u[3]=d=>s("close"))},{default:a(()=>[t(w,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1}),t(ne),t(A,{color:"success",type:"submit"},{default:a(()=>[$(" Save Changes "),t(w,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1}))}},Qe={__name:"user-edit",props:["id","item","package_id"],emits:["close","reload"],setup(N,{emit:T}){var p,q,P,O,H,G;const f=N,V=T,s=g([]),y=g([]),n=g([]),_=g([]),D=g(!1),k=g(!0),o=g(!0),M=g(),m=g({mentortutor_email:(p=f.item)==null?void 0:p.tutormentor_email,subject_id:(q=f.item)==null?void 0:q.subject_id,inhouse_id:(P=f.item)==null?void 0:P.inhouse_id,package_id:f.package_id,duration:(O=f.item)==null?void 0:O.duration,notes:(H=f.item)==null?void 0:H.notes,pic_id:(G=f.item)==null?void 0:G.pic_id}),i=async(S=!1)=>{o.value=!0;const x=S?"api/v1/user/mentor-tutors?inhouse=true":"api/v1/user/mentor-tutors";try{const j=await L.get(x);j&&(S?_.value=Object.values(j):s.value=j)}catch(j){console.error(j)}finally{o.value=!1}},r=async()=>{o.value=!0;try{const S=await L.get("api/v1/package/component/list");S&&(y.value=S)}catch(S){console.error(S)}finally{o.value=!1}},u=()=>{const S=m.value.package_id,x=y.value.findIndex(b=>b.id===S);let j=y.value[x];j.detail?(D.value=!0,m.value.duration=j.detail):(D.value=!1,m.value.duration=null)},d=async()=>{o.value=!0;try{const S=await L.get("api/v1/user/component/list");S&&(n.value=S)}catch(S){console.error(S)}finally{o.value=!1}},c=async()=>{var x,j;const{valid:S}=await M.value.validate();if(S)try{const b=await L.put("api/v1/timesheet/"+f.id+"/update",m.value);b&&(m.value={mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[]},Y("success",b.message,"bottom-end"),V("reload"))}catch(b){if((j=(x=b==null?void 0:b.response)==null?void 0:x.data)!=null&&j.errors){const me=b.response.data.errors;let ve="Validation errors:";for(const _e in me)me.hasOwnProperty(_e)&&(ve+=`
${_e}: ${me[_e].join(", ")}`);Y("error",ve,"bottom-end")}}finally{V("close")}};return de(()=>{i(!0),r(),d(),setTimeout(()=>{k.value=!1},2e3)}),(S,x)=>{const j=K("DialogCloseBtn");return v(),U(F,{title:"Edit Detail"},{default:a(()=>[t(j,{variant:"text",size:"default",onClick:x[0]||(x[0]=b=>V("close"))}),t(B,null,{default:a(()=>[t(ce,{onSubmit:oe(c,["prevent"]),ref_key:"formData",ref:M,"validate-on":"input"},{default:a(()=>[t(Q,null,{default:a(()=>[t(C,{md:"8"},{default:a(()=>[t(te,{variant:"solo",clearable:"",label:"Package",modelValue:e(m).package_id,"onUpdate:modelValue":[x[1]||(x[1]=b=>e(m).package_id=b),u],items:e(y),"item-props":b=>({title:b.package!=null?b.type_of+" - "+b.package:b.type_of}),"item-value":"id",rules:e(R).required,loading:e(o),disabled:e(o)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),t(C,{md:"4"},{default:a(()=>[t(z,{type:"number",variant:"solo",clearable:"",label:+e(m).duration/60?"Minutes ("+e(m).duration/60+" Hours)":"Minutes",readonly:e(D),modelValue:e(m).duration,"onUpdate:modelValue":x[2]||(x[2]=b=>e(m).duration=b),rules:e(R).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),t(C,{md:"12"},{default:a(()=>[t(te,{variant:"solo",clearable:"",modelValue:e(m).inhouse_id,"onUpdate:modelValue":x[3]||(x[3]=b=>e(m).inhouse_id=b),label:"Inhouse Mentor/Tutor",items:e(_),"item-props":b=>({title:b.full_name}),"item-value":"uuid",rules:e(R).required,loading:e(o),disabled:e(o)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),t(C,{md:"12"},{default:a(()=>[t(te,{variant:"solo",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:e(m).pic_id,"onUpdate:modelValue":x[4]||(x[4]=b=>e(m).pic_id=b),items:e(n),"item-title":"full_name","item-value":"id",rules:e(R).required,loading:e(o),disabled:e(o)},null,8,["modelValue","items","rules","loading","disabled"])]),_:1}),t(C,{md:"12"},{default:a(()=>[t(pe,{label:"Notes",modelValue:e(m).notes,"onUpdate:modelValue":x[5]||(x[5]=b=>e(m).notes=b),variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1}),t(Se,{class:"my-3"}),t(ue,null,{default:a(()=>[t(A,{color:"error",type:"button",onClick:x[6]||(x[6]=b=>V("close"))},{default:a(()=>[t(w,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1}),t(ne),t(A,{color:"success",type:"submit"},{default:a(()=>[$(" Save "),t(w,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Ze={class:"w-100"},et={class:"mt-3 font-weight-light"},tt=l("hr",{class:"my-2"},null,-1),lt={key:0},at=l("tr",{class:"bg-secondary"},[l("td",null,"Name"),l("td",null,"School"),l("td",null,"Grade")],-1),st={key:1},it=l("td",{width:"20%"},"Name",-1),ot=l("td",{width:"1%"},":",-1),nt=l("td",null,"School Name",-1),dt=l("td",{width:"1%"},":",-1),rt=l("td",null,"Grade",-1),ut=l("td",{width:"1%"},":",-1),ct=l("td",null,"Email",-1),mt=l("td",{width:"1%"},":",-1),_t={class:"mt-5 font-weight-light"},ft=l("hr",{class:"my-2"},null,-1),pt={width:"30%"},vt=l("td",{width:"1%"},":",-1),gt={key:0},yt={key:1},bt=l("td",null,"Package",-1),ht=l("td",{width:"1%"},":",-1),Vt=l("td",null,"Person in Charge",-1),kt=l("td",{width:"1%"},":",-1),wt=l("td",null,"Tutor/Mentor",-1),xt=l("td",{width:"1%"},":",-1),Dt=l("td",null,"Inhouse Tutor/Mentor",-1),$t=l("td",{width:"1%"},":",-1),Ct=l("td",null,"Update On",-1),Tt=l("td",{width:"1%"},":",-1),Mt={class:"d-flex align-end w-100"},St={class:"m-0 mb-1 text-white"},Yt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Ut={class:"text-end w-100"},jt={class:"d-flex align-end w-100"},Pt={class:"m-0 mb-1 text-white"},Lt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),At={class:"text-end w-100"},Nt={class:"d-flex align-end w-100"},qt={class:"m-0 mb-1 text-white"},Bt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Et={class:"text-end w-100"},Rt={__name:"user-detail",props:{id:String,name:String},emits:["void"],setup(N,{emit:T}){const f=N,V=T,s=ie("reloadData"),y=ie("updateReload"),n=g([]),_=g([{edit:!1,void:!1,delete:!1}]),D=g(!1),k=async i=>{var r,u,d;D.value=!0;try{const c=await L.get("api/v1/timesheet/"+i+"/detail");c&&(n.value=c,V("void",c.packageDetails.void))}catch(c){((r=c.response)==null?void 0:r.status)==400&&(Y("error",(d=(u=c.response)==null?void 0:u.data)==null?void 0:d.errors,"bottom-end"),le.push("/admin/timesheet")),console.log(c)}finally{D.value=!1}},o=async()=>{var i,r,u;try{const d=await L.delete("api/v1/timesheet/"+f.id+"/delete");d&&(n.value=d,Y("success",d.message,"bottom-end"),_.value.delete=!1,le.push("/admin/timesheet"))}catch(d){((i=d.response)==null?void 0:i.status)==400&&Y("error",(u=(r=d.response)==null?void 0:r.data)==null?void 0:u.errors,"bottom-end")}},M=i=>{_.value[i]?_.value[i]=!1:_.value[i]=!0},m=async(i,r)=>{var u;$e();try{const d=await L.get("api/v1/timesheet/"+i+"/export",{responseType:"blob"});if(d){const c=window.URL.createObjectURL(new Blob([d],{type:'"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"'})),p=document.createElement("a");p.href=c,p.setAttribute("download",`Timesheet_${r}.xlsx`),document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(c),Ce.close()}}catch(d){Y("error",(u=d.response)==null?void 0:u.statusText,"bottom-end"),console.log(d)}};return de(()=>{k(f.id)}),we(()=>{s.value&&(k(f.id),y(!1))}),(i,r)=>{const u=K("router-link");return v(),U(F,{class:"mb-3"},{default:a(()=>[e(D)?(v(),U(J,{key:0,type:"heading"})):(v(),U(W,{key:1,class:"d-flex justify-between align-center"},{default:a(()=>{var d,c,p,q;return[l("div",Ze,[t(u,{to:"/admin/timesheet/"+f.name},{default:a(()=>[t(w,{icon:"ri-arrow-left-line",color:"secondary",class:"me-2",size:"25"})]),_:1},8,["to"]),$(" Timesheet ["+h(((c=(d=e(n))==null?void 0:d.packageDetails)==null?void 0:c.package_type)+" - "+((q=(p=e(n))==null?void 0:p.packageDetails)==null?void 0:q.package_name))+"] ",1)]),l("div",null,[t(De,{"close-on-content-click":!1,location:"bottom"},{activator:a(({props:P})=>[Z((v(),U(A,xe({color:"secondary"},P),{default:a(()=>[t(w,{icon:"ri-settings-3-line"})]),_:2},1040)),[[ee,"Settings","start"]])]),default:a(()=>[t(Ye,null,{default:a(()=>[t(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:r[0]||(r[0]=P=>M("edit"))},[t(w,{icon:"ri-pencil-line",class:"me-2"}),$(" Edit TimeSheet ")])]),_:1}),t(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:r[1]||(r[1]=P=>M("void"))},[t(w,{icon:"ri-exchange-2-line",class:"me-2"}),$(" Timesheet Ownership Transfer ")])]),_:1}),t(ae,null,{default:a(()=>[t(Ue,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:r[2]||(r[2]=P=>{var O,H,G,S,x,j;return m(f.id,((H=(O=e(n))==null?void 0:O.packageDetails)==null?void 0:H.package_type)+"-"+((S=(G=e(n))==null?void 0:G.packageDetails)==null?void 0:S.package_name)+"_"+((j=(x=e(n))==null?void 0:x.packageDetails)==null?void 0:j.tutormentor_name))})},[t(w,{icon:"ri-download-line",class:"me-2"}),$(" Download TimeSheet ")])]),_:1})]),_:1}),t(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:r[3]||(r[3]=P=>M("delete"))},[t(w,{icon:"ri-delete-bin-line",class:"me-2"}),$(" Delete TimeSheet ")])]),_:1})]),_:1})]),_:1})])]}),_:1})),t(B,null,{default:a(()=>[e(D)?(v(),U(Q,{key:1},{default:a(()=>[t(C,{md:"7"},{default:a(()=>[t(J,{type:"heading, paragraph, heading, paragraph",class:"mb-3"})]),_:1}),t(C,{md:"5"},{default:a(()=>[t(J,{type:"text@3",color:"#16B1FF",class:"mb-3"}),t(J,{type:"text@3",color:"#91c45e",class:"mb-3"}),t(J,{type:"text@3",color:"#e05e5e",class:"mb-3"})]),_:1})]),_:1})):(v(),U(Q,{key:0,align:"center"},{default:a(()=>[t(C,{md:"7"},{default:a(()=>[l("h4",et,[t(w,{icon:"ri-user-line",size:"17",class:"me-2"}),$(" Basic Profile ")]),tt,t(fe,{density:"compact"},{default:a(()=>{var d,c;return[((d=e(n).clientProfile)==null?void 0:d.length)>1?(v(),E("tbody",lt,[at,(v(!0),E(be,null,he(e(n).clientProfile,p=>(v(),E("tr",null,[l("td",null,h(p.client_name),1),l("td",null,h(p.client_school),1),l("td",null,h(p.client_grade),1)]))),256))])):((c=e(n).clientProfile)==null?void 0:c.length)==1?(v(),E("tbody",st,[l("tr",null,[it,ot,l("td",null,h(e(n).clientProfile[0].client_name),1)]),l("tr",null,[nt,dt,l("td",null,h(e(n).clientProfile[0].client_school),1)]),l("tr",null,[rt,ut,l("td",null,h(e(n).clientProfile[0].client_grade),1)]),l("tr",null,[ct,mt,l("td",null,h(e(n).clientProfile[0].client_mail),1)])])):re("",!0)]}),_:1}),l("h4",_t,[t(w,{icon:"ri-bookmark-line",class:"me-2",size:"17"}),$(" Package Details ")]),ft,t(fe,{density:"compact"},{default:a(()=>{var d,c,p,q,P,O,H,G;return[l("tbody",null,[l("tr",null,[l("td",pt,h(f.name=="tutoring"?"Program Name":"Engagement Type"),1),vt,f.name=="tutoring"?(v(),E("td",gt,h((d=e(n).packageDetails)!=null&&d.free_trial?"[TRIAL]":"")+" "+h((c=e(n).packageDetails)==null?void 0:c.program_name),1)):(v(),E("td",yt,h((p=e(n).packageDetails)==null?void 0:p.engagement_type),1))]),l("tr",null,[bt,ht,l("td",null,h(((q=e(n).packageDetails)==null?void 0:q.package_type)+" - "+((P=e(n).packageDetails)==null?void 0:P.package_name)),1)]),l("tr",null,[Vt,kt,l("td",null,h((O=e(n).packageDetails)==null?void 0:O.pic_name),1)]),l("tr",null,[wt,xt,l("td",null,h((H=e(n).packageDetails)==null?void 0:H.tutormentor_name),1)]),l("tr",null,[Dt,$t,l("td",null,h((G=e(n).packageDetails)==null?void 0:G.inhouse_name),1)]),l("tr",null,[Ct,Tt,l("td",null,h(e(I)().format("LLL")),1)])])]}),_:1})]),_:1}),t(C,{md:"5"},{default:a(()=>[t(F,{color:"#16B1FF",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[t(se,null,{default:a(()=>[t(W,{class:"text-white"},{default:a(()=>[$(" Total Minutes of Package ")]),_:1})]),_:1}),t(B,{class:"d-flex justify-between"},{default:a(()=>{var d;return[l("div",Mt,[l("h1",St,h((d=e(n).packageDetails)==null?void 0:d.duration_in_minutes),1),Yt])]}),_:1})]),t(B,null,{default:a(()=>[l("div",Ut,[t(w,{icon:"ri-calendar-schedule-line",size:"60"})])]),_:1})]),_:1}),t(F,{color:"#91c45e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[t(se,null,{default:a(()=>[t(W,{class:"text-white"},{default:a(()=>[$(" Total Minutes Spent ")]),_:1})]),_:1}),t(B,{class:"d-flex justify-between"},{default:a(()=>{var d;return[l("div",jt,[l("h1",Pt,h((d=e(n).packageDetails)==null?void 0:d.time_spent_in_minutes),1),Lt])]}),_:1})]),t(B,null,{default:a(()=>[l("div",At,[t(w,{icon:"ri-timer-flash-line",size:"60",color:"white"})])]),_:1})]),_:1}),t(F,{color:"#e05e5e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[t(se,null,{default:a(()=>[t(W,{class:"text-white"},{default:a(()=>[$(" Total Minutes Left ")]),_:1})]),_:1}),t(B,{class:"d-flex justify-between"},{default:a(()=>{var d,c;return[l("div",Nt,[l("h1",qt,h(((d=e(n).packageDetails)==null?void 0:d.duration_in_minutes)-((c=e(n).packageDetails)==null?void 0:c.time_spent_in_minutes)),1),Bt])]}),_:1})]),t(B,null,{default:a(()=>[l("div",Et,[t(w,{icon:"ri-timer-2-line",size:"60"})])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),t(X,{modelValue:e(_).edit,"onUpdate:modelValue":r[6]||(r[6]=d=>e(_).edit=d),"max-width":"600",persistent:""},{default:a(()=>{var d;return[t(Qe,{item:e(n).editableColumns,package_id:(d=e(n).packageDetails)==null?void 0:d.package_id,id:f.id,onClose:r[4]||(r[4]=c=>M("edit")),onReload:r[5]||(r[5]=c=>k(f.id))},null,8,["item","package_id","id"])]}),_:1},8,["modelValue"]),t(X,{modelValue:e(_).delete,"onUpdate:modelValue":r[8]||(r[8]=d=>e(_).delete=d),"max-width":"400",persistent:""},{default:a(()=>[t(ye,{title:"timesheet",onDelete:o,onClose:r[7]||(r[7]=d=>M("delete"))})]),_:1},8,["modelValue"]),t(X,{modelValue:e(_).void,"onUpdate:modelValue":r[10]||(r[10]=d=>e(_).void=d),"max-width":"400",persistent:""},{default:a(()=>[t(Ke,{timesheet_id:f.id,require:e(n).editableColumns.tutormentor_role,onClose:r[9]||(r[9]=d=>M("void"))},null,8,["timesheet_id","require"])]),_:1},8,["modelValue"])]),_:1})}}},It={class:"h-auto position-relative"},zt={key:0,class:"overlay"},Ft=l("div",{class:"bg-secondary",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9998",width:"100%",opacity:"0.6"}},null,-1),Ot={class:"d-flex align-center justify-center",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9999",width:"100%",opacity:"1"}},Ht={class:"text-center"},Gt=l("h2",{class:"text-white mt-3"},"This Timesheet Has Changed Owner",-1),pl={__name:"timesheet-detail",props:{id:Number,name:String},setup(N){const T=N,f=T.id,V=g(!1),s=g(!1);ge("reloadData",V),ge("updateReload",n=>{V.value=n});const y=n=>{s.value=n};return(n,_)=>(v(),E("div",It,[e(s)=="true"?(v(),E("div",zt,[Ft,l("div",Ot,[l("div",Ht,[t(w,{color:"white",icon:"ri-lock-line",size:"50"}),Gt,t(A,{color:"light",class:"mt-4",onClick:_[0]||(_[0]=D=>e(le).push({path:"/admin/timesheet"+T.name}))},{default:a(()=>[$(" Back to List ")]),_:1})])])])):re("",!0),t(Rt,{id:e(f),name:T.name,onVoid:y},null,8,["id","name"]),t(Xe,{id:e(f)},null,8,["id"])]))}};export{pl as default};
