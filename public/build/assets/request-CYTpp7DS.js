import{r as i,o as v,f as S,w as t,b as e,am as M,u as s,Y as U,V as h,j as w,m as L,A as R,s as Y,U as X,e as z,z as q,W as H,c as x,F as J,X as K,a as r,t as D}from"./main-C8WiqRU8.js";import{r as j}from"./rules-B5G8qOzK.js";import{a as b,V as T}from"./VRow-DdExusxP.js";import{V as P,a as A,c as G,b as Q}from"./VCard-CiFbZiJS.js";import{V as O}from"./VForm-25jKfNgV.js";import{V as W}from"./VTextarea-DpKiBiSD.js";import{V as B,a as F}from"./VAutocomplete-BwW_JNj2.js";import{V as I}from"./VDialog-JiC4SV8y.js";import{V as Z,a as ee}from"./VTable-DGs5hcIg.js";import{V as te}from"./VPagination-DHRsYJJp.js";import{V as E}from"./VTooltip-9k1TT1qK.js";import"./VAvatar-C_Zakhli.js";import"./VImg-Da29xOZr.js";import"./VList-Dfqo-3Dd.js";import"./ssrBoot-D_pD-el8.js";import"./VDivider-B_RUnAd7.js";import"./VCheckboxBtn-Bu-_06hz.js";import"./VSelectionControl-DRa46mJU.js";import"./VSlideGroup-EUR8_-VJ.js";const le={__name:"cancel-request",props:{data:Object},emits:["close","reload"],setup(N,{emit:_}){const m=_,d=N,f=i(!1),g=i(null),p=i({ref_program:d.data.id,cancellation_reason:null}),u=async()=>{const{valid:n}=await g.value.validate();if(n){f.value=!0;try{await R.patch("api/v1/request/"+d.data.id+"/update",p.value)&&(Y("success","Request has been successfully cancelled","bottom-end"),m("reload"))}catch(c){console.log(c)}finally{m("close"),f.value=!1}}};return(n,c)=>(v(),S(T,{class:"justify-center"},{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(P,{title:"Cancel Your Request",width:"500","prepend-icon":"ri-send-plane-line"},{default:t(()=>[e(A,null,{default:t(()=>[e(O,{onSubmit:M(u,["prevent"]),ref_key:"formData",ref:g,"validate-on":"input"},{default:t(()=>[e(T,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(W,{label:"Reason",modelValue:s(p).cancellation_reason,"onUpdate:modelValue":c[0]||(c[0]=k=>s(p).cancellation_reason=k),variant:"solo",rules:s(j).required},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(G,{class:"mt-5"},{default:t(()=>[e(U,{color:"error",type:"button",onClick:c[1]||(c[1]=k=>m("close"))},{default:t(()=>[e(h,{icon:"ri-close-line",class:"me-3"}),w(" Close ")]),_:1}),e(L),e(U,{color:"success",type:"submit"},{default:t(()=>[w(" Save "),e(h,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}},ae={__name:"new-request",emits:["close","reload"],setup(N,{emit:_}){const m=_,d=i(!1),f=i(null),g=i([]),p=i([]),u=i([]);X.getUser();const n=i({clientprog_id:null,invoice_id:null,student_uuid:null,student_name:null,student_school:null,student_grade:null,program_name:null,engagement_type:null,notes:null}),c=async()=>{try{const l=await R.get("api/v1/mentees");l&&(p.value=l)}catch(l){console.log(l)}},k=async()=>{try{const l=await R.get("api/v1/engagement-type/component/list");l&&(g.value=l)}catch(l){console.log(l)}},$=()=>{n.value.clientprog_id=u.value.clientprog_id,n.value.invoice_id=u.value.invoice_id,n.value.student_uuid=u.value.client.uuid,n.value.student_name=u.value.client.first_name+" "+u.value.client.last_name,n.value.student_grade=u.value.client.grade,n.value.student_school=u.value.client.school_name,n.value.program_name=u.value.program_name},V=async()=>{const{valid:l}=await f.value.validate();if(l){d.value=!0;try{await R.post("api/v1/request/create",n.value)&&(Y("success","Request has been successfully created","bottom-end"),m("reload"))}catch(a){console.log(a)}finally{m("close"),d.value=!1}}};return z(()=>{c(),k()}),(l,a)=>(v(),S(T,{class:"justify-center"},{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(P,{title:"New Request","max-width":"500","prepend-icon":"ri-send-plane-line"},{default:t(()=>[e(A,null,{default:t(()=>[e(O,{onSubmit:M(V,["prevent"]),ref_key:"formData",ref:f,"validate-on":"input"},{default:t(()=>[e(T,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(B,{variant:"solo",clearable:"",modelValue:s(u),"onUpdate:modelValue":[a[0]||(a[0]=o=>q(u)?u.value=o:null),$],label:"Mentee Name",items:s(p),"item-props":o=>{var y,C;return{title:((y=o.client)==null?void 0:y.first_name)+" "+((C=o.client)==null?void 0:C.last_name),subtitle:o.client.school_name}},rules:s(j).required,loading:s(d),disabled:s(d)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(B,{variant:"solo",clearable:"",modelValue:s(n).engagement_type,"onUpdate:modelValue":a[1]||(a[1]=o=>s(n).engagement_type=o),items:s(g),"item-props":o=>({title:o.name}),"item-value":"id",label:"Engagement Type",rules:s(j).required,loading:s(d),disabled:s(d)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(W,{label:"Notes",modelValue:s(n).notes,"onUpdate:modelValue":a[2]||(a[2]=o=>s(n).notes=o),variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1}),e(G,{class:"mt-5"},{default:t(()=>[e(U,{color:"error",type:"button",onClick:a[3]||(a[3]=o=>m("close"))},{default:t(()=>[e(h,{icon:"ri-close-line",class:"me-3"}),w(" Close ")]),_:1}),e(L),e(U,{color:"success",type:"submit"},{default:t(()=>[w(" Save "),e(h,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}},se=r("div",{class:"d-flex justify-between align-center"},[r("div",{class:"w-100"},[r("h4",null,"Program List")])],-1),oe=r("thead",null,[r("tr",null,[r("th",{class:"text-uppercase",width:"1%"}," # "),r("th",{class:"text-uppercase text-center"},"Student"),r("th",{class:"text-uppercase text-center"},"School Name"),r("th",{class:"text-uppercase text-center"},"Engagement Type"),r("th",{class:"text-uppercase text-center"},"#")])],-1),ne={key:0},re={key:0},ue={key:1},ie={key:1},de=r("tr",null,[r("td",{colspan:"6",class:"text-center"}," Sorry, no data found. ")],-1),ce=[de],me={class:"d-flex justify-center mt-5"},$e={__name:"request",setup(N){const _=i(!1),m=i(!1),d=i(!1),f=i(1),g=i(),p=i(),u=i([]),n=i([]),c=async()=>{_.value=!0;try{const V="api/v1/request",l="?page="+f.value,a=p.value?"&keyword="+p.value:"",o=await R.get(V+l+a);o&&(u.value=o,g.value=o.last_page)}catch(V){console.log(V)}finally{_.value=!1}},k=async()=>{f.value=1,await c()},$=V=>{n.value=V,d.value=!0};return z(()=>{c()}),(V,l)=>(v(),S(P,null,{default:t(()=>[e(Q,null,{default:t(()=>[se]),_:1}),e(A,null,{default:t(()=>[e(T,{class:"my-1 justify-space-between"},{default:t(()=>[e(b,{md:"3",cols:"12"},{default:t(()=>[e(H,{label:"Search",density:"compact",modelValue:s(p),"onUpdate:modelValue":l[0]||(l[0]=a=>q(p)?p.value=a:null),variant:"solo","single-line":"",loading:s(_),disabled:s(_),onChange:k},null,8,["modelValue","loading","disabled"])]),_:1}),e(b,{md:"2",cols:"12"},{default:t(()=>[e(U,{density:"compact",color:"info",block:"",border:"",onClick:l[1]||(l[1]=a=>m.value=!0)},{default:t(()=>[w(" New Request "),e(h,{icon:"ri-add-line",class:"ms-3"})]),_:1})]),_:1})]),_:1}),e(I,{modelValue:s(m),"onUpdate:modelValue":l[3]||(l[3]=a=>q(m)?m.value=a:null),width:"auto",persistent:""},{default:t(()=>[e(ae,{onClose:l[2]||(l[2]=a=>m.value=!1),onReload:c})]),_:1},8,["modelValue"]),e(I,{modelValue:s(d),"onUpdate:modelValue":l[5]||(l[5]=a=>q(d)?d.value=a:null),width:"auto",persistent:""},{default:t(()=>[e(le,{data:s(n),onClose:l[4]||(l[4]=a=>d.value=!1),onReload:c},null,8,["data"])]),_:1},8,["modelValue"]),s(_)?(v(),S(Z,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(v(),S(ee,{key:1,class:"table-responsive"},{default:t(()=>{var a,o;return[oe,((o=(a=s(u))==null?void 0:a.data)==null?void 0:o.length)>0?(v(),x("tbody",ne,[(v(!0),x(J,null,K(s(u).data,(y,C)=>(v(),x("tr",{key:C},[r("th",null,D(parseInt(C)+1),1),r("th",null,D(y.student_name),1),r("th",null,D(y.student_school),1),r("th",null,D(y.engagement_type),1),r("th",null,[y.timesheet_id?(v(),x("div",ue,[e(E,{activator:"parent",location:"start"},{default:t(()=>[w("Already Generated Timesheet")]),_:1}),e(F,{color:"success"},{default:t(()=>[e(h,{icon:"ri-check-line",color:"success"})]),_:1})])):(v(),x("div",re,[e(E,{activator:"parent",location:"start"},{default:t(()=>[w("Cancel Request")]),_:1}),e(F,{class:"cursor-pointer",onClick:M(pe=>$(y),["prevent"])},{default:t(()=>[e(h,{icon:"ri-close-line",color:"error"})]),_:2},1032,["onClick"])]))])]))),128))])):(v(),x("tfoot",ie,ce))]}),_:1})),r("div",me,[e(te,{modelValue:s(f),"onUpdate:modelValue":l[6]||(l[6]=a=>q(f)?f.value=a:null),length:s(g),"total-visible":4,color:"primary",density:"compact","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1}))}};export{$e as default};
