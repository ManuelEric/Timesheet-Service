import{r as m,U as b,o as E,p as k,w as o,a4 as $,A as B,s as G,y as j,e as i,b as a,h as l,H as T,V as J,f as e,t as n,a as v,a0 as A,F as D,q as K,n as H,l as d,i as p,k as O}from"./main-BxyEjo_3.js";import{V as Q,b as W,c as X}from"./VCard-BxxGTzqL.js";import{V as I,a as U}from"./VRow-DrIfgvHL.js";import{V as Y}from"./VAutocomplete-to_BqNOi.js";import{V as Z,a as ee}from"./VTable-BD1bYTgV.js";import{V as te}from"./VPagination-BXVUgEgu.js";import{V as ae}from"./VBadge-G29gtRmg.js";import{V as R}from"./VTooltip-BN6xFtKn.js";import"./VAvatar-zr2EPRwe.js";import"./VImg-Dtknfmpa.js";import"./VList-DR8duT19.js";import"./ssrBoot-DIUjsrmo.js";import"./VDivider-ImzWd1QG.js";import"./VCheckboxBtn-AdwqFbnQ.js";import"./VSelectionControl-HSdEKW3Y.js";import"./VSlideGroup-DQlE1GYx.js";const se=e("div",{class:"d-flex justify-between align-center"},[e("div",{class:"w-100"},[e("h4",null,"Timesheet List")])],-1),oe=e("th",{class:"text-uppercase",width:"1%"}," No ",-1),le=e("th",{class:"text-uppercase text-center"},"Student Name",-1),re=e("th",{class:"text-uppercase text-center"},"Program Name",-1),ne=e("th",{class:"text-uppercase text-center"},"Package",-1),ce={class:"text-uppercase text-center"},ie=e("th",{class:"text-uppercase text-center"},"PIC",-1),ue=e("th",{class:"text-uppercase text-center"},"Total Hours",-1),de=e("th",{class:"text-uppercase text-center"},"Used",-1),pe=e("th",{class:"text-uppercase text-center"},"#",-1),_e=["onClick"],me={class:"text-start"},ge={class:"text-left"},he={class:"text-left"},fe={class:"text-left"},Ve={class:"text-left"},xe={key:0},ke=e("tr",null,[e("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),ve=[ke],ye={class:"d-flex justify-center mt-5"},Fe={__name:"timesheet",setup(be){const q=$(),g=m(1),L=m(b.getUser().role_detail[0].role.toLowerCase()),P=m(),f=m(),w=m([]),_=m(!1),N=m([]),V=m(),y=async()=>{var x,t;const h="?page="+g.value,r=f.value?"&keyword="+f.value:"",u=V.value?"&package_id="+V.value:"",C="&paginate=true",s=L.value=="tutor"?"":"&is_subject_specialist=true";try{_.value=!0;const c=await B.get("api/v1/timesheet/list"+h+r+u+s+C);c&&(g.value=c.current_page,P.value=c.last_page,w.value=c),_.value=!1}catch(c){G("error",(t=(x=c.response)==null?void 0:x.data)==null?void 0:t.message,"bottom-end"),console.error(c),_.value=!1}},F=async()=>{const h=b.getUser().role_detail[0].role.toLowerCase()=="external mentor"?"mentor":b.getUser().role_detail[0].role.toLowerCase(),r=b.getUser().role_detail.length==1?"?category="+h:"";try{const u=await B.get("api/v1/package/component/list"+r);u&&(N.value=u)}catch(u){console.error(u)}},M=async()=>{g.value=1,await y()},z=(h,r)=>{q.push("/user/timesheet/"+h+"/"+r.toLowerCase())};return E(()=>{y(),F()}),(h,r)=>{const u=j("VText"),C=j("router-link");return i(),k(Q,null,{default:o(()=>[a(W,null,{default:o(()=>[se]),_:1}),a(X,null,{default:o(()=>[a(I,{class:"my-1 justify-space-between"},{default:o(()=>[a(U,{cols:"12",md:"6"},{default:o(()=>[a(I,null,{default:o(()=>[a(U,{cols:"12",md:"6"},{default:o(()=>[a(Y,{clearable:"true",modelValue:l(V),"onUpdate:modelValue":[r[0]||(r[0]=s=>T(V)?V.value=s:null),y],label:"Package",items:l(N),"item-props":s=>({title:s.package!=null?s.type_of+" - "+s.package:s.type_of}),"item-value":"id",placeholder:"Select Package",loading:l(_),disabled:l(_)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(U,{cols:"12",md:"3"},{default:o(()=>[a(J,{loading:l(_),disabled:l(_),"append-inner-icon":"ri-search-line",label:"Search","hide-details":"","single-line":"",modelValue:l(f),"onUpdate:modelValue":r[1]||(r[1]=s=>T(f)?f.value=s:null),onChange:M},null,8,["loading","disabled","modelValue"])]),_:1})]),_:1}),l(_)?(i(),k(Z,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(i(),k(ee,{key:1,class:"text-no-wrap",hover:""},{default:o(()=>{var s,x;return[e("thead",null,[e("tr",null,[oe,le,re,ne,e("th",ce,n(l(L)=="tutor"?"Tutor":"Mentor"),1),ie,ue,de,pe])]),e("tbody",null,[(i(!0),v(D,null,A(l(w).data,(t,c)=>(i(),v("tr",{key:c,class:H([t.void=="true"?"bg-secondary":"","cursor-pointer"]),onClick:S=>z(t.id,t.require)},[e("td",null,n(parseInt(c)+1),1),e("td",{class:H(t.group?"cursor-pointer text-left":"text-left")},[t.group?(i(),k(u,{key:0},{default:o(()=>[a(d,{icon:"ri-group-line",class:"me-3"}),p(" "+n(t.clients[0])+" ",1),a(ae,{color:"error",content:t.clients.length-1+"+",inline:""},null,8,["content"]),a(R,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:o(()=>[(i(!0),v(D,null,A(t.clients,S=>(i(),v("div",null,n(S),1))),256))]),_:2},1024)]),_:2},1024)):(i(),k(u,{key:1},{default:o(()=>[a(d,{icon:"ri-user-line",class:"me-3"}),p(" "+n(t.clients),1)]),_:2},1024))],2),e("td",null,[a(d,{icon:"ri-bookmark-3-line",class:"me-3"}),p(" "+n(t.free_trial?"[TRIAL]":"")+" "+n(t.program_name),1)]),e("td",me,[a(d,{icon:"ri-bookmark-line",class:"me-3"}),p(" "+n(t.detail_package?t.package_type+" - "+t.detail_package:t.package_type),1)]),e("td",ge,[a(d,{icon:"ri-user-line",class:"mr-2"}),p(" "+n(t.tutor_mentor),1)]),e("td",he,[a(d,{icon:"ri-user-line",class:"cursor-pointer me-3"}),p(" "+n(t.admin),1)]),e("td",fe,[a(d,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),p(" "+n(t.duration/60)+" Hours ",1)]),e("td",Ve,[a(d,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),p(" "+n(t.spent/60)+" Hours ",1)]),e("td",null,[a(C,{to:"/user/timesheet/"+t.id+"/"+t.require.toLowerCase()},{default:o(()=>[a(O,{color:t.void=="true"?"light":"secondary"},{default:o(()=>[a(d,{icon:"ri-timeline-view",class:"cursor-pointer"}),a(R,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:o(()=>[p(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],10,_e))),128))]),((x=(s=l(w))==null?void 0:s.data)==null?void 0:x.length)==0?(i(),v("tfoot",xe,ve)):K("",!0)]}),_:1})),e("div",ye,[a(te,{modelValue:l(g),"onUpdate:modelValue":[r[2]||(r[2]=s=>T(g)?g.value=s:null),y],length:l(P),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{Fe as default};
