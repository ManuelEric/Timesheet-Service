import{r as u,an as q,e as G,f as V,w as l,A as I,s as J,l as A,o as n,b as e,u as s,z as P,h as D,W as K,a as t,t as r,c as g,X as L,F as R,n as F,V as p,j as m,Y as O}from"./main-BW436c6G.js";import{d as Q}from"./debounce-fIuHaQmN.js";import{V as Z,b as $,a as ee}from"./VCard-DmhxJgK2.js";import{V as H,a as C}from"./VRow-SUCXIo0y.js";import{V as z}from"./VAutocomplete-C0quHuXP.js";import{V as te,a as ae}from"./VTable-Dlwmcggv.js";import{V as oe}from"./VPagination-Bbfo4G1u.js";import{V as se}from"./VBadge-PAV5wqVX.js";import{V as E}from"./VTooltip-D_xo4wNt.js";import"./VAvatar-DNY9pCcK.js";import"./VImg-i0DtubCx.js";import"./VList-BTCg86iW.js";import"./ssrBoot-dq0x0jhK.js";import"./VDivider-BThKl76e.js";import"./VCheckboxBtn-CHObhekr.js";import"./VSelectionControl-Dvnq84OQ.js";import"./VSlideGroup-DqpIEY5r.js";const le=t("div",{class:"d-flex justify-between align-center"},[t("div",{class:"w-100"},[t("h4",null,"Timesheet List")])],-1),ne=t("th",{class:"text-uppercase",width:"1%"}," No ",-1),re=t("th",{class:"text-uppercase text-center"},"School/Student Name",-1),ce={class:"text-uppercase text-center"},ie=t("th",{class:"text-uppercase text-center"},"Package",-1),de=t("th",{class:"text-uppercase text-center"},"Tutor/Mentor",-1),ue=t("th",{class:"text-uppercase text-center"},"PIC",-1),pe=t("th",{class:"text-uppercase text-center"},"Total Hours",-1),me=t("th",{class:"text-uppercase text-center"},"Used",-1),_e=t("th",{class:"text-uppercase text-center"},"#",-1),ge={key:0},fe={key:1},he={class:"text-start"},Ve={class:"text-left"},ke={class:"text-left"},ve={class:"text-left"},ye={class:"text-left"},xe={key:0},be=t("tr",null,[t("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),we=[be],Te={class:"d-flex justify-center mt-5"},We={__name:"timesheet",props:{name:String},setup(M){const k=M;u([]);const f=u(1),j=u(),v=u(),N=u([]),i=u(!1),B=u([]),y=u(),U=u([]),x=u(),h=async()=>{var a,b;const c="?page="+f.value,d=v.value?"&keyword="+v.value:"",w=y.value?"&program_name="+encodeURIComponent(y.value):"",S=x.value?"&package_id="+x.value:"",o="&paginate=true",T=k.name!="tutoring"?"&is_subject_specialist=true":"";try{i.value=!0;const _=await I.get("api/v1/timesheet/list"+c+d+w+S+o+T);_&&(f.value=_.current_page,j.value=_.last_page,N.value=_),i.value=!1}catch(_){J("error",(b=(a=_.response)==null?void 0:a.data)==null?void 0:b.message,"bottom-end"),console.error(_),i.value=!1}},W=async()=>{try{const c=await I.get("api/v1/program/component/list");c&&(B.value=c)}catch(c){console.error(c)}},X=async()=>{try{const c=await I.get("api/v1/package/component/list");c&&(U.value=c)}catch(c){console.error(c)}},Y=Q(async()=>{f.value=1,await h()},1e3);return q(()=>{h()}),G(()=>{h(),W(),X()}),(c,d)=>{const w=A("VText"),S=A("router-link");return n(),V(Z,null,{default:l(()=>[e($,null,{default:l(()=>[le]),_:1}),e(ee,null,{default:l(()=>[e(H,{class:"my-1 justify-space-between"},{default:l(()=>[k.name=="tutoring"?(n(),V(C,{key:0,cols:"12",md:"6"},{default:l(()=>[e(H,null,{default:l(()=>[e(C,{cols:"12",md:"6"},{default:l(()=>[e(z,{clearable:"",modelValue:s(y),"onUpdate:modelValue":[d[0]||(d[0]=o=>P(y)?y.value=o:null),h],label:"Program Name",items:s(B),"item-title":"program_name",placeholder:"Select Program Name",variant:"solo",loading:s(i),disabled:s(i)},null,8,["modelValue","items","loading","disabled"])]),_:1}),e(C,{cols:"12",md:"6"},{default:l(()=>[e(z,{clearable:"true",modelValue:s(x),"onUpdate:modelValue":[d[1]||(d[1]=o=>P(x)?x.value=o:null),h],label:"Package",items:s(U),"item-props":o=>({title:o.package!=null?o.type_of+" - "+o.package:o.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:s(i),disabled:s(i)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1})):D("",!0),e(C,{cols:"12",md:"3"},{default:l(()=>[e(K,{loading:s(i),disabled:s(i),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:s(v),"onUpdate:modelValue":d[2]||(d[2]=o=>P(v)?v.value=o:null),onInput:s(Y)},null,8,["loading","disabled","modelValue","onInput"])]),_:1})]),_:1}),s(i)?(n(),V(te,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(n(),V(ae,{key:1,class:"text-no-wrap"},{default:l(()=>{var o,T;return[t("thead",null,[t("tr",null,[ne,re,t("th",ce,r(k.name=="tutoring"?"Program Name":"Engagement Type"),1),ie,de,ue,pe,me,_e])]),t("tbody",null,[(n(!0),g(R,null,L(s(N).data,(a,b)=>(n(),g("tr",{key:b,class:F(a.void=="true"?"bg-secondary":"")},[t("td",null,r(parseInt(b)+1),1),t("td",{class:F(a.group?"cursor-pointer text-left":"text-left")},[a.group?(n(),V(w,{key:0},{default:l(()=>[e(p,{icon:"ri-group-line",class:"me-3"}),m(" "+r(a.clients[0])+" ",1),e(se,{color:"error",content:a.clients.length-1+"+",inline:""},null,8,["content"]),e(E,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:l(()=>[(n(!0),g(R,null,L(a.clients,_=>(n(),g("div",null,r(_),1))),256))]),_:2},1024)]),_:2},1024)):(n(),V(w,{key:1},{default:l(()=>[e(p,{icon:"ri-user-line",class:"me-3"}),m(" "+r(a.clients),1)]),_:2},1024))],2),k.name=="tutoring"?(n(),g("td",ge,[e(p,{icon:"ri-bookmark-3-line",class:"me-3"}),m(" "+r(a.detail_package=="Trial"?"[TRIAL]":"")+" "+r(a.program_name),1)])):(n(),g("td",fe,[e(p,{icon:"ri-bookmark-3-line",class:"me-3"}),m(" "+r(a.engagement_type),1)])),t("td",he,[e(p,{icon:"ri-bookmark-line",class:"me-3"}),m(" "+r(a.detail_package?a.package_type+" - "+a.detail_package:a.package_type),1)]),t("td",Ve,[e(p,{icon:"ri-user-line",class:"me-3"}),m(" "+r(a.tutor_mentor),1)]),t("td",ke,[e(p,{icon:"ri-user-line",class:"cursor-pointer me-3"}),m(" "+r(a.admin),1)]),t("td",ve,[e(p,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),m(" "+r(a.duration/60)+" Hours ",1)]),t("td",ye,[e(p,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),m(" "+r(a.spent/60)+" Hours ",1)]),t("td",null,[e(S,{to:"/admin/timesheet/"+k.name+"/"+a.id},{default:l(()=>[e(O,{color:a.void=="true"?"light":"secondary"},{default:l(()=>[e(p,{icon:"ri-timeline-view",class:"cursor-pointer"}),e(E,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:l(()=>[m(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],2))),128))]),((T=(o=s(N))==null?void 0:o.data)==null?void 0:T.length)==0?(n(),g("tfoot",xe,we)):D("",!0)]}),_:1})),t("div",Te,[e(oe,{modelValue:s(f),"onUpdate:modelValue":[d[3]||(d[3]=o=>P(f)?f.value=o:null),h],length:s(j),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{We as default};
