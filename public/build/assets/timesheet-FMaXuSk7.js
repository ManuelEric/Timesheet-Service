import{r as p,e as M,f as h,w as l,A as N,s as q,U,l as B,o as c,b as a,u as r,z as C,W as E,a as t,c as v,X as L,F as A,h as W,n as j,t as n,V as d,j as i,Y as X}from"./main-DV4WMWdJ.js";import{V as Y,a as G}from"./VBadge-BjFpR0hu.js";import{a as J,b as K,c as O,d as Q}from"./avatar-5-DCc5XOFQ.js";import{V as Z,b as $,a as ee}from"./VCard-T6Nf0MsR.js";import{V as D,a as T}from"./VRow-B0y8aIlI.js";import{V as te}from"./VAutocomplete-CJjCMpH3.js";import{V as ae,a as se}from"./VTable-fUVhvM40.js";import{V as le}from"./VPagination-EWzBsYxX.js";import{V as I}from"./VTooltip-D_cSrZZA.js";import{V as oe}from"./VAvatar-CxdFL0bp.js";import"./VImg-BTe1y1ho.js";import"./VList-CYp0WTX7.js";import"./ssrBoot-BrlaXp1u.js";import"./VDivider-BLJ1R-A1.js";import"./VCheckboxBtn-BWOcWpBv.js";import"./VSelectionControl-VSCYL-IM.js";import"./VSlideGroup-DFw-uDPd.js";const re=t("div",{class:"d-flex justify-between align-center"},[t("div",{class:"w-100"},[t("h4",null,"Timesheet List")])],-1),ne=t("thead",null,[t("tr",null,[t("th",{class:"text-uppercase",width:"1%"}," No "),t("th",{class:"text-uppercase text-center"},"School/Student Name"),t("th",{class:"text-uppercase text-center"},"Program Name"),t("th",{class:"text-uppercase text-center"},"Package"),t("th",{class:"text-uppercase text-center"},"Tutor/Mentor"),t("th",{class:"text-uppercase text-center"},"PIC"),t("th",{class:"text-uppercase text-center"},"Total Hours"),t("th",{class:"text-uppercase text-center"},"Used"),t("th",{class:"text-uppercase text-center"},"#")])],-1),ce={class:"text-start"},ie={class:"text-left"},ue={class:"text-left"},de={class:"text-left"},pe={class:"text-left"},me={key:0},_e=t("tr",null,[t("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),ge=[_e],fe={class:"d-flex justify-center mt-5"},De={__name:"timesheet",setup(he){const z=[G,J,K,O,Q],m=p(1),P=p(),_=p(),y=p([]),u=p(!1),S=p([]),g=p(),V=async()=>{var s,f;const x="?page="+m.value,o=_.value?"&keyword="+_.value:"",k=g.value?"&package_id="+g.value:"",b="&paginate=true";try{u.value=!0;const e=await N.get("api/v1/timesheet/list"+x+o+k+b);e&&(m.value=e.current_page,P.value=e.last_page,y.value=e),u.value=!1}catch(e){q("error",(f=(s=e.response)==null?void 0:s.data)==null?void 0:f.message,"bottom-end"),console.error(e),u.value=!1}},F=async()=>{const x=U.getUser().role_detail.length==1?"?category="+U.getUser().role_detail[0].role.toLowerCase():"";try{const o=await N.get("api/v1/package/component/list"+x);o&&(S.value=o)}catch(o){console.error(o)}},H=async()=>{m.value=1,await V()};return M(()=>{V(),F()}),(x,o)=>{const k=B("VText"),b=B("router-link");return c(),h(Z,null,{default:l(()=>[a($,null,{default:l(()=>[re]),_:1}),a(ee,null,{default:l(()=>[a(D,{class:"my-1 justify-space-between"},{default:l(()=>[a(T,{cols:"12",md:"6"},{default:l(()=>[a(D,null,{default:l(()=>[a(T,{cols:"12",md:"6"},{default:l(()=>[a(te,{clearable:"true",modelValue:r(g),"onUpdate:modelValue":[o[0]||(o[0]=s=>C(g)?g.value=s:null),V],label:"Package",items:r(S),"item-props":s=>({title:s.package!=null?s.type_of+" - "+s.package:s.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:r(u),disabled:r(u)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(T,{cols:"12",md:"3"},{default:l(()=>[a(E,{loading:r(u),disabled:r(u),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:r(_),"onUpdate:modelValue":o[1]||(o[1]=s=>C(_)?_.value=s:null),onChange:H},null,8,["loading","disabled","modelValue"])]),_:1})]),_:1}),r(u)?(c(),h(ae,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(c(),h(se,{key:1,class:"text-no-wrap"},{default:l(()=>{var s,f;return[ne,t("tbody",null,[(c(!0),v(A,null,L(r(y).data,(e,w)=>(c(),v("tr",{key:w,class:j(e.void=="true"?"bg-secondary":"")},[t("td",null,n(parseInt(w)+1),1),t("td",{class:j(e.group?"cursor-pointer text-left":"text-left")},[e.group?(c(),h(k,{key:0},{default:l(()=>[a(d,{icon:"ri-group-line",class:"me-3"}),i(" "+n(e.clients[0])+" ",1),a(Y,{color:"error",content:e.clients.length-1+"+",inline:""},null,8,["content"]),a(I,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:l(()=>[(c(!0),v(A,null,L(e.clients,R=>(c(),v("div",null,n(R),1))),256))]),_:2},1024)]),_:2},1024)):(c(),h(k,{key:1},{default:l(()=>[a(d,{icon:"ri-user-line",class:"me-3"}),i(" "+n(e.clients),1)]),_:2},1024))],2),t("td",null,[a(d,{icon:"ri-bookmark-3-line",class:"me-3"}),i(" "+n(e.free_trial?"[TRIAL]":"")+" "+n(e.program_name),1)]),t("td",ce,[a(d,{icon:"ri-bookmark-line",class:"me-3"}),i(" "+n(e.detail_package?e.package_type+" - "+e.detail_package:e.package_type),1)]),t("td",ie,[a(oe,{size:"25",class:"avatar-center me-3",image:z[w%5]},null,8,["image"]),i(" "+n(e.tutor_mentor),1)]),t("td",ue,[a(d,{icon:"ri-user-line",class:"cursor-pointer me-3"}),i(" "+n(e.admin),1)]),t("td",de,[a(d,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),i(" "+n(e.duration/60)+" Hours ",1)]),t("td",pe,[a(d,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),i(" "+n(e.spent/60)+" Hours ",1)]),t("td",null,[a(b,{to:"/user/timesheet/"+e.id+"/"+e.require.toLowerCase()},{default:l(()=>[a(X,{color:e.void=="true"?"light":"secondary"},{default:l(()=>[a(d,{icon:"ri-timeline-view",class:"cursor-pointer"}),a(I,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:l(()=>[i(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],2))),128))]),((f=(s=r(y))==null?void 0:s.data)==null?void 0:f.length)==0?(c(),v("tfoot",me,ge)):W("",!0)]}),_:1})),t("div",fe,[a(le,{modelValue:r(m),"onUpdate:modelValue":[o[2]||(o[2]=s=>C(m)?m.value=s:null),V],length:r(P),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{De as default};
