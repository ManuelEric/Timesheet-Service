import{r as i,e as ie,o as V,f as G,w as o,b as t,u as e,c as $,a as m,t as j,F as te,X as se,h as oe,Z as pe,z,V as S,W as Y,j as C,Y as le,m as _e,A as U,s as Q,$ as be,a1 as ye,l as Ve,n as ue}from"./main-DqauxyHN.js";import{r as h}from"./rules-CkvmYWH-.js";import{a as de,c as ge,V as ce,b as ke}from"./VCard-MjPDBD3x.js";import{V as ve}from"./VForm-Bq272WOg.js";import{V as ne,a as _}from"./VRow-DUTGde6O.js";import{V as N}from"./VAutocomplete-B96Fouut.js";import{V as he}from"./VAlert-Ci-QDowl.js";import{V as ae}from"./VTooltip-CcwVhVpq.js";import{V as fe}from"./VTextarea-BY1UFUZ4.js";import{d as xe}from"./debounce-BWdamgSW.js";import{V as we}from"./VDialog-BaYg0raZ.js";import{a as je,V as Ce}from"./VTable-BzkA4luM.js";import{V as Ue}from"./VPagination-DW9AUZIy.js";import{V as Te}from"./VBadge-C5U9S7Pk.js";import"./VAvatar-DiuKrZsf.js";import"./VImg-BNFkvpJ6.js";import"./VList-DpfpAaJi.js";import"./ssrBoot-Bo8Nc6Hg.js";import"./VDivider-2uABg6id.js";import"./VCheckboxBtn-BN3-VYWr.js";import"./VSelectionControl-CY56I1b2.js";import"./VSlideGroup-Bn7UiDXm.js";const Pe={key:0,class:"mb-4 d-flex gap-1"},qe={class:"text-sm"},me="mentor",Se={__name:"program_add_specialist_timesheet",emits:["close","reload"],setup(re,{emit:F}){const L=F,u=i(!1),g=i([]),Z=i([]),O=i([]);i([]);const R=i([]),T=i([]),H=i([]),I=i(!1),B=i(null),P=i(null),x=i([]),ee=i([]),E=i(),r=i({ref_id:[],mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",tax:null,individual_fee:null,notes:"",pic_id:[]}),K=async()=>{var d,w;const c="api/v1/program/list";try{u.value=!0;const v=await U.get(c);v&&(O.value=v),u.value=!1}catch(v){Q("error",(w=(d=v.response)==null?void 0:d.data)==null?void 0:w.message,"bottom-end"),console.error(v),u.value=!1}},a=async(c=!1)=>{const w=c?"api/v1/user/mentor-tutors?inhouse=true&role="+me:"api/v1/user/mentor-tutors?role="+"External Mentor";try{const v=await U.get(w);v&&(c?H.value=Object.values(v):Z.value=v)}catch(v){console.error(v)}},k=async()=>{try{const c=await U.get("api/v1/package/component/list?category="+me);c&&(R.value=c)}catch(c){console.error(c)}},W=()=>{const c=r.value.package_id,d=R.value.findIndex(v=>v.id===c);let w=R.value[d];w.detail?(I.value=!0,r.value.duration=w.detail):(I.value=!1,r.value.duration=null)},b=async()=>{try{const c=await U.get("api/v1/user/component/list");c&&(T.value=c)}catch(c){console.error(c)}},J=async(c,d=null,w=0)=>{var v,l,s,f;r.value.subject_id=null,B.value=w,r.value.tax=(w==1,2.5),r.value.subject_id=(l=(v=c[0])==null?void 0:v.subjects[0])==null?void 0:l.id,r.value.individual_fee=(f=(s=c[0])==null?void 0:s.subjects[0])==null?void 0:f.fee_individual,r.value.individual_fee?M():P.value=null},p=async()=>{try{const c=await U.get("api/v1/engagement-type/component/list");c&&(ee.value=c)}catch(c){console.log(c)}},X=async()=>{var d,w,v;r.value.mentortutor_email=g.value.email;const{valid:c}=await E.value.validate();if(c){u.value=!0;try{const l=await U.post("api/v1/timesheet/create",r.value);l&&(Q("success",l.message,"bottom-end"),L("reload"),r.value={ref_id:[],mentortutor_email:null,subject_id:null,subject_name:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[],tax:null,individual_fee:""},g.value=[],window.open("/admin/timesheet/specialist/"+((d=l.data)==null?void 0:d.timesheet_id),"_blank"))}catch(l){if((v=(w=l==null?void 0:l.response)==null?void 0:w.data)!=null&&v.errors){const s=l.response.data.errors;Q("error",s,"bottom-end")}}finally{L("close"),u.value=!1}}},M=()=>{const c=r.value.individual_fee*(1-r.value.tax/100);P.value=Math.trunc(c)},D=()=>{const c=P.value/(1-r.value.tax/100);r.value.individual_fee=Math.trunc(c)};return ie(()=>{K(),p(),a(),a(!0),k(),b()}),(c,d)=>(V(),G(ce,{"max-width":"650","prepend-icon":"ri-send-plane-line",title:"Assign to Subject Specialist"},{default:o(()=>[t(de,null,{default:o(()=>{var w,v;return[((w=e(x))==null?void 0:w.length)>0?(V(),$("div",Pe,[m("p",qe,j(((v=e(x))==null?void 0:v.length)>1?"Students":"Student")+":",1),(V(!0),$(te,null,se(e(x),l=>(V(),$("p",{key:l,class:"text-sm bg-info px-2 rounded"},j(l.mentee),1))),128))])):oe("",!0),t(ve,{onSubmit:pe(X,["prevent"]),ref_key:"formData",ref:E,"validate-on":"input"},{default:o(()=>[t(ne,null,{default:o(()=>[t(_,{md:"12",cols:"12"},{default:o(()=>[t(N,{clearable:"",modelValue:e(x),"onUpdate:modelValue":[d[0]||(d[0]=l=>z(x)?x.value=l:null),c.checkProgram],label:"Mentee Name",items:e(O),"item-props":l=>({title:l.student_name,subtitle:l.program_name+(l.timesheet_id?" ✅":"")+(l.scnd_timesheet_id?" ✅":""),disabled:l.timesheet_id&&l.scnd_timesheet_id,value:{id:l.id,require:l.require,mentee:l.student_name,package:l.package,curriculum:l.curriculum,program_name:l.program_name}}),rules:e(h).required,loading:e(u),disabled:e(u),density:"compact",multiple:""},null,8,["modelValue","items","item-props","rules","loading","disabled","onUpdate:modelValue"])]),_:1}),t(_,{cols:"12"},{default:o(()=>[t(N,{clearable:"",modelValue:e(r).engagement_type,"onUpdate:modelValue":d[1]||(d[1]=l=>e(r).engagement_type=l),items:e(ee),"item-props":l=>({title:l.name}),"item-value":"id",label:"Engagement Type",rules:e(h).required,loading:e(u),disabled:e(u)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),t(_,{md:"12",cols:"12"},{default:o(()=>[t(N,{density:"compact",clearable:"",modelValue:e(g),"onUpdate:modelValue":[d[2]||(d[2]=l=>z(g)?g.value=l:null),d[3]||(d[3]=l=>J(e(g).roles,e(g).uuid,e(g).has_npwp))],label:"Subject Specialist Name",items:e(Z),"item-props":l=>({title:l.full_name,subtitle:l.roles.map(s=>s.name).join(", ")}),rules:e(h).required,loading:e(u),disabled:e(u)},null,8,["modelValue","items","item-props","rules","loading","disabled"]),e(B)!=null?(V(),G(he,{key:0,color:e(B)==1?"success":"error",class:"py-2 mt-2"},{default:o(()=>[t(S,{icon:"ri-error-warning-line",class:"mr-2"}),m("small",null," Mentor "+j(e(B)==1?"already":"don`t")+" have NPWP ",1)]),_:1},8,["color"])):oe("",!0)]),_:1}),t(_,{md:"8",cols:"8"},{default:o(()=>[t(N,{density:"compact",clearable:"",label:"Package",modelValue:e(r).package_id,"onUpdate:modelValue":[d[4]||(d[4]=l=>e(r).package_id=l),W],items:e(R),"item-props":l=>({title:l.package!=null?l.type_of+" - "+l.package:l.type_of,subtitle:l.detail?l.detail/60+" Hours":"Customizable"}),"item-value":"id",rules:e(h).required,loading:e(u),disabled:e(u)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),t(_,{md:"4",cols:"4"},{default:o(()=>[t(Y,{density:"compact",type:"number",clearable:"",label:+e(r).duration/60?""+e(r).duration/60+" Hours":"Minutes",readonly:e(I),modelValue:e(r).duration,"onUpdate:modelValue":d[5]||(d[5]=l=>e(r).duration=l),rules:e(h).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),t(_,{md:"4",cols:"7"},{default:o(()=>[t(Y,{type:"number",clearable:"",label:"Fee/hours (Nett)",modelValue:e(P),"onUpdate:modelValue":[d[6]||(d[6]=l=>z(P)?P.value=l:null),D],density:"compact",rules:e(h).required},null,8,["modelValue","rules"])]),_:1}),t(_,{md:"4",cols:"5"},{default:o(()=>[t(Y,{type:"number",clearable:"",label:"Tax",modelValue:e(r).tax,"onUpdate:modelValue":[d[7]||(d[7]=l=>e(r).tax=l),D],rules:e(h).required,density:"compact"},null,8,["modelValue","rules"])]),_:1}),t(_,{md:"4",cols:"12"},{default:o(()=>[t(ae,{activator:"parent",location:"top"},{default:o(()=>[C(" Fee Gross is automatically calculated based on the entered Net Fee and Tax Rate. ")]),_:1}),t(Y,{type:"number",clearable:"",label:"Fee/hours (Gross)",modelValue:e(r).individual_fee,"onUpdate:modelValue":[d[8]||(d[8]=l=>e(r).individual_fee=l),M],density:"compact",readonly:"",rules:e(h).required},null,8,["modelValue","rules"])]),_:1}),t(_,{md:"6",cols:"12"},{default:o(()=>[t(N,{density:"compact",clearable:"",modelValue:e(r).inhouse_id,"onUpdate:modelValue":d[9]||(d[9]=l=>e(r).inhouse_id=l),label:"Inhouse Mentor",items:e(H),"item-props":l=>({title:l.full_name}),"item-value":"uuid",loading:e(u),disabled:e(u),rules:e(h).required},null,8,["modelValue","items","item-props","loading","disabled","rules"])]),_:1}),t(_,{md:"6",cols:"12"},{default:o(()=>[t(N,{density:"compact",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:e(r).pic_id,"onUpdate:modelValue":d[10]||(d[10]=l=>e(r).pic_id=l),items:e(T),"item-title":"full_name","item-value":"id",loading:e(u),disabled:e(u),rules:e(h).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1}),t(_,{md:"12"},{default:o(()=>[t(fe,{label:"Notes",modelValue:e(r).notes,"onUpdate:modelValue":d[11]||(d[11]=l=>e(r).notes=l)},null,8,["modelValue"])]),_:1})]),_:1}),t(ge,{class:"mt-5 px-0"},{default:o(()=>[t(le,{variant:"tonal",color:"error",type:"button",onClick:d[12]||(d[12]=l=>L("close"))},{default:o(()=>[t(S,{icon:"ri-close-line",class:"me-3"}),C(" Close ")]),_:1}),t(_e),t(le,{variant:"tonal",color:"success",type:"submit"},{default:o(()=>[C(" Save "),t(S,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]}),_:1})]),_:1}))}},Ne={key:0,class:"mb-4 d-flex gap-1"},$e={class:"text-sm"},Fe={__name:"program_add_tutoring",emits:["close","reload"],setup(re,{emit:F}){const L=F,u=i(!1),g=i([]),Z=i([]),O=i([]),R=i([]),T=i([]),H=i([]),I=i([]),B=i([]),P=i(!1),x=i("tutor"),ee=i(null),E=i(null),r=i([]),K=i(),a=i({ref_id:null,mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,tax:null,individual_fee:null,duration:"",notes:"",pic_id:[],curriculum_id:null}),k=async()=>{var s,f;const l="api/v1/program/list";try{u.value=!0;const y=await U.get(l);y&&(Z.value=y),u.value=!1}catch(y){Q("error",(f=(s=y.response)==null?void 0:s.data)==null?void 0:f.message,"bottom-end"),console.error(y),u.value=!1}},W=async(l=!1)=>{const s=l?"api/v1/user/mentor-tutors?inhouse=true&role="+x.value:"api/v1/user/mentor-tutors?role="+x.value;try{const f=await U.get(s);f&&(l?B.value=Object.values(f):O.value=f)}catch(f){console.error(f)}},b=async()=>{try{const l=await U.get("api/v1/package/component/list?category="+x.value);l&&(H.value=l)}catch(l){console.error(l)}},J=()=>{const l=a.value.package_id,s=H.value.findIndex(y=>y.id===l);let f=H.value[s];f.detail?(P.value=!0,a.value.duration=f.detail):(P.value=!1,a.value.duration=null)},p=async()=>{try{const l=await U.get("api/v1/user/component/list");l&&(I.value=l)}catch(l){console.error(l)}},X=async(l,s=null,f=0)=>{if(ee.value=f,a.value.tax=(f==1,2.5),a.value.subject_id=null,x.value=="mentor")a.value.subject_id=l[0].subjects[0].id;else try{const y=await U.get("api/v1/user/mentor-tutors/"+s+"/subjects");y&&(T.value=y)}catch(y){console.error(y)}},M=async(l,s,f)=>{if(s)try{const y=await U.get("api/v1/component/fee/"+l+"/"+s+"/"+f);y&&(a.value.individual_fee=y.fee_individual,y.fee_individual?w():E.value=null)}catch(y){console.error(y)}},D=async()=>{try{const l=await U.get("api/v1/curriculum/component/list");l&&(R.value=l)}catch(l){console.error(l)}},c=async()=>{var s,f,y;a.value.mentortutor_email=g.value.email;const{valid:l}=await K.value.validate();if(l){u.value=!0;try{const A=await U.post("api/v1/timesheet/create",a.value);A&&(Q("success",A.message,"bottom-end"),L("reload"),a.value={ref_id:[],mentortutor_email:null,subject_id:null,subject_name:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[],tax:null,individual_fee:"",curriculum_id:null},g.value=[],window.open("/admin/timesheet/tutoring/"+((s=A.data)==null?void 0:s.timesheet_id),"_blank"))}catch(A){if(console.log(A),(y=(f=A==null?void 0:A.response)==null?void 0:f.data)!=null&&y.errors){const n=A.response.data.errors;Q("error",n,"bottom-end")}}finally{L("close"),u.value=!1}}},d=()=>{a.value={ref_id:r.value.map(l=>l.id),curriculum_id:r.value[0].curriculum??null,package_id:r.value[0].package??null,program_name:r.value[0].program_name??null}},w=()=>{const l=a.value.individual_fee*(1-a.value.tax/100);E.value=Math.trunc(l)},v=()=>{const l=E.value/(1-a.value.tax/100);a.value.individual_fee=Math.trunc(l)};return ie(()=>{k(),W(),W(!0),b(),p(),D()}),(l,s)=>{var f;return V(),G(ce,{"max-width":"650","prepend-icon":"ri-send-plane-line",title:((f=e(r)[0])==null?void 0:f.program_name)??"Assign to Tutor"},{default:o(()=>[t(de,null,{default:o(()=>{var y,A;return[((y=e(r))==null?void 0:y.length)>0?(V(),$("div",Ne,[m("p",$e,j(((A=e(r))==null?void 0:A.length)>1?"Students":"Student")+":",1),(V(!0),$(te,null,se(e(r),n=>(V(),$("p",{key:n,class:"text-sm bg-info px-2 rounded"},j(n.mentee),1))),128))])):oe("",!0),t(ve,{onSubmit:pe(c,["prevent"]),ref_key:"formData",ref:K,"validate-on":"input"},{default:o(()=>[t(ne,null,{default:o(()=>[t(_,{md:"12",cols:"12"},{default:o(()=>[t(N,{clearable:"",modelValue:e(r),"onUpdate:modelValue":[s[0]||(s[0]=n=>z(r)?r.value=n:null),d],label:"Mentee Name",items:e(Z),"item-props":n=>({title:n.student_name,subtitle:n.program_name+(n.timesheet_id?" ✅":"")+(n.scnd_timesheet_id?" ✅":""),disabled:n.timesheet_id&&n.scnd_timesheet_id,value:{id:n.id,require:n.require,mentee:n.student_name,package:n.package,curriculum:n.curriculum,program_name:n.program_name}}),rules:e(h).required,loading:e(u),disabled:e(u),density:"compact",multiple:""},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),t(_,{md:"12",cols:"12"},{default:o(()=>[t(N,{clearable:"",modelValue:e(g),"onUpdate:modelValue":[s[1]||(s[1]=n=>z(g)?g.value=n:null),s[2]||(s[2]=n=>X(e(g).roles,e(g).uuid,e(g).has_npwp))],label:"Tutor Name",items:e(O),"item-props":n=>({title:n.full_name,subtitle:n.roles.map(q=>q.name).join(", ")}),rules:e(h).required,loading:e(u),disabled:e(u),density:"compact"},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),t(_,{md:"6",cols:"6"},{default:o(()=>{var n;return[t(N,{clearable:"",modelValue:e(a).curriculum_id,"onUpdate:modelValue":[s[3]||(s[3]=q=>e(a).curriculum_id=q),s[4]||(s[4]=q=>M(e(g).id,e(a).subject_name,e(a).curriculum_id))],label:"Curriculum",items:e(R),"item-props":q=>({title:q.name}),rules:e(h).required,loading:e(u),disabled:e(u)||((n=e(r)[0])==null?void 0:n.curriculum),density:"compact","item-value":"id"},null,8,["modelValue","items","item-props","rules","loading","disabled"])]}),_:1}),t(_,{md:"6",cols:"6"},{default:o(()=>[t(N,{clearable:"",modelValue:e(a).subject_name,"onUpdate:modelValue":[s[5]||(s[5]=n=>e(a).subject_name=n),s[6]||(s[6]=n=>M(e(g).id,e(a).subject_name,e(a).curriculum_id))],label:"Subject Tutoring",items:e(T),loading:e(u),disabled:e(u),rules:e(h).required,density:"compact"},null,8,["modelValue","items","loading","disabled","rules"])]),_:1}),t(_,{md:"8",cols:"8"},{default:o(()=>{var n;return[t(N,{clearable:"",label:"Package",modelValue:e(a).package_id,"onUpdate:modelValue":[s[7]||(s[7]=q=>e(a).package_id=q),J],items:e(H),density:"compact","item-props":q=>({title:q.package!=null?q.type_of+" - "+q.package:q.type_of,subtitle:q.detail?q.detail/60+" Hours":"Customizable"}),"item-value":"id",rules:e(h).required,loading:e(u),disabled:e(u)||((n=e(r)[0])==null?void 0:n.package)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]}),_:1}),t(_,{md:"4",cols:"4"},{default:o(()=>[t(Y,{type:"number",clearable:"",label:+e(a).duration/60?"Minutes ("+e(a).duration/60+" Hours)":"Minutes",readonly:e(P),modelValue:e(a).duration,"onUpdate:modelValue":s[8]||(s[8]=n=>e(a).duration=n),density:"compact",rules:e(h).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),t(_,{md:"4",cols:"7"},{default:o(()=>[t(Y,{type:"number",clearable:"",label:"Fee/hours (Nett)",modelValue:e(E),"onUpdate:modelValue":[s[9]||(s[9]=n=>z(E)?E.value=n:null),v],density:"compact",rules:e(h).required},null,8,["modelValue","rules"])]),_:1}),t(_,{md:"4",cols:"5"},{default:o(()=>[t(Y,{type:"number",clearable:"",label:"Tax",modelValue:e(a).tax,"onUpdate:modelValue":[s[10]||(s[10]=n=>e(a).tax=n),v],rules:e(h).required,density:"compact"},null,8,["modelValue","rules"])]),_:1}),t(_,{md:"4",cols:"12"},{default:o(()=>[t(ae,{activator:"parent",location:"top"},{default:o(()=>[C(" Fee Gross is automatically calculated based on the entered Net Fee and Tax Rate. ")]),_:1}),t(Y,{type:"number",clearable:"",label:"Fee/hours (Gross)",modelValue:e(a).individual_fee,"onUpdate:modelValue":[s[11]||(s[11]=n=>e(a).individual_fee=n),w],density:"compact",readonly:"",rules:e(h).required},null,8,["modelValue","rules"])]),_:1}),t(_,{md:"6",cols:"6"},{default:o(()=>[t(N,{clearable:"",modelValue:e(a).inhouse_id,"onUpdate:modelValue":s[12]||(s[12]=n=>e(a).inhouse_id=n),label:"Inhouse Mentor/Tutor",items:e(B),density:"compact","item-props":n=>({title:n.full_name}),"item-value":"uuid",loading:e(u),disabled:e(u),rules:e(h).required},null,8,["modelValue","items","item-props","loading","disabled","rules"])]),_:1}),t(_,{md:"6",cols:"6"},{default:o(()=>[t(N,{multiple:"",clearable:"",chips:"",label:"PIC",modelValue:e(a).pic_id,"onUpdate:modelValue":s[13]||(s[13]=n=>e(a).pic_id=n),items:e(I),"item-title":"full_name","item-value":"id",loading:e(u),density:"compact",disabled:e(u),rules:e(h).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1}),t(_,{md:"12"},{default:o(()=>[t(fe,{label:"Notes",modelValue:e(a).notes,"onUpdate:modelValue":s[14]||(s[14]=n=>e(a).notes=n),density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t(ge,{class:"mt-5 px-0"},{default:o(()=>[t(le,{variant:"tonal",color:"error",type:"button",onClick:s[15]||(s[15]=n=>L("close"))},{default:o(()=>[t(S,{icon:"ri-close-line",class:"me-3"}),C(" Close ")]),_:1}),t(_e),t(le,{variant:"tonal",color:"success",type:"submit"},{default:o(()=>[C(" Save "),t(S,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]}),_:1})]),_:1},8,["title"])}}},Ie=m("div",{class:"d-flex justify-between align-center"},[m("div",{class:"w-100"},[m("h4",null,"Timesheet List")])],-1),Me={class:"d-flex gap-2"},De=m("th",{class:"text-uppercase",width:"1%"}," No ",-1),Ae=m("th",{class:"text-uppercase text-center"},"School/Student Name",-1),Re={class:"text-uppercase text-center"},Ee=m("th",{class:"text-uppercase text-center"},"Package",-1),He=m("th",{class:"text-uppercase text-center"},"Tutor/Mentor",-1),Be=m("th",{class:"text-uppercase text-center"},"PIC",-1),Ge=m("th",{class:"text-uppercase text-center"},"Total Hours",-1),ze=m("th",{class:"text-uppercase text-center"},"Used",-1),Le=m("th",{class:"text-uppercase text-center"},"#",-1),Oe=["onClick"],We={key:0},Xe={key:1},Ye={class:"text-start"},Ze={class:"text-left"},Je={class:"text-left"},Ke={class:"text-left"},Qe={class:"text-left"},el={key:0},ll=m("tr",null,[m("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),tl=[ll],al={class:"d-flex justify-center mt-5"},Cl={__name:"timesheet",props:{name:String},setup(re){const F=re,L=ye();i([]);const u=i(!1),g=i(1),Z=i(),O=i(),R=i([]),T=i(!1),H=i([]),I=i(),B=i([]),P=i(),x=async()=>{var X,M;const a="?page="+g.value,k=O.value?"&keyword="+O.value:"",W=I.value?"&program_name="+encodeURIComponent(I.value):"",b=P.value?"&package_id="+P.value:"",J="&paginate=true",p=F.name!="tutoring"?"&is_subject_specialist=true":"";try{T.value=!0;const D=await U.get("api/v1/timesheet/list"+a+k+W+b+J+p);D&&(g.value=D.current_page,Z.value=D.last_page,R.value=D),T.value=!1}catch(D){Q("error",(M=(X=D.response)==null?void 0:X.data)==null?void 0:M.message,"bottom-end"),console.error(D),T.value=!1}},ee=async()=>{try{const a=await U.get("api/v1/program/component/list");a&&(H.value=a)}catch(a){console.error(a)}},E=async()=>{try{const a=await U.get("api/v1/package/component/list");a&&(B.value=a)}catch(a){console.error(a)}},r=xe(async a=>{g.value=1,O.value=a.target.value,await x()},1e3),K=a=>{const k=L.resolve("/admin/timesheet/"+F.name+"/"+a);window.open(k.href,"_blank")};return be(()=>{x()}),ie(()=>{x(),ee(),E()}),(a,k)=>{const W=Ve("VText");return V(),$(te,null,[t(we,{modelValue:e(u),"onUpdate:modelValue":k[2]||(k[2]=b=>z(u)?u.value=b:null),width:"auto",persistent:""},{default:o(()=>[F.name=="tutoring"?(V(),G(Fe,{key:0,onClose:k[0]||(k[0]=b=>u.value=!1),onReload:x})):(V(),G(Se,{key:1,onClose:k[1]||(k[1]=b=>u.value=!1),onReload:x}))]),_:1},8,["modelValue"]),t(ce,null,{default:o(()=>[t(ke,null,{default:o(()=>[Ie]),_:1}),t(de,null,{default:o(()=>[t(ne,{class:"my-1 justify-space-between"},{default:o(()=>[F.name=="tutoring"?(V(),G(_,{key:0,cols:"12",md:"6"},{default:o(()=>[t(ne,null,{default:o(()=>[t(_,{cols:"12",md:"6"},{default:o(()=>[t(N,{density:"compact",clearable:"",modelValue:e(I),"onUpdate:modelValue":[k[3]||(k[3]=b=>z(I)?I.value=b:null),x],label:"Program Name",items:e(H),"item-title":"program_name",placeholder:"Select Program Name",loading:e(T),disabled:e(T)},null,8,["modelValue","items","loading","disabled"])]),_:1}),t(_,{cols:"12",md:"6"},{default:o(()=>[t(N,{density:"compact",clearable:"true",modelValue:e(P),"onUpdate:modelValue":[k[4]||(k[4]=b=>z(P)?P.value=b:null),x],label:"Package",items:e(B),"item-props":b=>({title:b.package!=null?b.type_of+" - "+b.package:b.type_of}),"item-value":"id",placeholder:"Select Package",loading:e(T),disabled:e(T)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1})):oe("",!0),t(_,{cols:"12",md:F.name=="tutoring"?3:12},{default:o(()=>[m("div",Me,[t(Y,{density:"compact",loading:e(T),disabled:e(T),"append-inner-icon":"ri-search-line",label:"Search","hide-details":"","single-line":"",onInput:e(r)},null,8,["loading","disabled","onInput"]),m("div",{class:ue(["text-end",F.name=="tutoring"?"":"w-md-75"])},[t(ae,{activator:"parent",location:"start"},{default:o(()=>[C("Add New Timesheet")]),_:1}),t(le,{icon:"ri-add-line",onClick:k[5]||(k[5]=b=>u.value=!0)})],2)])]),_:1},8,["md"])]),_:1}),e(T)?(V(),G(Ce,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(V(),G(je,{key:1,class:"text-no-wrap",hover:""},{default:o(()=>{var b,J;return[m("thead",null,[m("tr",null,[De,Ae,m("th",Re,j(F.name=="tutoring"?"Program Name":"Engagement Type"),1),Ee,He,Be,Ge,ze,Le])]),m("tbody",null,[(V(!0),$(te,null,se(e(R).data,(p,X)=>(V(),$("tr",{key:X,class:ue([p.void=="true"?"bg-secondary":"","cursor-pointer"]),onClick:M=>K(p.id)},[m("td",null,j(parseInt(X)+1),1),m("td",{class:ue(p.group?"cursor-pointer text-left":"text-left")},[p.group?(V(),G(W,{key:0},{default:o(()=>[t(S,{icon:"ri-group-line",class:"me-3"}),C(" "+j(p.clients[0])+" ",1),t(Te,{color:"error",content:p.clients.length-1+"+",inline:""},null,8,["content"]),t(ae,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:o(()=>[(V(!0),$(te,null,se(p.clients,M=>(V(),$("div",null,j(M),1))),256))]),_:2},1024)]),_:2},1024)):(V(),G(W,{key:1},{default:o(()=>[t(S,{icon:"ri-user-line",class:"me-3"}),C(" "+j(p.clients),1)]),_:2},1024))],2),F.name=="tutoring"?(V(),$("td",We,[t(S,{icon:"ri-bookmark-3-line",class:"me-3"}),C(" "+j(p.detail_package=="Trial"?"[TRIAL]":"")+" "+j(p.program_name),1)])):(V(),$("td",Xe,[t(S,{icon:"ri-bookmark-3-line",class:"me-3"}),C(" "+j(p.engagement_type),1)])),m("td",Ye,[t(S,{icon:"ri-bookmark-line",class:"me-3"}),C(" "+j(p.detail_package?p.package_type+" - "+p.detail_package:p.package_type),1)]),m("td",Ze,[t(S,{icon:"ri-user-line",class:"me-3"}),C(" "+j(p.tutor_mentor),1)]),m("td",Je,[t(S,{icon:"ri-user-line",class:"cursor-pointer me-3"}),C(" "+j(p.admin),1)]),m("td",Ke,[t(S,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),C(" "+j(p.duration/60)+" Hours ",1)]),m("td",Qe,[t(S,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),C(" "+j(p.spent/60)+" Hours ",1)]),m("td",null,[t(le,{color:p.void=="true"?"light":"secondary",onClick:M=>K(p.id)},{default:o(()=>[t(S,{icon:"ri-timeline-view",class:"cursor-pointer"}),t(ae,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:o(()=>[C(" View Detail ")]),_:1})]),_:2},1032,["color","onClick"])])],10,Oe))),128))]),((J=(b=e(R))==null?void 0:b.data)==null?void 0:J.length)==0?(V(),$("tfoot",el,tl)):oe("",!0)]}),_:1})),m("div",al,[t(Ue,{modelValue:e(g),"onUpdate:modelValue":[k[6]||(k[6]=b=>z(g)?g.value=b:null),x],length:e(Z),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})],64)}}};export{Cl as default};
