import{r as c,e as pe,o as _,f as F,w as a,b as l,a as x,t as H,c as B,F as ie,X as me,u as e,Z as ge,z as le,h as Y,W as te,j as U,Y as se,V as q,m as be,A as R,s as ne,$ as xe,B as he,a0 as we,a1 as Ce,a2 as Pe,a3 as Te,a4 as je,a5 as Se,a6 as Ue,a7 as qe,a8 as Ne,a9 as $e,aa as Fe,D as Ie,E as Me,K as ce,ab as Ae,ac as De,ad as Le,ae as Be,af as Re,ag as ze,ah as Ee,ai as Ge,aj as He,ak as Oe,al as We,am as Ye,Q as fe,P as Ke,an as Qe,ao as Xe,l as Ze,x as Je,n as el}from"./main-DT3mfMhh.js";import{r as S}from"./rules-CkvmYWH-.js";import{a as ue,c as ye,V as de,b as ll}from"./VCard-B1WMrmIT.js";import{V as Ve}from"./VForm-DvMturz9.js";import{V as ve,a as V}from"./VRow-B2kT-fjx.js";import{V as X}from"./VAutocomplete-DMF1pjCM.js";import{V as oe}from"./VTooltip-D3Hkf7RW.js";import{V as ke}from"./VTextarea-q7X9F2P8.js";import{d as tl}from"./debounce-DBbemDoi.js";import{V as _e}from"./VDialog-DkS0_R4d.js";import{a as al,V as ol}from"./VTable-B3ZIPGha.js";import{V as sl}from"./VPagination-BrUHuVHi.js";import{T as nl}from"./index-DBSJ6bcB.js";import{V as rl}from"./VCheckbox-CNl5htiu.js";import"./VAvatar-s-BwFvum.js";import"./VImg-s-0HfYOy.js";import"./VList-AaW2TqoL.js";import"./ssrBoot-Dt0_NvWe.js";import"./VDivider-BtncAMmF.js";import"./VCheckboxBtn-COx4n_zN.js";import"./VSelectionControl-DVkMG7VE.js";import"./VSlideGroup-Dl8wDpyK.js";const il={class:"mb-4 d-flex gap-1"},ul={class:"text-sm"},dl={__name:"program_add",props:{selected:Object},emits:["close","reload"],setup(o,{emit:y}){var n,T,L,ae;const k=o,p=y,r=c(!1),v=c([]),Z=c([]),K=c([]),z=c([]),P=c([]),J=c([]),A=c([]),D=c(!1),h=(T=(n=k.selected[0])==null?void 0:n.require)==null?void 0:T.toLowerCase(),O=c(null),E=c(null),i=c(k.selected.map(d=>d.mentee)),w=c(),t=c({ref_id:k.selected.map(d=>d.id),mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:((L=k.selected[0])==null?void 0:L.package)??null,tax:null,individual_fee:null,duration:"",notes:"",pic_id:[],curriculum_id:((ae=k.selected[0])==null?void 0:ae.curriculum)??null}),G=async(d=!1)=>{const s=d?"api/v1/user/mentor-tutors?inhouse=true&role="+h:"api/v1/user/mentor-tutors?role="+h;try{const C=await R.get(s);C&&(d?A.value=Object.values(C):Z.value=C)}catch(C){console.error(C)}},b=async()=>{try{const d=await R.get("api/v1/package/component/list?category="+h);d&&(P.value=d)}catch(d){console.error(d)}},W=()=>{const d=t.value.package_id,s=P.value.findIndex(j=>j.id===d);let C=P.value[s];C.detail?(D.value=!0,t.value.duration=C.detail):(D.value=!1,t.value.duration=null)},u=async()=>{try{const d=await R.get("api/v1/user/component/list");d&&(J.value=d)}catch(d){console.error(d)}},Q=async(d,s=null,C=0)=>{if(O.value=C,t.value.tax=(C==1,2.5),t.value.subject_id=null,h=="mentor")t.value.subject_id=d[0].subjects[0].id;else try{const j=await R.get("api/v1/user/mentor-tutors/"+s+"/subjects");j&&(z.value=j)}catch(j){console.error(j)}},N=async(d,s,C)=>{if(s)try{const j=await R.get("api/v1/component/fee/"+d+"/"+s+"/"+C);j&&(t.value.individual_fee=j.fee_individual,j.fee_individual?g():E.value=null)}catch(j){console.error(j)}},I=async()=>{try{const d=await R.get("api/v1/curriculum/component/list");d&&(K.value=d)}catch(d){console.error(d)}},ee=async()=>{var s,C,j;t.value.mentortutor_email=v.value.email;const{valid:d}=await w.value.validate();if(d){r.value=!0;try{const $=await R.post("api/v1/timesheet/create",t.value);$&&(ne("success",$.message,"bottom-end"),p("reload"),t.value={ref_id:[],mentortutor_email:null,subject_id:null,subject_name:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[],tax:null,individual_fee:""},v.value=[],window.open("/admin/timesheet/tutoring/"+((s=$.data)==null?void 0:s.timesheet_id),"_blank"))}catch($){if(console.log($),(j=(C=$==null?void 0:$.response)==null?void 0:C.data)!=null&&j.errors){const re=$.response.data.errors;ne("error",re,"bottom-end")}}finally{p("close"),r.value=!1}}},g=()=>{const d=t.value.individual_fee*(1-t.value.tax/100);E.value=Math.trunc(d)},m=()=>{const d=E.value/(1-t.value.tax/100);t.value.individual_fee=Math.trunc(d)};return pe(()=>{G(),G(!0),b(),u(),I()}),(d,s)=>{var C;return _(),F(de,{"max-width":"650","prepend-icon":"ri-send-plane-line",title:(C=k.selected[0])==null?void 0:C.program_name},{default:a(()=>[l(ue,null,{default:a(()=>{var j;return[x("div",il,[x("p",ul,H(((j=k.selected)==null?void 0:j.length)>1?"Students":"Student")+":",1),(_(!0),B(ie,null,me(e(i),$=>(_(),B("p",{key:$,class:"text-sm bg-info px-2 rounded"},H($),1))),128))]),l(Ve,{onSubmit:ge(ee,["prevent"]),ref_key:"formData",ref:w,"validate-on":"input"},{default:a(()=>[l(ve,null,{default:a(()=>{var $,re;return[l(V,{md:"12",cols:"12"},{default:a(()=>[l(X,{clearable:"",modelValue:e(v),"onUpdate:modelValue":[s[0]||(s[0]=f=>le(v)?v.value=f:null),s[1]||(s[1]=f=>Q(e(v).roles,e(v).uuid,e(v).has_npwp))],label:"Tutor Name",items:e(Z),"item-props":f=>({title:f.full_name,subtitle:f.roles.map(M=>M.name).join(", ")}),rules:e(S).required,loading:e(r),disabled:e(r),density:"compact"},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),l(V,{md:"6",cols:"6"},{default:a(()=>{var f;return[l(X,{clearable:"",modelValue:e(t).curriculum_id,"onUpdate:modelValue":[s[2]||(s[2]=M=>e(t).curriculum_id=M),s[3]||(s[3]=M=>N(e(v).id,e(t).subject_name,e(t).curriculum_id))],label:"Curriculum",items:e(K),"item-props":M=>({title:M.name}),rules:e(S).required,loading:e(r),disabled:e(r)||((f=k.selected[0])==null?void 0:f.curriculum),density:"compact","item-value":"id"},null,8,["modelValue","items","item-props","rules","loading","disabled"])]}),_:1}),((re=($=k.selected[0])==null?void 0:$.require)==null?void 0:re.toLowerCase())=="tutor"?(_(),F(V,{key:0,md:"6",cols:"6"},{default:a(()=>[l(X,{clearable:"",modelValue:e(t).subject_name,"onUpdate:modelValue":[s[4]||(s[4]=f=>e(t).subject_name=f),s[5]||(s[5]=f=>N(e(v).id,e(t).subject_name,e(t).curriculum_id))],label:"Subject Tutoring",items:e(z),loading:e(r),disabled:e(r),rules:e(S).required,density:"compact"},null,8,["modelValue","items","loading","disabled","rules"])]),_:1})):Y("",!0),l(V,{md:"8",cols:"8"},{default:a(()=>{var f;return[l(X,{clearable:"",label:"Package",modelValue:e(t).package_id,"onUpdate:modelValue":[s[6]||(s[6]=M=>e(t).package_id=M),W],items:e(P),density:"compact","item-props":M=>({title:M.package!=null?M.type_of+" - "+M.package:M.type_of,subtitle:M.detail?M.detail/60+" Hours":"Customizable"}),"item-value":"id",rules:e(S).required,loading:e(r),disabled:e(r)||((f=k.selected[0])==null?void 0:f.package)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]}),_:1}),l(V,{md:"4",cols:"4"},{default:a(()=>[l(te,{type:"number",clearable:"",label:e(t).duration/60?"Minutes ("+(e(t).duration/60).toFixed(1)+" Hours)":"Minutes",readonly:e(D),modelValue:e(t).duration,"onUpdate:modelValue":s[7]||(s[7]=f=>e(t).duration=f),density:"compact",rules:e(S).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),l(V,{md:"4",cols:"7"},{default:a(()=>[l(te,{type:"number",clearable:"",label:"Fee/hours (Nett)",modelValue:e(E),"onUpdate:modelValue":[s[8]||(s[8]=f=>le(E)?E.value=f:null),m],density:"compact",rules:e(S).required},null,8,["modelValue","rules"])]),_:1}),l(V,{md:"4",cols:"5"},{default:a(()=>[l(te,{type:"number",clearable:"",label:"Tax",modelValue:e(t).tax,"onUpdate:modelValue":[s[9]||(s[9]=f=>e(t).tax=f),m],rules:e(S).required,density:"compact"},null,8,["modelValue","rules"])]),_:1}),l(V,{md:"4",cols:"12"},{default:a(()=>[l(oe,{activator:"parent",location:"top"},{default:a(()=>[U(" Fee Gross is automatically calculated based on the entered Net Fee and Tax Rate. ")]),_:1}),l(te,{type:"number",clearable:"",label:"Fee/hours (Gross)",modelValue:e(t).individual_fee,"onUpdate:modelValue":[s[10]||(s[10]=f=>e(t).individual_fee=f),g],density:"compact",readonly:"",rules:e(S).required},null,8,["modelValue","rules"])]),_:1}),l(V,{md:"6",cols:"6"},{default:a(()=>[l(X,{clearable:"",modelValue:e(t).inhouse_id,"onUpdate:modelValue":s[11]||(s[11]=f=>e(t).inhouse_id=f),label:"Inhouse Mentor/Tutor",items:e(A),density:"compact","item-props":f=>({title:f.full_name}),"item-value":"uuid",loading:e(r),disabled:e(r),rules:e(S).required},null,8,["modelValue","items","item-props","loading","disabled","rules"])]),_:1}),l(V,{md:"6",cols:"6"},{default:a(()=>[l(X,{multiple:"",clearable:"",chips:"",label:"PIC",modelValue:e(t).pic_id,"onUpdate:modelValue":s[12]||(s[12]=f=>e(t).pic_id=f),items:e(J),"item-title":"full_name","item-value":"id",loading:e(r),density:"compact",disabled:e(r),rules:e(S).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1}),l(V,{md:"12"},{default:a(()=>[l(ke,{label:"Notes",modelValue:e(t).notes,"onUpdate:modelValue":s[13]||(s[13]=f=>e(t).notes=f),density:"compact"},null,8,["modelValue"])]),_:1})]}),_:1}),l(ye,{class:"mt-5 px-0"},{default:a(()=>[l(se,{variant:"tonal",color:"error",type:"button",onClick:s[14]||(s[14]=$=>p("close"))},{default:a(()=>[l(q,{icon:"ri-close-line",class:"me-3"}),U(" Close ")]),_:1}),l(be),l(se,{variant:"tonal",color:"success",type:"submit"},{default:a(()=>[U(" Save "),l(q,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]}),_:1})]),_:1},8,["title"])}}},cl=xe("v-alert-title"),ml=["success","info","warning","error"],pl=he({border:{type:[Boolean,String],validator:o=>typeof o=="boolean"||["top","end","bottom","start"].includes(o)},borderColor:String,closable:Boolean,closeIcon:{type:we,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:o=>ml.includes(o)},...Ce(),...Pe(),...Te(),...je(),...Se(),...Ue(),...qe(),...Ne(),...$e(),...Fe({variant:"flat"})},"VAlert"),vl=Ie()({name:"VAlert",props:pl(),emits:{"click:close":o=>!0,"update:modelValue":o=>!0},setup(o,y){let{emit:k,slots:p}=y;const r=Me(o,"modelValue"),v=ce(()=>{if(o.icon!==!1)return o.type?o.icon??`$${o.type}`:o.icon}),Z=ce(()=>({color:o.color??o.type,variant:o.variant})),{themeClasses:K}=Ae(o),{colorClasses:z,colorStyles:P,variantClasses:J}=De(Z),{densityClasses:A}=Le(o),{dimensionStyles:D}=Be(o),{elevationClasses:h}=Re(o),{locationStyles:O}=ze(o),{positionClasses:E}=Ee(o),{roundedClasses:i}=Ge(o),{textColorClasses:w,textColorStyles:t}=He(Oe(o,"borderColor")),{t:G}=We(),b=ce(()=>({"aria-label":G(o.closeLabel),onClick(W){r.value=!1,k("click:close",W)}}));return()=>{const W=!!(p.prepend||v.value),u=!!(p.title||o.title),Q=!!(p.close||o.closable);return r.value&&l(o.tag,{class:["v-alert",o.border&&{"v-alert--border":!!o.border,[`v-alert--border-${o.border===!0?"start":o.border}`]:!0},{"v-alert--prominent":o.prominent},K.value,z.value,A.value,h.value,E.value,i.value,J.value,o.class],style:[P.value,D.value,O.value,o.style],role:"alert"},{default:()=>{var N,I;return[Ye(!1,"v-alert"),o.border&&l("div",{key:"border",class:["v-alert__border",w.value],style:t.value},null),W&&l("div",{key:"prepend",class:"v-alert__prepend"},[p.prepend?l(fe,{key:"prepend-defaults",disabled:!v.value,defaults:{VIcon:{density:o.density,icon:v.value,size:o.prominent?44:28}}},p.prepend):l(q,{key:"prepend-icon",density:o.density,icon:v.value,size:o.prominent?44:28},null)]),l("div",{class:"v-alert__content"},[u&&l(cl,{key:"title"},{default:()=>{var ee;return[((ee=p.title)==null?void 0:ee.call(p))??o.title]}}),((N=p.text)==null?void 0:N.call(p))??o.text,(I=p.default)==null?void 0:I.call(p)]),p.append&&l("div",{key:"append",class:"v-alert__append"},[p.append()]),Q&&l("div",{key:"close",class:"v-alert__close"},[p.close?l(fe,{key:"close-defaults",defaults:{VBtn:{icon:o.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var ee;return[(ee=p.close)==null?void 0:ee.call(p,{props:b.value})]}}):l(se,Ke({key:"close-btn",icon:o.closeIcon,size:"x-small",variant:"text"},b.value),null)])]}})}}}),fl={__name:"program_add_specialist",props:{selected:Object},emits:["close","reload"],setup(o,{emit:y}){var I,ee;const k=o,p=y,r=c(!1),v=c([]),Z=c([]),K=c([]),z=c([]),P=c([]),J=c([]),A=c(!1),D=(ee=(I=k.selected[0])==null?void 0:I.require)==null?void 0:ee.toLowerCase(),h=c(null),O=c(null),E=c(),i=c({ref_id:k.selected.map(g=>g.id),mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",tax:null,individual_fee:null,notes:"",pic_id:[]}),w=async(g=!1)=>{const m=D=="mentor"?"External Mentor":D,n=g?"api/v1/user/mentor-tutors?inhouse=true&role="+D:"api/v1/user/mentor-tutors?role="+m;try{const T=await R.get(n);T&&(g?J.value=Object.values(T):Z.value=T)}catch(T){console.error(T)}},t=async()=>{try{const g=await R.get("api/v1/package/component/list?category="+D);g&&(z.value=g)}catch(g){console.error(g)}},G=()=>{const g=i.value.package_id,m=z.value.findIndex(T=>T.id===g);let n=z.value[m];n.detail?(A.value=!0,i.value.duration=n.detail):(A.value=!1,i.value.duration=null)},b=async()=>{try{const g=await R.get("api/v1/user/component/list");g&&(P.value=g)}catch(g){console.error(g)}},W=async(g,m=null,n=0)=>{var T,L,ae,d;if(i.value.subject_id=null,h.value=n,i.value.tax=(n==1,2.5),D=="mentor")i.value.subject_id=(L=(T=g[0])==null?void 0:T.subjects[0])==null?void 0:L.id,i.value.individual_fee=(d=(ae=g[0])==null?void 0:ae.subjects[0])==null?void 0:d.fee_individual,i.value.individual_fee?Q():O.value=null;else try{const s=await R.get("api/v1/user/mentor-tutors/"+m+"/subjects");s&&(K.value=s)}catch(s){console.error(s)}},u=async()=>{var m,n,T;i.value.mentortutor_email=v.value.email;const{valid:g}=await E.value.validate();if(g){r.value=!0;try{const L=await R.post("api/v1/timesheet/create",i.value);L&&(ne("success",L.message,"bottom-end"),p("reload"),i.value={ref_id:[],mentortutor_email:null,subject_id:null,subject_name:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[],tax:null,individual_fee:""},v.value=[],window.open("/admin/timesheet/specialist/"+((m=L.data)==null?void 0:m.timesheet_id),"_blank"))}catch(L){if((T=(n=L==null?void 0:L.response)==null?void 0:n.data)!=null&&T.errors){const ae=L.response.data.errors;ne("error",ae,"bottom-end")}}finally{p("close"),r.value=!1}}},Q=()=>{const g=i.value.individual_fee*(1-i.value.tax/100);O.value=Math.trunc(g)},N=()=>{const g=O.value/(1-i.value.tax/100);i.value.individual_fee=Math.trunc(g)};return pe(()=>{w(),w(!0),t(),b()}),(g,m)=>(_(),F(de,{"max-width":"650","prepend-icon":"ri-send-plane-line",title:"Assign to External Mentor"},{default:a(()=>[l(ue,null,{default:a(()=>[l(Ve,{onSubmit:ge(u,["prevent"]),ref_key:"formData",ref:E,"validate-on":"input"},{default:a(()=>[l(ve,null,{default:a(()=>[l(V,{md:"12",cols:"12"},{default:a(()=>[l(X,{density:"compact",clearable:"",modelValue:e(v),"onUpdate:modelValue":[m[0]||(m[0]=n=>le(v)?v.value=n:null),m[1]||(m[1]=n=>W(e(v).roles,e(v).uuid,e(v).has_npwp))],label:"Mentor Name",items:e(Z),"item-props":n=>({title:n.full_name,subtitle:n.roles.map(T=>T.name).join(", ")}),rules:e(S).required,loading:e(r),disabled:e(r)},null,8,["modelValue","items","item-props","rules","loading","disabled"]),e(h)!=null?(_(),F(vl,{key:0,color:e(h)==1?"success":"error",class:"py-2 mt-2"},{default:a(()=>[l(q,{icon:"ri-error-warning-line",class:"mr-2"}),x("small",null," Mentor "+H(e(h)==1?"already":"don`t")+" have NPWP ",1)]),_:1},8,["color"])):Y("",!0)]),_:1}),l(V,{md:"8",cols:"8"},{default:a(()=>[l(X,{density:"compact",clearable:"",label:"Package",modelValue:e(i).package_id,"onUpdate:modelValue":[m[2]||(m[2]=n=>e(i).package_id=n),G],items:e(z),"item-props":n=>({title:n.package!=null?n.type_of+" - "+n.package:n.type_of,subtitle:n.detail?n.detail/60+" Hours":"Customizable"}),"item-value":"id",rules:e(S).required,loading:e(r),disabled:e(r)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),l(V,{md:"4",cols:"4"},{default:a(()=>[l(te,{density:"compact",type:"number",clearable:"",label:+e(i).duration/60?""+e(i).duration/60+" Hours":"Minutes",readonly:e(A),modelValue:e(i).duration,"onUpdate:modelValue":m[3]||(m[3]=n=>e(i).duration=n),rules:e(S).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),l(V,{md:"4",cols:"7"},{default:a(()=>[l(te,{type:"number",clearable:"",label:"Fee/hours (Nett)",modelValue:e(O),"onUpdate:modelValue":[m[4]||(m[4]=n=>le(O)?O.value=n:null),N],density:"compact",rules:e(S).required},null,8,["modelValue","rules"])]),_:1}),l(V,{md:"4",cols:"5"},{default:a(()=>[l(te,{type:"number",clearable:"",label:"Tax",modelValue:e(i).tax,"onUpdate:modelValue":[m[5]||(m[5]=n=>e(i).tax=n),N],rules:e(S).required,density:"compact"},null,8,["modelValue","rules"])]),_:1}),l(V,{md:"4",cols:"12"},{default:a(()=>[l(oe,{activator:"parent",location:"top"},{default:a(()=>[U(" Fee Gross is automatically calculated based on the entered Net Fee and Tax Rate. ")]),_:1}),l(te,{type:"number",clearable:"",label:"Fee/hours (Gross)",modelValue:e(i).individual_fee,"onUpdate:modelValue":[m[6]||(m[6]=n=>e(i).individual_fee=n),Q],density:"compact",readonly:"",rules:e(S).required},null,8,["modelValue","rules"])]),_:1}),l(V,{md:"6",cols:"12"},{default:a(()=>[l(X,{density:"compact",clearable:"",modelValue:e(i).inhouse_id,"onUpdate:modelValue":m[7]||(m[7]=n=>e(i).inhouse_id=n),label:"Inhouse Mentor",items:e(J),"item-props":n=>({title:n.full_name}),"item-value":"uuid",loading:e(r),disabled:e(r),rules:e(S).required},null,8,["modelValue","items","item-props","loading","disabled","rules"])]),_:1}),l(V,{md:"6",cols:"12"},{default:a(()=>[l(X,{density:"compact",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:e(i).pic_id,"onUpdate:modelValue":m[8]||(m[8]=n=>e(i).pic_id=n),items:e(P),"item-title":"full_name","item-value":"id",loading:e(r),disabled:e(r),rules:e(S).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1}),l(V,{md:"12"},{default:a(()=>[l(ke,{label:"Notes",modelValue:e(i).notes,"onUpdate:modelValue":m[9]||(m[9]=n=>e(i).notes=n)},null,8,["modelValue"])]),_:1})]),_:1}),l(ye,{class:"mt-5 px-0"},{default:a(()=>[l(se,{variant:"tonal",color:"error",type:"button",onClick:m[10]||(m[10]=n=>p("close"))},{default:a(()=>[l(q,{icon:"ri-close-line",class:"me-3"}),U(" Close ")]),_:1}),l(be),l(se,{variant:"tonal",color:"success",type:"submit"},{default:a(()=>[U(" Save "),l(q,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1}))}},_l=["innerHTML"],gl=x("div",{class:"d-flex justify-between align-center"},[x("div",{class:"w-100"},[x("h4",null,"Program Name")])],-1),bl={key:0,class:"d-flex bg-secondary py-1 px-2 rounded-lg",style:{"align-items":"center"}},yl=x("th",{class:"text-uppercase",width:"1%"}," # ",-1),Vl=x("th",{class:"text-uppercase text-center"},"Timesheet",-1),kl=x("th",{class:"text-uppercase text-center"},"Student",-1),xl=x("th",{class:"text-uppercase text-center"},"School Name",-1),hl={class:"text-uppercase text-center"},wl={key:0,class:"text-uppercase text-center"},Cl={class:"text-center"},Pl={class:"text-left",nowrap:""},Tl=["onClick"],jl={class:"text-left",nowrap:""},Sl={key:0,class:"text-left",nowrap:""},Ul={key:1,class:"text-left",nowrap:""},ql={key:2,nowrap:""},Nl={key:0},$l=x("tr",null,[x("td",{colspan:"6",class:"text-center"}," Sorry, no data found. ")],-1),Fl=[$l],Il={class:"d-flex justify-center mt-5"},ot={__name:"program",props:{name:String},setup(o){const y=c([]),k=c(!1),p=c(!1),r=o,v=c(1),Z=c(),K=c(),z=c([]),P=c(!1),J=c([]),A=c(),D=c(),h=async()=>{var Q,N;const w=r.name,t="?page="+v.value,G=K.value?"&keyword="+K.value:"",b=A.value?"&program_name="+encodeURIComponent(A.value):"",u=w=="tutoring"?"api/v1/program/list"+t+G+b+"&paginate=true":"api/v1/request"+t+K+"&is_cancelled=true";try{P.value=!0;const I=await R.get(u);I&&(v.value=I.current_page,Z.value=I.last_page,z.value=I),P.value=!1}catch(I){ne("error",(N=(Q=I.response)==null?void 0:Q.data)==null?void 0:N.message,"bottom-end"),console.error(I),P.value=!1}},O=async()=>{try{const w=await R.get("api/v1/program/component/list");w&&(J.value=w)}catch(w){console.error(w)}},E=tl(async w=>{v.value=1,K.value=w.target.value,await h()},1e3),i=w=>{window.open("/admin/timesheet/"+r.name+"/"+w)};return Qe(()=>{h()}),Xe(()=>{y.value=[]}),pe(()=>{h(),O()}),(w,t)=>{const G=Ze("VText");return _(),B(ie,null,[l(_e,{modelValue:e(p),"onUpdate:modelValue":t[0]||(t[0]=b=>le(p)?p.value=b:null),width:"400"},{default:a(()=>[l(de,{title:"Notes","prepend-icon":"ri-chat-3-line"},{default:a(()=>[l(ue,null,{default:a(()=>[x("div",{innerHTML:e(D)},null,8,_l)]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(de,null,{default:a(()=>[l(ll,null,{default:a(()=>[gl]),_:1}),l(ue,null,{default:a(()=>[l(ve,{class:"my-1"},{default:a(()=>[r.name=="tutoring"?(_(),F(V,{key:0,cols:"12",md:"3"},{default:a(()=>[l(X,{clearable:"",modelValue:e(A),"onUpdate:modelValue":[t[1]||(t[1]=b=>le(A)?A.value=b:null),h],label:"Program Name",items:e(J),"item-title":"program_name",placeholder:"Select Program Name",density:"compact","hide-details":"","single-line":"",loading:e(P),disabled:e(P)},null,8,["modelValue","items","loading","disabled"])]),_:1})):Y("",!0),l(V,{cols:"12",md:"3"},{default:a(()=>[l(te,{loading:e(P),disabled:e(P),"append-inner-icon":"ri-search-line",density:"compact",label:"Search","hide-details":"","single-line":"",onInput:e(E)},null,8,["loading","disabled","onInput"])]),_:1}),l(V,{cols:"12",md:r.name=="tutoring"?6:9,class:"text-end"},{default:a(()=>[Je((_(),F(se,{density:"compact",color:e(y).length>0?"warning":"primary",class:"mb-2",disabled:!(e(y).length>0),onClick:t[2]||(t[2]=b=>k.value=!0)},{default:a(()=>[l(q,{icon:"ri-add-line",class:"me-3"}),U(" Assign "+H(e(y).length>1?"to Group":""),1)]),_:1},8,["color","disabled"])),[[nl,"Generate Timesheet","start"]])]),_:1},8,["md"])]),_:1}),l(_e,{modelValue:e(k),"onUpdate:modelValue":t[7]||(t[7]=b=>le(k)?k.value=b:null),width:"auto",persistent:""},{default:a(()=>[r.name=="tutoring"?(_(),F(dl,{key:0,selected:e(y),onClose:t[3]||(t[3]=b=>{k.value=!1,y.value=[]}),onReload:t[4]||(t[4]=b=>{y.value=[],h()})},null,8,["selected"])):Y("",!0),r.name=="specialist"?(_(),F(fl,{key:1,selected:e(y),onClose:t[5]||(t[5]=b=>k.value=!1),onReload:t[6]||(t[6]=b=>{y.value=[],h()})},null,8,["selected"])):Y("",!0)]),_:1},8,["modelValue"]),e(y).length>0?(_(),B("div",bl,[U(" Selected: "),(_(!0),B(ie,null,me(e(y),b=>(_(),B("small",{class:"bg-info px-3 rounded-xl ms-1 d-flex",style:{"font-size":"10px","align-items":"center"},key:b},[U(H(b.mentee)+" ",1),l(q,{icon:"ri-close-line",color:"error",class:"ms-2 cursor-pointer",onClick:W=>y.value=e(y).filter(u=>u!==b)},null,8,["onClick"])]))),128))])):Y("",!0),e(P)?(_(),F(ol,{key:1,class:"mx-auto border",type:"table-thead, table-row@10"})):(_(),F(al,{key:2,class:"table-responsive"},{default:a(()=>{var b,W;return[x("thead",null,[x("tr",null,[yl,Vl,kl,xl,x("th",hl,H(r.name=="tutoring"?"Program Name":"Engagement Type"),1),r.name=="tutoring"?(_(),B("th",wl," Tutor Name ")):Y("",!0)])]),x("tbody",null,[(_(!0),B(ie,null,me(e(z).data,(u,Q)=>(_(),B("tr",{key:Q,class:el({"bg-secondary":e(y).includes(u.id)})},[x("td",null,[u.cancellation_reason?(_(),F(G,{key:0},{default:a(()=>[l(oe,{activator:"parent",location:"top"},{default:a(()=>[U(" Cancel: "+H(u.cancellation_reason),1)]),_:2},1024),l(q,{icon:"ri-subtract-line",color:"error"})]),_:2},1024)):(!u.timesheet_id||!u.scnd_timesheet_id)&&!u.cancellation_reason?(_(),F(rl,{key:1,modelValue:e(y),"onUpdate:modelValue":t[8]||(t[8]=N=>le(y)?y.value=N:null),value:{id:u.id,require:u.require,mentee:u.student_name,package:u.package,curriculum:u.curriculum,program_name:u.program_name}},null,8,["modelValue","value"])):u.timesheet_id&&u.scnd_timesheet_id&&!u.cancellation_reason?(_(),F(q,{key:2,icon:"ri-check-line",color:"success"})):Y("",!0)]),x("td",Cl,[u.timesheet_id?(_(),F(G,{key:0,class:"cursor-pointer",onClick:N=>i(u.timesheet_id)},{default:a(()=>[l(q,{icon:"ri-file-check-line",class:"mx-1",color:"success"}),l(oe,{activator:"parent",location:"top"},{default:a(()=>[U("Already")]),_:1})]),_:2},1032,["onClick"])):(_(),F(G,{key:1},{default:a(()=>[l(q,{icon:"ri-file-close-line",class:"mx-1",color:"error"}),l(oe,{activator:"parent",location:"top"},{default:a(()=>[U("Not Yet")]),_:1})]),_:1})),u.scnd_timesheet_id?(_(),F(G,{key:2,class:"cursor-pointer",onClick:N=>i(u.scnd_timesheet_id)},{default:a(()=>[l(q,{icon:"ri-file-check-line",class:"mx-1",color:"success"}),l(oe,{activator:"parent",location:"top"},{default:a(()=>[U("Already")]),_:1})]),_:2},1032,["onClick"])):Y("",!0)]),x("td",Pl,[l(q,{icon:"ri-user-line",class:"me-3"}),U(" "+H(u.student_name)+" ",1),r.name=="specialist"&&u.notes?(_(),B("div",{key:0,class:"d-inline ms-2 cursor-pointer",onClick:N=>{p.value=!0,D.value=u.notes}},[l(oe,{activator:"parent",location:"start"},{default:a(()=>[U(" Notes ")]),_:1}),l(q,{icon:"ri-chat-3-line",color:"info"})],8,Tl)):Y("",!0)]),x("td",jl,H(u.student_school),1),r.name=="tutoring"?(_(),B("td",Sl,[l(q,{icon:"ri-bookmark-line",class:"me-3"}),U(" "+H(u.free_trial?"[TRIAL]":"")+" "+H(u.program_name),1)])):(_(),B("td",Ul,[l(q,{icon:"ri-bookmark-line",class:"me-3"}),U(" "+H(u.engagement_type),1)])),r.name=="tutoring"?(_(),B("td",ql,H(u.tutor_name),1)):Y("",!0)],2))),128))]),((W=(b=e(z))==null?void 0:b.data)==null?void 0:W.length)==0?(_(),B("tfoot",Nl,Fl)):Y("",!0)]}),_:1})),x("div",Il,[l(sl,{modelValue:e(v),"onUpdate:modelValue":[t[9]||(t[9]=b=>le(v)?v.value=b:null),h],length:e(Z),"total-visible":4,color:"primary",density:"compact","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})],64)}}};export{ot as default};
