import{_ as ye}from"./DeleteHandler.vue_vue_type_script_setup_true_lang-C9PkjZ9F.js";import{r as y,l as W,o as w,f as j,w as a,b as e,Z as oe,W as I,u as t,v as H,Y as P,V as x,j as $,m as ne,A as Y,s as M,$ as ie,e as de,a as l,x as K,c as E,F as he,X as be,t as k,h as re,z as Ve,a0 as ke,k as le,a1 as we,i as xe,P as De,a2 as $e,a3 as Ce,a4 as ge}from"./main-DV4WMWdJ.js";import{r as q}from"./rules-B5G8qOzK.js";import{a as R,c as ue,V as z,b as G,d as se,e as Te}from"./VCard-T6Nf0MsR.js";import{V as ce}from"./VForm-dcUZ5jCO.js";import{V as X,a as C}from"./VRow-B0y8aIlI.js";import{V as pe}from"./VTextarea-DA84tI37.js";import{V as J}from"./VDialog-DwREO28q.js";import{a as fe,V as Q}from"./VTable-fUVhvM40.js";import{T as ee}from"./index-C9ZJiS2c.js";import{V as Me}from"./VCheckbox-DeAklfQn.js";import{V as te}from"./VAutocomplete-CJjCMpH3.js";import{V as Se}from"./VDivider-BLJ1R-A1.js";import{V as Ue,a as ae,b as je}from"./VList-CYp0WTX7.js";import"./VAvatar-CxdFL0bp.js";import"./VImg-BTe1y1ho.js";import"./VTooltip-D_cSrZZA.js";import"./VCheckboxBtn-BWOcWpBv.js";import"./VSelectionControl-VSCYL-IM.js";import"./VSlideGroup-DFw-uDPd.js";import"./ssrBoot-BrlaXp1u.js";const Ye={__name:"activity-add",props:{id:String},emits:["close","reload"],setup(L,{emit:S}){const v=L,i=S,f=y(!1),b=y(),s=y({activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}),g=()=>{s.value={activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}},D=async()=>{const{valid:_}=await b.value.validate();if(_){f.value=!0;try{const c=await Y.post("api/v1/timesheet/"+v.id+"/activity",s.value);c&&M("success",c.message,"bottom-end")}catch(c){M("error",c.response.data.errors,"bottom-end")}finally{g(),f.value=!1,i("reload"),i("close")}}};return(_,c)=>{const V=W("DialogCloseBtn"),o=W("VDateInput");return w(),j(z,{title:"New Activity"},{default:a(()=>[e(V,{variant:"text",size:"default",onClick:c[0]||(c[0]=u=>i("close"))}),e(R,null,{default:a(()=>[e(ce,{onSubmit:oe(D,["prevent"]),ref_key:"formData",ref:b,"validate-on":"input"},{default:a(()=>[e(X,null,{default:a(()=>[e(C,{cols:"12",class:"d-none"},{default:a(()=>[e(I,{modelValue:t(s).activity,"onUpdate:modelValue":c[1]||(c[1]=u=>t(s).activity=u),label:"Activity Name",placeholder:"Activity",loading:t(f),disabled:t(f),variant:"solo"},null,8,["modelValue","loading","disabled"])]),_:1}),e(C,{cols:"12"},{default:a(()=>[e(pe,{modelValue:t(s).description,"onUpdate:modelValue":c[2]||(c[2]=u=>t(s).description=u),label:"Meeting Discussion",placeholder:"Meeting Discussion",variant:"solo",loading:t(f),disabled:t(f),rules:t(q).required},null,8,["modelValue","loading","disabled","rules"])]),_:1}),e(C,{md:"6",cols:"12"},{default:a(()=>[e(o,{modelValue:t(s).date,"onUpdate:modelValue":c[3]||(c[3]=u=>t(s).date=u),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",loading:t(f),disabled:t(f),rules:t(q).required},null,8,["modelValue","loading","disabled","rules"])]),_:1}),e(C,{md:"3",cols:"6"},{default:a(()=>[e(I,{type:"time",modelValue:t(s).start_time,"onUpdate:modelValue":c[4]||(c[4]=u=>t(s).start_time=u),label:"Start Time",placeholder:"Start Time",rules:t(q).required,variant:"solo",class:"mb-3",loading:t(f),disabled:t(f),onChange:c[5]||(c[5]=u=>t(s).start_date=t(H)(t(s).date).format("YYYY-MM-DD")+" "+t(s).start_time+":00")},null,8,["modelValue","rules","loading","disabled"])]),_:1}),e(C,{md:"3",cols:"6"},{default:a(()=>[e(I,{type:"time",modelValue:t(s).end_time,"onUpdate:modelValue":c[6]||(c[6]=u=>t(s).end_time=u),label:"End Time",placeholder:"End Time",variant:"solo",loading:t(f),disabled:t(f),onChange:c[7]||(c[7]=u=>t(s).end_date=t(H)(t(s).date).format("YYYY-MM-DD")+" "+t(s).end_time+":00")},null,8,["modelValue","loading","disabled"])]),_:1}),e(C,{md:"12",cols:"12"},{default:a(()=>[e(I,{type:"text",modelValue:t(s).meeting_link,"onUpdate:modelValue":c[8]||(c[8]=u=>t(s).meeting_link=u),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",loading:t(f),disabled:t(f)},null,8,["modelValue","loading","disabled"])]),_:1})]),_:1}),e(ue,{class:"mt-5"},{default:a(()=>[e(P,{type:"button",color:"error",loading:t(f),disabled:t(f),onClick:c[9]||(c[9]=u=>i("close"))},{default:a(()=>[e(x,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1},8,["loading","disabled"]),e(ne),e(P,{type:"submit",color:"success",loading:t(f),disabled:t(f)},{default:a(()=>[$(" Save "),e(x,{icon:"ri-save-line",class:"ms-3"})]),_:1},8,["loading","disabled"])]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Pe={__name:"activity-edit",props:{timesheet_id:Number,activity:String},emits:["close","reload"],setup(L,{emit:S}){const v=y(),i=L,f=S,b=ie("updateReload"),s=y({activity:i==null?void 0:i.activity.activity,description:i==null?void 0:i.activity.description,date:new Date(i==null?void 0:i.activity.start_date),start_time:i==null?void 0:i.activity.start_time,end_time:i==null?void 0:i.activity.end_time,start_date:H(i==null?void 0:i.activity.start_date).format("YYYY-MM-DD")+" "+(i==null?void 0:i.activity.start_time)+":00",end_date:(i==null?void 0:i.activity.end_time)!=0?H(i==null?void 0:i.activity.start_date).format("YYYY-MM-DD")+" "+(i==null?void 0:i.activity.end_time)+":00":null,meeting_link:i==null?void 0:i.activity.meeting_link}),g=async()=>{var _,c;const{valid:D}=await v.value.validate();if(D)try{const V=await Y.put("api/v1/timesheet/"+i.timesheet_id+"/activity/"+i.activity.id,s.value);V&&(M("success",V.message,"bottom-end"),f("reload"))}catch(V){if((c=(_=V==null?void 0:V.response)==null?void 0:_.data)!=null&&c.errors){const o=V.response.data.errors;let u="Validation errors:";if(typeof o!="string"){for(const d in o)o.hasOwnProperty(d)&&(u+=`
${d}: ${o[d].join(", ")}`);M("error",u,"bottom-end")}else M("error",V.response.data.errors,"bottom-end")}}finally{f("close"),setTimeout(()=>{b(!0)},3e3)}};return(D,_)=>{const c=W("DialogCloseBtn"),V=W("VDateInput");return w(),j(z,{title:"Edit Activity"},{default:a(()=>[e(c,{variant:"text",size:"default",onClick:_[0]||(_[0]=o=>f("close"))}),e(R,null,{default:a(()=>[e(ce,{onSubmit:oe(g,["prevent"]),ref_key:"formData",ref:v,"validate-on":"input"},{default:a(()=>[e(X,null,{default:a(()=>[e(C,{cols:"12",class:"d-none"},{default:a(()=>[e(I,{modelValue:t(s).activity,"onUpdate:modelValue":_[1]||(_[1]=o=>t(s).activity=o),label:"Activity Name",placeholder:"Activity",variant:"solo"},null,8,["modelValue"])]),_:1}),e(C,{cols:"12"},{default:a(()=>[e(pe,{modelValue:t(s).description,"onUpdate:modelValue":_[2]||(_[2]=o=>t(s).description=o),label:"Meeting Discussion",rules:t(q).required,placeholder:"Meeting Discussion",variant:"solo"},null,8,["modelValue","rules"])]),_:1}),e(C,{md:"6",cols:"12"},{default:a(()=>[e(V,{modelValue:t(s).date,"onUpdate:modelValue":_[3]||(_[3]=o=>t(s).date=o),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(q).required},null,8,["modelValue","rules"])]),_:1}),e(C,{md:"3",cols:"6"},{default:a(()=>[e(I,{type:"time",modelValue:t(s).start_time,"onUpdate:modelValue":_[4]||(_[4]=o=>t(s).start_time=o),label:"Start Time",rules:t(q).required,placeholder:"Start Time",variant:"solo",onChange:_[5]||(_[5]=o=>t(s).start_date=t(H)(i==null?void 0:i.activity.date).format("YYYY-MM-DD")+" "+t(s).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e(C,{md:"3",cols:"6"},{default:a(()=>[e(I,{type:"time",modelValue:t(s).end_time,"onUpdate:modelValue":_[6]||(_[6]=o=>t(s).end_time=o),label:"End Time",placeholder:"End Time",variant:"solo",onChange:_[7]||(_[7]=o=>t(s).end_date=t(H)(i==null?void 0:i.activity.date).format("YYYY-MM-DD")+" "+t(s).end_time+":00")},null,8,["modelValue"])]),_:1}),e(C,{md:"12",cols:"12"},{default:a(()=>[e(I,{type:"text",modelValue:t(s).meeting_link,"onUpdate:modelValue":_[8]||(_[8]=o=>t(s).meeting_link=o),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(q).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(ue,{class:"mt-5"},{default:a(()=>[e(P,{color:"error",onClick:_[9]||(_[9]=o=>f("close"))},{default:a(()=>[e(x,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[$(" Save "),e(x,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Le={class:"d-flex justify-between align-center"},Ae=l("div",{class:"w-100"},[l("h4",null,"Activity")],-1),Ne=l("thead",null,[l("tr",null,[l("th",{class:"text-uppercase",width:"1%"}," No "),l("th",{class:"text-uppercase text-center"},"Meeting Discussion"),l("th",{class:"text-uppercase text-center"},"Date"),l("th",{class:"text-uppercase text-center"},"Start Time"),l("th",{class:"text-uppercase text-center"},"End Time"),l("th",{class:"text-uppercase text-center"},"Time Spent"),l("th",{class:"text-uppercase text-center"},"Status"),l("th",{class:"text-uppercase text-end"},"#")])],-1),qe={key:0},Be=l("tr",null,[l("th",{colspan:"8",class:"text-center"}," No Activity Found ")],-1),Re=[Be],Ee={key:1},Ie={width:"1%"},ze={class:"d-none"},Fe={class:"text-start"},Oe={class:"text-center"},He={class:"text-center"},Ge={class:"text-center"},Je={class:"text-end"},We=["href"],Xe={__name:"timesheet-detail",props:{id:String},setup(L){const S=L,v=ie("updateReload"),i=y([]),f=y(!1),b=y([{add:!1,edit:!1,delete:!1}]),s=y([]),g=async()=>{f.value=!0;try{const o=await Y.get("api/v1/timesheet/"+S.id+"/activities");o&&(i.value=o)}catch(o){console.error(o)}finally{f.value=!1}},D=o=>{b.value[o]?b.value[o]=!1:b.value[o]=!0},_=(o,u)=>{s.value=u,D(o)},c=async()=>{var o,u,d;try{const m=await Y.delete("api/v1/timesheet/"+S.id+"/activity/"+s.value.id);m&&(M("success",m.message,"bottom-end"),D("delete"))}catch(m){((o=m.response)==null?void 0:o.status)==400&&M("error",(d=(u=m.response)==null?void 0:u.data)==null?void 0:d.errors,"bottom-end")}finally{g(),v(!0)}},V=async o=>{var u,d,m,n;try{const r=await Y.patch("api/v1/timesheet/"+S.id+"/activity/"+o.id,o);r&&M("success",r.message,"bottom-end")}catch(r){if((d=(u=r==null?void 0:r.response)==null?void 0:u.data)!=null&&d.message)M("error",r.response.data.message,"bottom-end");else if((n=(m=r==null?void 0:r.response)==null?void 0:m.data)!=null&&n.errors){const p=r.response.data.errors;let A="Validation errors:";if(typeof p!="string"){for(const B in p)p.hasOwnProperty(B)&&(A+=`
${B}: ${p[B].join(", ")}`);M("error",A,"bottom-end")}else M("error",r.response.data.errors,"bottom-end")}}finally{g(),v(!0)}};return de(()=>{g()}),(o,u)=>(w(),j(z,null,{default:a(()=>[e(G,null,{default:a(()=>[l("div",Le,[Ae,K((w(),j(P,{onClick:u[0]||(u[0]=d=>D("add"))},{default:a(()=>[e(x,{icon:"ri-add-line"})]),_:1})),[[ee,"New Activity","start"]]),e(J,{modelValue:t(b).add,"onUpdate:modelValue":u[2]||(u[2]=d=>t(b).add=d),"max-width":"600",persistent:""},{default:a(()=>[e(Ye,{id:S.id,onClose:u[1]||(u[1]=d=>D("add")),onReload:g},null,8,["id"])]),_:1},8,["modelValue"])])]),_:1}),e(R,null,{default:a(()=>[t(f)?(w(),j(Q,{key:1,type:"table"})):(w(),j(fe,{key:0,class:"text-no-wrap",height:"400","fixed-header":""},{default:a(()=>{var d;return[Ne,((d=t(i))==null?void 0:d.length)==0?(w(),E("tbody",qe,Re)):(w(),E("tbody",Ee,[(w(!0),E(he,null,be(t(i),(m,n)=>(w(),E("tr",{key:n},[l("td",Ie,k(n+1),1),l("td",ze,k(m.activity),1),l("td",Fe,k(m.description),1),l("td",null,k(o.$moment(m.start_date).format("dddd"))+", "+k(o.$moment(m.start_date).format("MMM Do YYYY")),1),l("td",Oe,k(m.start_time),1),l("td",He,k(m.end_time),1),l("td",Ge,[e(x,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),$(" "+k(m.estimate)+" Minutes ",1)]),l("td",null,[K(e(Me,{color:"success",modelValue:m.status,"onUpdate:modelValue":[r=>m.status=r,r=>V(m)],value:!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue"]),[[ee,m.status?"Completed":"Not Yet","start"]])]),l("td",Je,[m.meeting_link?(w(),j(P,{key:0,color:"primary",density:"compact",class:"me-1"},{default:a(()=>[l("a",{href:m.meeting_link,target:"_blank",class:"bg-primary"},[e(x,{icon:"ri ri-link"}),$(" Join ")],8,We)]),_:2},1024)):re("",!0),K((w(),j(P,{color:"warning",density:"compact",class:"me-1",onClick:r=>_("edit",m)},{default:a(()=>[e(x,{icon:"ri-edit-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Edit Activity","start"]]),K((w(),j(P,{color:"error",density:"compact",onClick:r=>_("delete",m)},{default:a(()=>[e(x,{icon:"ri-delete-bin-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Delete Activity","start"]])])]))),128))]))]}),_:1}))]),_:1}),e(J,{modelValue:t(b).edit,"onUpdate:modelValue":u[4]||(u[4]=d=>t(b).edit=d),"max-width":"600",persistent:""},{default:a(()=>[e(Pe,{timesheet_id:S==null?void 0:S.id,activity:t(s),onClose:u[3]||(u[3]=d=>D("edit")),onReload:g},null,8,["timesheet_id","activity"])]),_:1},8,["modelValue"]),e(J,{modelValue:t(b).delete,"onUpdate:modelValue":u[6]||(u[6]=d=>t(b).delete=d),"max-width":"400",persistent:""},{default:a(()=>[e(ye,{title:"activity",onClose:u[5]||(u[5]=d=>D("delete")),onDelete:c})]),_:1},8,["modelValue"])]),_:1}))}},Ze={__name:"timesheet-transfer",props:{timesheet_id:Number,require:String},emits:["close","reload"],setup(L,{emit:S}){const v=y(),i=L,f=S,b=y([]),s=y([]),g=y([]),D=i.require.toLowerCase(),_=y(!1),c=y({mentortutor_email:null,subject_id:null}),V=async()=>{const d="api/v1/user/mentor-tutors?role="+D;_.value=!0;try{const m=await Y.get(d);m&&(b.value=m)}catch(m){console.error(m)}finally{_.value=!1}},o=async(d,m=null)=>{if(c.value.subject_id=null,D=="mentor")c.value.subject_id=d[0].subjects[0].id;else{_.value=!0;try{const n=await Y.get("api/v1/user/mentor-tutors/"+m+"/subjects");n&&(g.value=n)}catch(n){console.error(n)}finally{_.value=!1}}},u=async()=>{var n,r;f("close"),c.value.mentortutor_email=s.value.email;const{valid:d}=await v.value.validate(),m=await ke("Are you sure you want to change the owner?");if(d&&m){_.value=!0;try{const p=await Y.patch("api/v1/timesheet/"+i.timesheet_id+"/void/",c.value);p&&(M("success",p.message,"bottom-end"),le.push({path:"/admin/timesheet/"+p.data.timesheet_id}),c.value={mentortutor_email:null,subject_id:null},s.value=[],setTimeout(()=>{le.go(0)},1e3))}catch(p){if(console.log(p),(r=(n=p==null?void 0:p.response)==null?void 0:n.data)!=null&&r.errors){const A=p.response.data.errors;M("error",A,"bottom-end")}}finally{f("close"),_.value=!1}}};return de(()=>{V()}),(d,m)=>(w(),j(z,{class:"mx-auto my-8",elevation:"16",width:"450"},{default:a(()=>[e(ce,{ref_key:"formData",ref:v,"validate-on":"input",onSubmit:oe(u,["prevent"])},{default:a(()=>[e(se,null,{default:a(()=>[e(G,null,{default:a(()=>[$(" Timesheet Ownership Transfer ")]),_:1}),e(Te,null,{default:a(()=>[$(" Change Timesheet Handler ")]),_:1})]),_:1}),e(R,null,{default:a(()=>[e(X,null,{default:a(()=>{var n;return[e(C,{md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(s),"onUpdate:modelValue":[m[0]||(m[0]=r=>Ve(s)?s.value=r:null),m[1]||(m[1]=r=>o(t(s).roles,t(s).uuid))],label:"Mentor/Tutor",items:t(b),"item-props":r=>({title:r.full_name,subtitle:r.roles.map(p=>p.name).join(", ")}),rules:t(q).required,loading:t(_),disabled:t(_)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),((n=i.require)==null?void 0:n.toLowerCase())=="tutor"?(w(),j(C,{key:0,md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(c).subject_id,"onUpdate:modelValue":m[2]||(m[2]=r=>t(c).subject_id=r),label:"Subject Tutoring",items:t(g),"item-title":"subject","item-value":"id",loading:t(_),disabled:t(_),rules:t(q).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1})):re("",!0)]}),_:1})]),_:1}),e(ue,{class:"mx-3 mb-3"},{default:a(()=>[e(P,{color:"error",onClick:m[3]||(m[3]=n=>f("close"))},{default:a(()=>[e(x,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[$(" Save Changes "),e(x,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1}))}},Ke={__name:"user-edit",props:["id","item","package_id"],emits:["close","reload"],setup(L,{emit:S}){var p,A,B,F,O,Z;const v=L,i=S,f=y([]),b=y([]),s=y([]),g=y([]),D=y(!1),_=y(!0),c=y(!0),V=y(),o=y({mentortutor_email:(p=v.item)==null?void 0:p.tutormentor_email,subject_id:(A=v.item)==null?void 0:A.subject_id,inhouse_id:(B=v.item)==null?void 0:B.inhouse_id,package_id:v.package_id,duration:(F=v.item)==null?void 0:F.duration,notes:(O=v.item)==null?void 0:O.notes,pic_id:(Z=v.item)==null?void 0:Z.pic_id}),u=async(U=!1)=>{c.value=!0;const T=U?"api/v1/user/mentor-tutors?inhouse=true":"api/v1/user/mentor-tutors";try{const N=await Y.get(T);N&&(U?g.value=Object.values(N):f.value=N)}catch(N){console.error(N)}finally{c.value=!1}},d=async()=>{c.value=!0;try{const U=await Y.get("api/v1/package/component/list");U&&(b.value=U)}catch(U){console.error(U)}finally{c.value=!1}},m=()=>{const U=o.value.package_id,T=b.value.findIndex(h=>h.id===U);let N=b.value[T];N.detail?(D.value=!0,o.value.duration=N.detail):(D.value=!1,o.value.duration=null)},n=async()=>{c.value=!0;try{const U=await Y.get("api/v1/user/component/list");U&&(s.value=U)}catch(U){console.error(U)}finally{c.value=!1}},r=async()=>{var T,N;const{valid:U}=await V.value.validate();if(U)try{const h=await Y.put("api/v1/timesheet/"+v.id+"/update",o.value);h&&(o.value={mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[]},M("success",h.message,"bottom-end"),i("reload"))}catch(h){if((N=(T=h==null?void 0:h.response)==null?void 0:T.data)!=null&&N.errors){const me=h.response.data.errors;let ve="Validation errors:";for(const _e in me)me.hasOwnProperty(_e)&&(ve+=`
${_e}: ${me[_e].join(", ")}`);M("error",ve,"bottom-end")}}finally{i("close")}};return de(()=>{u(!0),d(),n(),setTimeout(()=>{_.value=!1},2e3)}),(U,T)=>{const N=W("DialogCloseBtn");return w(),j(z,{title:"Edit Detail"},{default:a(()=>[e(N,{variant:"text",size:"default",onClick:T[0]||(T[0]=h=>i("close"))}),e(R,null,{default:a(()=>[e(ce,{onSubmit:oe(r,["prevent"]),ref_key:"formData",ref:V,"validate-on":"input"},{default:a(()=>[e(X,null,{default:a(()=>[e(C,{md:"8"},{default:a(()=>[e(te,{variant:"solo",clearable:"",label:"Package",modelValue:t(o).package_id,"onUpdate:modelValue":[T[1]||(T[1]=h=>t(o).package_id=h),m],items:t(b),"item-props":h=>({title:h.package!=null?h.type_of+" - "+h.package:h.type_of}),"item-value":"id",rules:t(q).required,loading:t(c),disabled:t(c)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(C,{md:"4"},{default:a(()=>[e(I,{type:"number",variant:"solo",clearable:"",label:+t(o).duration/60?"Minutes ("+t(o).duration/60+" Hours)":"Minutes",readonly:t(D),modelValue:t(o).duration,"onUpdate:modelValue":T[2]||(T[2]=h=>t(o).duration=h),rules:t(q).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),e(C,{md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(o).inhouse_id,"onUpdate:modelValue":T[3]||(T[3]=h=>t(o).inhouse_id=h),label:"Inhouse Mentor/Tutor",items:t(g),"item-props":h=>({title:h.full_name}),"item-value":"uuid",rules:t(q).required,loading:t(c),disabled:t(c)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(C,{md:"12"},{default:a(()=>[e(te,{variant:"solo",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:t(o).pic_id,"onUpdate:modelValue":T[4]||(T[4]=h=>t(o).pic_id=h),items:t(s),"item-title":"full_name","item-value":"id",rules:t(q).required,loading:t(c),disabled:t(c)},null,8,["modelValue","items","rules","loading","disabled"])]),_:1}),e(C,{md:"12"},{default:a(()=>[e(pe,{label:"Notes",modelValue:t(o).notes,"onUpdate:modelValue":T[5]||(T[5]=h=>t(o).notes=h),variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1}),e(Se,{class:"my-3"}),e(ue,null,{default:a(()=>[e(P,{color:"error",type:"button",onClick:T[6]||(T[6]=h=>i("close"))},{default:a(()=>[e(x,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[$(" Save "),e(x,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Qe={class:"w-100"},et={class:"mt-3 font-weight-light"},tt=l("hr",{class:"my-2"},null,-1),lt={key:0},at=l("tr",{class:"bg-secondary"},[l("td",null,"Name"),l("td",null,"School"),l("td",null,"Grade")],-1),st={key:1},it=l("td",{width:"20%"},"Name",-1),ot=l("td",{width:"1%"},":",-1),nt=l("td",null,"School Name",-1),dt=l("td",{width:"1%"},":",-1),rt=l("td",null,"Grade",-1),ut=l("td",{width:"1%"},":",-1),ct=l("td",null,"Email",-1),mt=l("td",{width:"1%"},":",-1),_t={class:"mt-5 font-weight-light"},ft=l("hr",{class:"my-2"},null,-1),pt=l("td",{width:"30%"},"Program",-1),vt=l("td",{width:"1%"},":",-1),gt=l("td",null,"Package",-1),yt=l("td",{width:"1%"},":",-1),ht=l("td",null,"Person in Charge",-1),bt=l("td",{width:"1%"},":",-1),Vt=l("td",null,"Tutor/Mentor",-1),kt=l("td",{width:"1%"},":",-1),wt=l("td",null,"Inhouse Tutor/Mentor",-1),xt=l("td",{width:"1%"},":",-1),Dt=l("td",null,"Update On",-1),$t=l("td",{width:"1%"},":",-1),Ct={class:"d-flex align-end w-100"},Tt={class:"m-0 mb-1 text-white"},Mt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),St={class:"text-end w-100"},Ut={class:"d-flex align-end w-100"},jt={class:"m-0 mb-1 text-white"},Yt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Pt={class:"text-end w-100"},Lt={class:"d-flex align-end w-100"},At={class:"m-0 mb-1 text-white"},Nt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),qt={class:"text-end w-100"},Bt={__name:"user-detail",props:{id:String},emits:["void"],setup(L,{emit:S}){const v=L,i=S,f=ie("reloadData"),b=ie("updateReload"),s=y([]),g=y([{edit:!1,void:!1,delete:!1}]),D=y(!1),_=async u=>{var d,m,n;D.value=!0;try{const r=await Y.get("api/v1/timesheet/"+u+"/detail");r&&(s.value=r,i("void",r.packageDetails.void))}catch(r){((d=r.response)==null?void 0:d.status)==400&&(M("error",(n=(m=r.response)==null?void 0:m.data)==null?void 0:n.errors,"bottom-end"),le.push("/admin/timesheet")),console.log(r)}finally{D.value=!1}},c=async()=>{var u,d,m;try{const n=await Y.delete("api/v1/timesheet/"+v.id+"/delete");n&&(s.value=n,M("success",n.message,"bottom-end"),g.value.delete=!1,le.push("/admin/timesheet"))}catch(n){((u=n.response)==null?void 0:u.status)==400&&M("error",(m=(d=n.response)==null?void 0:d.data)==null?void 0:m.errors,"bottom-end")}},V=u=>{g.value[u]?g.value[u]=!1:g.value[u]=!0},o=async(u,d)=>{var m;$e();try{const n=await Y.get("api/v1/timesheet/"+u+"/export",{responseType:"blob"});if(n){const r=window.URL.createObjectURL(new Blob([n],{type:'"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"'})),p=document.createElement("a");p.href=r,p.setAttribute("download",`timesheet_${d}.xlsx`),document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(r),Ce.close()}}catch(n){M("error",(m=n.response)==null?void 0:m.statusText,"bottom-end"),console.log(n)}};return de(()=>{_(v.id)}),we(()=>{f.value&&(_(v.id),b(!1))}),(u,d)=>{const m=W("router-link");return w(),j(z,{class:"mb-3"},{default:a(()=>[e(G,{class:"d-flex justify-between align-center"},{default:a(()=>{var n;return[l("div",Qe,[e(m,{to:"/admin/timesheet"},{default:a(()=>[e(x,{icon:"ri-arrow-left-line",color:"secondary",class:"me-2",size:"25"})]),_:1}),$(" Timesheet - "+k((n=t(s).packageDetails)==null?void 0:n.package_type),1)]),l("div",null,[e(xe,{"close-on-content-click":!1,location:"bottom"},{activator:a(({props:r})=>[K((w(),j(P,De({color:"secondary"},r),{default:a(()=>[e(x,{icon:"ri-settings-3-line"})]),_:2},1040)),[[ee,"Settings","start"]])]),default:a(()=>[e(Ue,null,{default:a(()=>[e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:d[0]||(d[0]=r=>V("edit"))},[e(x,{icon:"ri-pencil-line",class:"me-2"}),$(" Edit TimeSheet ")])]),_:1}),e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:d[1]||(d[1]=r=>V("void"))},[e(x,{icon:"ri-exchange-2-line",class:"me-2"}),$(" Timesheet Ownership Transfer ")])]),_:1}),e(ae,null,{default:a(()=>[e(je,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:d[2]||(d[2]=r=>{var p,A,B,F,O,Z;return o(v.id,((A=(p=t(s))==null?void 0:p.packageDetails)==null?void 0:A.package_type)+"-"+((F=(B=t(s))==null?void 0:B.packageDetails)==null?void 0:F.package_name)+"_"+((Z=(O=t(s))==null?void 0:O.packageDetails)==null?void 0:Z.tutormentor_name))})},[e(x,{icon:"ri-download-line",class:"me-2"}),$(" Download TimeSheet ")])]),_:1})]),_:1}),e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:d[3]||(d[3]=r=>V("delete"))},[e(x,{icon:"ri-delete-bin-line",class:"me-2"}),$(" Delete TimeSheet ")])]),_:1})]),_:1})]),_:1})])]}),_:1}),e(R,null,{default:a(()=>[t(D)?(w(),j(X,{key:1},{default:a(()=>[e(C,{md:"7"},{default:a(()=>[e(Q,{type:"heading, paragraph, heading, paragraph",class:"mb-3"})]),_:1}),e(C,{md:"5"},{default:a(()=>[e(Q,{type:"text@3",color:"#16B1FF",class:"mb-3"}),e(Q,{type:"text@3",color:"#91c45e",class:"mb-3"}),e(Q,{type:"text@3",color:"#e05e5e",class:"mb-3"})]),_:1})]),_:1})):(w(),j(X,{key:0,align:"center"},{default:a(()=>[e(C,{md:"7"},{default:a(()=>[l("h4",et,[e(x,{icon:"ri-user-line",size:"17",class:"me-2"}),$(" Basic Profile ")]),tt,e(fe,{density:"compact"},{default:a(()=>{var n,r;return[((n=t(s).clientProfile)==null?void 0:n.length)>1?(w(),E("tbody",lt,[at,(w(!0),E(he,null,be(t(s).clientProfile,p=>(w(),E("tr",null,[l("td",null,k(p.client_name),1),l("td",null,k(p.client_school),1),l("td",null,k(p.client_grade),1)]))),256))])):((r=t(s).clientProfile)==null?void 0:r.length)==1?(w(),E("tbody",st,[l("tr",null,[it,ot,l("td",null,k(t(s).clientProfile[0].client_name),1)]),l("tr",null,[nt,dt,l("td",null,k(t(s).clientProfile[0].client_school),1)]),l("tr",null,[rt,ut,l("td",null,k(t(s).clientProfile[0].client_grade),1)]),l("tr",null,[ct,mt,l("td",null,k(t(s).clientProfile[0].client_mail),1)])])):re("",!0)]}),_:1}),l("h4",_t,[e(x,{icon:"ri-bookmark-line",class:"me-2",size:"17"}),$(" Package Details ")]),ft,e(fe,{density:"compact"},{default:a(()=>{var n,r,p,A,B,F,O;return[l("tbody",null,[l("tr",null,[pt,vt,l("td",null,k((n=t(s).packageDetails)!=null&&n.free_trial?"[TRIAL]":"")+" "+k((r=t(s).packageDetails)==null?void 0:r.program_name),1)]),l("tr",null,[gt,yt,l("td",null,k(((p=t(s).packageDetails)==null?void 0:p.package_type)+" - "+((A=t(s).packageDetails)==null?void 0:A.package_name)),1)]),l("tr",null,[ht,bt,l("td",null,k((B=t(s).packageDetails)==null?void 0:B.pic_name),1)]),l("tr",null,[Vt,kt,l("td",null,k((F=t(s).packageDetails)==null?void 0:F.tutormentor_name),1)]),l("tr",null,[wt,xt,l("td",null,k((O=t(s).packageDetails)==null?void 0:O.inhouse_name),1)]),l("tr",null,[Dt,$t,l("td",null,k(t(H)().format("LLL")),1)])])]}),_:1})]),_:1}),e(C,{md:"5"},{default:a(()=>[e(z,{color:"#16B1FF",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(G,{class:"text-white"},{default:a(()=>[$(" Total Minutes of Package ")]),_:1})]),_:1}),e(R,{class:"d-flex justify-between"},{default:a(()=>{var n;return[l("div",Ct,[l("h1",Tt,k((n=t(s).packageDetails)==null?void 0:n.duration_in_minutes),1),Mt])]}),_:1})]),e(R,null,{default:a(()=>[l("div",St,[e(x,{icon:"ri-calendar-schedule-line",size:"60"})])]),_:1})]),_:1}),e(z,{color:"#91c45e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(G,{class:"text-white"},{default:a(()=>[$(" Total Minutes Spent ")]),_:1})]),_:1}),e(R,{class:"d-flex justify-between"},{default:a(()=>{var n;return[l("div",Ut,[l("h1",jt,k((n=t(s).packageDetails)==null?void 0:n.time_spent_in_minutes),1),Yt])]}),_:1})]),e(R,null,{default:a(()=>[l("div",Pt,[e(x,{icon:"ri-timer-flash-line",size:"60",color:"white"})])]),_:1})]),_:1}),e(z,{color:"#e05e5e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(G,{class:"text-white"},{default:a(()=>[$(" Total Minutes Left ")]),_:1})]),_:1}),e(R,{class:"d-flex justify-between"},{default:a(()=>{var n,r;return[l("div",Lt,[l("h1",At,k(((n=t(s).packageDetails)==null?void 0:n.duration_in_minutes)-((r=t(s).packageDetails)==null?void 0:r.time_spent_in_minutes)),1),Nt])]}),_:1})]),e(R,null,{default:a(()=>[l("div",qt,[e(x,{icon:"ri-timer-2-line",size:"60"})])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),e(J,{modelValue:t(g).edit,"onUpdate:modelValue":d[6]||(d[6]=n=>t(g).edit=n),"max-width":"600",persistent:""},{default:a(()=>{var n;return[e(Ke,{item:t(s).editableColumns,package_id:(n=t(s).packageDetails)==null?void 0:n.package_id,id:v.id,onClose:d[4]||(d[4]=r=>V("edit")),onReload:d[5]||(d[5]=r=>_(v.id))},null,8,["item","package_id","id"])]}),_:1},8,["modelValue"]),e(J,{modelValue:t(g).delete,"onUpdate:modelValue":d[8]||(d[8]=n=>t(g).delete=n),"max-width":"400",persistent:""},{default:a(()=>[e(ye,{title:"timesheet",onDelete:c,onClose:d[7]||(d[7]=n=>V("delete"))})]),_:1},8,["modelValue"]),e(J,{modelValue:t(g).void,"onUpdate:modelValue":d[10]||(d[10]=n=>t(g).void=n),"max-width":"400",persistent:""},{default:a(()=>[e(Ze,{timesheet_id:v.id,require:t(s).editableColumns.tutormentor_role,onClose:d[9]||(d[9]=n=>V("void"))},null,8,["timesheet_id","require"])]),_:1},8,["modelValue"])]),_:1})}}},Rt={class:"h-auto position-relative"},Et={key:0,class:"overlay"},It=l("div",{class:"bg-secondary",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9998",width:"100%",opacity:"0.6"}},null,-1),zt={class:"d-flex align-center justify-center",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9999",width:"100%",opacity:"1"}},Ft={class:"text-center"},Ot=l("h2",{class:"text-white mt-3"},"This Timesheet Has Changed Owner",-1),_l={__name:"timesheet-detail",props:{id:Number},setup(L){const v=L.id,i=y(!1),f=y(!1);ge("reloadData",i),ge("updateReload",s=>{i.value=s});const b=s=>{f.value=s};return(s,g)=>(w(),E("div",Rt,[t(f)=="true"?(w(),E("div",Et,[It,l("div",zt,[l("div",Ft,[e(x,{color:"white",icon:"ri-lock-line",size:"50"}),Ot,e(P,{color:"light",class:"mt-4",onClick:g[0]||(g[0]=D=>t(le).push({path:"/admin/timesheet"}))},{default:a(()=>[$(" Back to List ")]),_:1})])])])):re("",!0),e(Bt,{id:t(v),onVoid:b},null,8,["id"]),e(Xe,{id:t(v)},null,8,["id"])]))}};export{_l as default};
