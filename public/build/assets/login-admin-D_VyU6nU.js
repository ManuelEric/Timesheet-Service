import{aL as y,v as k,r as d,C as T,c as C,b as a,w as t,aM as A,h as f,o as L,a as u,u as e,f as h,K as M,I as U,D as B,J as D,U as N,s as v}from"./main-BamGvAjg.js";import{r as _}from"./rules-B5G8qOzK.js";import{l as S}from"./eduall-jXBsxaj5.js";import{a as j,b as E}from"./auth-v1-mask-light--N6hHkxK.js";import{V as I,f as P,d as F,a as V,b}from"./VTextField-1ys-liIu.js";import{V as J}from"./VForm-C_0S8g3K.js";import{V as q,a as K}from"./VRow-CS9fcrjS.js";import"./forwardRefs-DUMsmNF6.js";import"./VImg-C3PmJxkR.js";/* empty css              */const R={class:"auth-wrapper d-flex align-center justify-center pa-4"},W={class:"d-flex justify-center mb-5"},Y=["src"],$=u("h5",{class:"text-h5 font-weight-semibold mb-1"},"Welcome to Timesheet App! ",-1),z=u("p",{class:"mb-0"},"Please sign-in to your account and start the adventure",-1),le={__name:"login-admin",setup(G){const g=y();k(()=>g.global.name.value==="light"?j:E);const m=d(),r=d({email:"",password:""}),i=d(!1),n=d(!1),w=async()=>{var s,o,p;const{valid:c}=await m.value.validate();if(c)try{i.value=!0;const l=await B.post("api/v1/auth/token",r.value);l&&(D.saveToken(l.granted_token),N.saveUser(l),v("success","You`ve successfully login.","bottom-end"),setTimeout(()=>{f.go(0)},1500)),i.value=!1}catch(l){v("error",(p=(o=(s=l.response)==null?void 0:s.data)==null?void 0:o.errors)==null?void 0:p.email,"bottom-end"),i.value=!1,console.error(l)}},x=()=>{A().isAuthenticated.value&&f.push("/admin/dashboard")};return T(()=>{x()}),(c,s)=>(L(),C("div",R,[a(I,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:t(()=>[a(P,{class:"justify-center"},{default:t(()=>[u("div",W,[u("img",{src:e(S),alt:"Timesheet - EduALL",class:"w-50 text-center"},null,8,Y)]),a(F,{class:"font-weight-semibold text-2xl text-uppercase"},{default:t(()=>[h(" Timesheet App ")]),_:1})]),_:1}),a(V,{class:"pt-2 text-center"},{default:t(()=>[$,z]),_:1}),a(V,null,{default:t(()=>[a(J,{onSubmit:M(w,["prevent"]),ref_key:"formData",ref:m,"validate-on":"input","fast-fail":""},{default:t(()=>[a(q,null,{default:t(()=>[a(K,{cols:"12"},{default:t(()=>[a(b,{modelValue:e(r).email,"onUpdate:modelValue":s[0]||(s[0]=o=>e(r).email=o),label:"Email",type:"email",class:"mb-3",rules:e(_).email},null,8,["modelValue","rules"]),a(b,{modelValue:e(r).password,"onUpdate:modelValue":s[1]||(s[1]=o=>e(r).password=o),label:"Password",placeholder:"路路路路路路路路路路路路",type:e(n)?"text":"password","append-inner-icon":e(n)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":s[2]||(s[2]=o=>n.value=!e(n)),class:"mb-5",rules:e(_).required},null,8,["modelValue","type","append-inner-icon","rules"]),a(U,{block:"",type:"submit",loading:e(i),disabled:e(i)},{default:t(()=>[h(" Login ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]))}};export{le as default};
