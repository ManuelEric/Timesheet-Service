import{I as ie,K as de,L as ce,M as q,N as ue,O as me,r as T,P as fe,c as H,Q as he,R as pe,S as _e,T as K,b as t,W,F as S,X as ve,Y as ge,l as x,Z as ye,$ as Ve,A as M,s as N,o as we,p as B,w as _,e as d,f as e,V as Q,h as f,H as X,a as v,a0 as A,q as L,t as h,i as k,k as ke,D as Z}from"./main-mrss2PD2.js";import{d as J}from"./debounce-DLQVPFjc.js";import{V as j,b as xe,c as O}from"./VCard-DWjdz7UP.js";import{V as be,a as ee}from"./VTable-BfyHJTbK.js";import{V as Ce}from"./VPagination-ClFFr0z6.js";import{m as Te,V as te}from"./VSelectionControl-By4Qs2Av.js";import{V as Se}from"./VDialog-DZ4k8g9N.js";import{V as Ie}from"./VTooltip-CX19Y67o.js";import"./VAvatar-C3vDfAV4.js";import"./VImg-C_sJV_Ub.js";const Pe=ie({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...de(),...Te()},"VSwitch"),Ne=ce()({name:"VSwitch",inheritAttrs:!1,props:Pe(),emits:{"update:focused":s=>!0,"update:modelValue":s=>!0,"update:indeterminate":s=>!0},setup(s,y){let{attrs:F,slots:r}=y;const V=q(s,"indeterminate"),m=q(s,"modelValue"),{loaderClasses:I}=ue(s),{isFocused:U,focus:R,blur:E}=me(s),D=T(),p=fe&&window.matchMedia("(forced-colors: active)").matches,i=H(()=>typeof s.loading=="string"&&s.loading!==""?s.loading:s.color),l=he(),g=H(()=>s.id||`switch-${l}`);function o(){V.value&&(V.value=!1)}function n(u){var a,b;u.stopPropagation(),u.preventDefault(),(b=(a=D.value)==null?void 0:a.input)==null||b.click()}return pe(()=>{const[u,a]=_e(F),b=K.filterProps(s),c=te.filterProps(s);return t(K,W({class:["v-switch",{"v-switch--flat":s.flat},{"v-switch--inset":s.inset},{"v-switch--indeterminate":V.value},I.value,s.class]},u,b,{modelValue:m.value,"onUpdate:modelValue":C=>m.value=C,id:g.value,focused:U.value,style:s.style}),{...r,default:C=>{let{id:ae,messagesId:oe,isDisabled:se,isReadonly:ne,isValid:Y}=C;const $={model:m,isValid:Y};return t(te,W({ref:D},c,{modelValue:m.value,"onUpdate:modelValue":[P=>m.value=P,o],id:ae.value,"aria-describedby":oe.value,type:"checkbox","aria-checked":V.value?"mixed":void 0,disabled:se.value,readonly:ne.value,onFocus:R,onBlur:E},a),{...r,default:P=>{let{backgroundColorClasses:z,backgroundColorStyles:w}=P;return t("div",{class:["v-switch__track",p?void 0:z.value],style:w.value,onClick:n},[r["track-true"]&&t("div",{key:"prepend",class:"v-switch__track-true"},[r["track-true"]($)]),r["track-false"]&&t("div",{key:"append",class:"v-switch__track-false"},[r["track-false"]($)])])},input:P=>{let{inputNode:z,icon:w,backgroundColorClasses:le,backgroundColorStyles:re}=P;return t(S,null,[z,t("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":w||s.loading},s.inset||p?void 0:le.value],style:s.inset?void 0:re.value},[r.thumb?t(ve,{defaults:{VIcon:{icon:w,size:"x-small"}}},{default:()=>[r.thumb({...$,icon:w})]}):t(ge,null,{default:()=>[s.loading?t(ye,{name:"v-switch",active:!0,color:Y.value===!1?void 0:i.value},{default:G=>r.loader?r.loader(G):t(Ve,{active:G.isActive,color:G.color,indeterminate:!0,size:"16",width:"2"},null)}):w&&t(x,{key:String(w),icon:w,size:"x-small"},null)]})])])}})}})}),{}}}),Be={class:"d-flex justify-between align-center"},Fe=e("div",{class:"w-100"},[e("h4",null,"Tutor/Mentor")],-1),De={class:"w-25"},Me=e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase",width:"1%"}," No "),e("th",{class:"text-uppercase text-center"},"Mentor/Tutor Name"),e("th",{class:"text-uppercase text-center"},"Email"),e("th",{class:"text-uppercase text-center"},"Role"),e("th",{nowrap:""},"Inhouse Mentor"),e("th",{class:"text-uppercase text-center"},"Phone Number"),e("th",{class:"text-uppercase text-center"},"Detail")])],-1),Ae={nowrap:""},Le={class:"text-start",nowrap:""},Ue={class:"text-start",nowrap:""},Re={key:0},Ee={class:"d-flex justify-center"},$e={class:"text-start",nowrap:""},ze={class:"text-center",nowrap:""},Ge={class:"d-flex justify-between align-center mb-3"},Oe=e("h4",{class:"w-100"},"Detail",-1),We={class:"text-left",nowrap:""},Ye={nowrap:""},qe={nowrap:""},He=e("th",{nowrap:""},"Year",-1),Ke=e("th",{nowrap:""},"Fee Individual - Gross",-1),Qe={nowrap:""},Xe=["href"],Ze={nowrap:""},Je={nowrap:""},je={nowrap:""},et={nowrap:""},tt={key:0},at=e("tr",null,[e("td",{colspan:"6",class:"text-center"}," Sorry, no data found. ")],-1),ot=[at],st={class:"d-flex justify-center mt-5"},pt={__name:"tutor",setup(s){const y=T(1),F=T(),r=T(),V=T([]),m=T(!1),I=async()=>{var g,o;const p="?page="+y.value,i=r.value?"&keyword="+r.value:"",l="&paginate=true";try{m.value=!0;const n=await M.get("api/v1/user/mentor-tutors"+p+i+l);n&&(y.value=n.current_page,F.value=n.last_page,V.value=n),m.value=!1}catch(n){N("error",(o=(g=n.response)==null?void 0:g.data)==null?void 0:o.message,"bottom-end"),console.error(n),m.value=!1}},U=J(async()=>{y.value=1,await I()},1e3),R=async p=>{try{const i=await M.post("api/v1/auth/email/checking",{email:p})}catch(i){console.error(i)}},E=async(p,i,l)=>{var g,o;await R(l);try{const n=await M.put("api/v1/user/mentor-tutors/"+p,{inhouse:i?1:0});n&&N("success",n.message,"bottom-end")}catch(n){console.error(n),N("error",(o=(g=n.response)==null?void 0:g.data)==null?void 0:o.errors,"bottom-end")}},D=J(async(p,i)=>{try{const l=await M.patch("api/v1/user/mentor-tutors/"+p+"/subjects/"+i.id,{fee_individual:i.fee_individual??0});l&&N("success",l.message,"bottom-end")}catch(l){console.error(l),N("error","Please fill in the field individual fee","bottom-end")}},1e3);return we(()=>{I()}),(p,i)=>(d(),B(j,null,{default:_(()=>[t(xe,null,{default:_(()=>[e("div",Be,[Fe,e("div",De,[t(Q,{modelValue:f(r),"onUpdate:modelValue":i[0]||(i[0]=l=>X(r)?r.value=l:null),loading:f(m),disabled:f(m),"append-inner-icon":"ri-search-line",density:"compact",label:"Search","hide-details":"","single-line":"",onInput:f(U)},null,8,["modelValue","loading","disabled","onInput"])])])]),_:1}),t(O,null,{default:_(()=>[f(m)?(d(),B(be,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(d(),B(ee,{key:1},{default:_(()=>{var l,g;return[Me,e("tbody",null,[(d(!0),v(S,null,A(f(V).data,(o,n)=>(d(),v("tr",{key:n},[e("td",null,h(parseInt(n)+1),1),e("td",Ae,[t(x,{icon:"ri-user-line",class:"me-3"}),k(" "+h(o.full_name),1)]),e("td",Le,[t(x,{icon:"ri-mail-line",class:"me-3"}),k(" "+h(o.email),1)]),e("td",Ue,[t(x,{icon:"ri-user-line",class:"me-3"}),(d(!0),v(S,null,A(o.roles,(u,a)=>(d(),v("span",{key:a},[k(h(u.name)+" ",1),a<o.roles.length-1?(d(),v("span",Re,", ")):L("",!0)]))),128))]),e("td",Ee,[t(Ne,{modelValue:o.inhouse,"onUpdate:modelValue":[u=>o.inhouse=u,u=>E(o.uuid,o.inhouse,o.email)],value:"1"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",$e,[t(x,{icon:"ri-smartphone-line",class:"me-3"}),k(" "+h(o.phone),1)]),e("td",ze,[t(Se,{"max-width":"700"},{activator:_(({props:u})=>[t(x,W({icon:"ri-folder-info-line",class:"cursor-pointer",ref_for:!0},u),null,16)]),default:_(({isActive:u})=>[t(j,null,{default:_(()=>[t(O,{class:"py-5"},{default:_(()=>[e("div",Ge,[Oe,t(ke,{size:"x-small",color:"secondary",icon:"ri-close-line",onClick:a=>u.value=!1},null,8,["onClick"])]),o.roles.findIndex(a=>a.name==="Tutor")>=0||o.roles.findIndex(a=>a.name==="External Mentor")>=0?(d(),B(ee,{key:0,density:"compact"},{default:_(()=>[e("thead",null,[e("tr",null,[e("th",We,h(o.roles.findIndex(a=>a.name==="Tutor")>=0?"Subject Tutoring":"Engagement Type"),1),e("th",Ye,h(o.roles.findIndex(a=>a.name==="Tutor")>=0?"Curriculum":"Package Name"),1),e("th",qe,h(o.roles.findIndex(a=>a.name==="Tutor")>=0?"Grade":"Stream"),1),He,Ke])]),e("tbody",null,[(d(!0),v(S,null,A(o.roles,(a,b)=>(d(),v(S,{key:b},[a.name=="Tutor"||a.name=="External Mentor"?(d(!0),v(S,{key:0},A(a.subjects,c=>(d(),v("tr",{key:c},[e("td",Qe,[k(h(a.name=="Tutor"?c.tutor_subject:c.engagement_type_name)+" ",1),a.agreement?(d(),v("a",{key:0,href:a.agreement,target:"_blank",class:"ms-2 d-inline cursor-pointer"},[t(Ie,{activator:"parent",location:"end"},{default:_(()=>[k(" Check Agreement ")]),_:1}),t(x,{icon:"ri-file-pdf-2-line"})],8,Xe)):L("",!0)]),e("td",Ze,h(a.name=="Tutor"?c.curriculum_name:c.package_name),1),e("td",Je,h(a.name=="Tutor"?c.grade:c.stream),1),e("td",je,h(f(Z)(c.start_date).format("LL")+" - "+f(Z)(c.end_date).format("LL")),1),e("td",et,[t(Q,{prefix:"Rp. ",modelValue:c.fee_individual,"onUpdate:modelValue":[C=>c.fee_individual=C,C=>f(D)(o.uuid,c)],density:"compact",type:"number",label:"Fee Gross",class:"my-3"},null,8,["modelValue","onUpdate:modelValue"])])]))),128)):L("",!0)],64))),128))])]),_:2},1024)):(d(),B(O,{key:1,class:"text-center"},{default:_(()=>[k(" There is no tutoring subject ")]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))]),((g=(l=f(V))==null?void 0:l.data)==null?void 0:g.length)==0?(d(),v("tfoot",tt,ot)):L("",!0)]}),_:1})),e("div",st,[t(Ce,{modelValue:f(y),"onUpdate:modelValue":[i[1]||(i[1]=l=>X(y)?y.value=l:null),I],length:f(F),"total-visible":5,color:"primary",density:"compact","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1}))}};export{pt as default};
