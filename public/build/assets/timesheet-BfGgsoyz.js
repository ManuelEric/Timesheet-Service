import{r as p,e as R,f as h,w as o,A as N,s as q,U,l as B,o as n,b as a,u as r,z as C,W as E,a as t,c as v,X as L,F as j,h as W,n as A,t as c,V as d,j as i,Y as X}from"./main-DRbHMMTA.js";import{a as Y}from"./avatar-1-BpD18F9D.js";import{a as G,b as J,c as K,d as O}from"./avatar-5-DCc5XOFQ.js";import{V as Q,b as Z,a as $}from"./VCard-IU1KNjEw.js";import{V as D,a as T}from"./VRow-2G3M3Ur6.js";import{V as ee}from"./VAutocomplete-B4MkXmDl.js";import{V as te,a as ae}from"./VTable-kYK3nUGa.js";import{V as se}from"./VPagination-_opiI9Le.js";import{V as oe}from"./VBadge-CX_1uJBo.js";import{V as z}from"./VTooltip-3amt0563.js";import{V as le}from"./VAvatar-DQOjqOCo.js";import"./VImg-CamkSaBR.js";import"./VList-B7f8g9_t.js";import"./ssrBoot-BJdb91qh.js";import"./VDivider-DsPIVVxm.js";import"./VCheckboxBtn-ByEiU9uU.js";import"./VSelectionControl-Cvh4ixIA.js";import"./VSlideGroup-B5_lAAlS.js";const re=t("div",{class:"d-flex justify-between align-center"},[t("div",{class:"w-100"},[t("h4",null,"Timesheet List")])],-1),ne=t("thead",null,[t("tr",null,[t("th",{class:"text-uppercase",width:"1%"}," No "),t("th",{class:"text-uppercase text-center"},"School/Student Name"),t("th",{class:"text-uppercase text-center"},"Program Name"),t("th",{class:"text-uppercase text-center"},"Package"),t("th",{class:"text-uppercase text-center"},"Tutor/Mentor"),t("th",{class:"text-uppercase text-center"},"PIC"),t("th",{class:"text-uppercase text-center"},"Total Hours"),t("th",{class:"text-uppercase text-center"},"Used"),t("th",{class:"text-uppercase text-center"},"#")])],-1),ce={class:"text-start"},ie={class:"text-left"},ue={class:"text-left"},de={class:"text-left"},pe={class:"text-left"},me={key:0},_e=t("tr",null,[t("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),ge=[_e],fe={class:"d-flex justify-center mt-5"},ze={__name:"timesheet",setup(he){const F=[Y,G,J,K,O],m=p(1),P=p(),_=p(),y=p([]),u=p(!1),S=p([]),g=p(),V=async()=>{var s,f;const x="?page="+m.value,l=_.value?"&keyword="+_.value:"",k=g.value?"&package_id="+g.value:"",b="&paginate=true";try{u.value=!0;const e=await N.get("api/v1/timesheet/list"+x+l+k+b);e&&(m.value=e.current_page,P.value=e.last_page,y.value=e),u.value=!1}catch(e){q("error",(f=(s=e.response)==null?void 0:s.data)==null?void 0:f.message,"bottom-end"),console.error(e),u.value=!1}},H=async()=>{const x=U.getUser().role_detail.length==1?"?category="+U.getUser().role_detail[0].role.toLowerCase():"";try{const l=await N.get("api/v1/package/component/list"+x);l&&(S.value=l)}catch(l){console.error(l)}},I=async()=>{m.value=1,await V()};return R(()=>{V(),H()}),(x,l)=>{const k=B("VText"),b=B("router-link");return n(),h(Q,null,{default:o(()=>[a(Z,null,{default:o(()=>[re]),_:1}),a($,null,{default:o(()=>[a(D,{class:"my-1 justify-space-between"},{default:o(()=>[a(T,{cols:"12",md:"6"},{default:o(()=>[a(D,null,{default:o(()=>[a(T,{cols:"12",md:"6"},{default:o(()=>[a(ee,{clearable:"true",modelValue:r(g),"onUpdate:modelValue":[l[0]||(l[0]=s=>C(g)?g.value=s:null),V],label:"Package",items:r(S),"item-props":s=>({title:s.package!=null?s.type_of+" - "+s.package:s.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:r(u),disabled:r(u)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(T,{cols:"12",md:"3"},{default:o(()=>[a(E,{loading:r(u),disabled:r(u),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:r(_),"onUpdate:modelValue":l[1]||(l[1]=s=>C(_)?_.value=s:null),onChange:I},null,8,["loading","disabled","modelValue"])]),_:1})]),_:1}),r(u)?(n(),h(te,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(n(),h(ae,{key:1,class:"text-no-wrap"},{default:o(()=>{var s,f;return[ne,t("tbody",null,[(n(!0),v(j,null,L(r(y).data,(e,w)=>(n(),v("tr",{key:w,class:A(e.void=="true"?"bg-secondary":"")},[t("td",null,c(parseInt(w)+1),1),t("td",{class:A(e.group?"cursor-pointer text-left":"text-left")},[e.group?(n(),h(k,{key:0},{default:o(()=>[a(d,{icon:"ri-group-line",class:"me-3"}),i(" "+c(e.clients[0])+" ",1),a(oe,{color:"error",content:e.clients.length-1+"+",inline:""},null,8,["content"]),a(z,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:o(()=>[(n(!0),v(j,null,L(e.clients,M=>(n(),v("div",null,c(M),1))),256))]),_:2},1024)]),_:2},1024)):(n(),h(k,{key:1},{default:o(()=>[a(d,{icon:"ri-user-line",class:"me-3"}),i(" "+c(e.clients),1)]),_:2},1024))],2),t("td",null,[a(d,{icon:"ri-bookmark-3-line",class:"me-3"}),i(" "+c(e.program_name),1)]),t("td",ce,[a(d,{icon:"ri-bookmark-line",class:"me-3"}),i(" "+c(e.detail_package?e.package_type+" - "+e.detail_package:e.package_type),1)]),t("td",ie,[a(le,{size:"25",class:"avatar-center me-3",image:F[w%5]},null,8,["image"]),i(" "+c(e.tutor_mentor),1)]),t("td",ue,[a(d,{icon:"ri-user-line",class:"cursor-pointer me-3"}),i(" "+c(e.admin),1)]),t("td",de,[a(d,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),i(" "+c(e.duration/60)+" Hours ",1)]),t("td",pe,[a(d,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),i(" "+c(e.spent/60)+" Hours ",1)]),t("td",null,[a(b,{to:"/user/timesheet/"+e.id+"/"+e.require.toLowerCase()},{default:o(()=>[a(X,{color:e.void=="true"?"light":"secondary"},{default:o(()=>[a(d,{icon:"ri-timeline-view",class:"cursor-pointer"}),a(z,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:o(()=>[i(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],2))),128))]),((f=(s=r(y))==null?void 0:s.data)==null?void 0:f.length)==0?(n(),v("tfoot",me,ge)):W("",!0)]}),_:1})),t("div",fe,[a(se,{modelValue:r(m),"onUpdate:modelValue":[l[2]||(l[2]=s=>C(m)?m.value=s:null),V],length:r(P),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{ze as default};
