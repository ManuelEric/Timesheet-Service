import{r as u,an as G,e as J,f as k,w as s,ao as K,A as S,s as O,l as U,o as r,b as e,u as l,z as I,h as A,W as Q,a as t,t as c,c as g,X as D,F as L,n as F,V as p,j as m,Y as Z}from"./main-ExEM9zZY.js";import{d as ee}from"./debounce-Ddfu28ac.js";import{V as te,b as ae,a as oe}from"./VCard-4ZeQtL5W.js";import{V as H,a as T}from"./VRow-BX84uW53.js";import{V as z}from"./VAutocomplete-D074hnSg.js";import{V as se,a as le}from"./VTable-520_7ndn.js";import{V as ne}from"./VPagination-C85xM9TA.js";import{V as re}from"./VBadge-CCnZHbVG.js";import{V as E}from"./VTooltip-BMjQab3z.js";import"./VAvatar-DCovBj_a.js";import"./VImg-Dpd29ZCU.js";import"./VList-BGlxZL6b.js";import"./ssrBoot-JyCYu87j.js";import"./VDivider-CXdEZmOR.js";import"./VCheckboxBtn-diNvo4Hp.js";import"./VSelectionControl-BNPxfozg.js";import"./VSlideGroup-BFkp1ros.js";const ce=t("div",{class:"d-flex justify-between align-center"},[t("div",{class:"w-100"},[t("h4",null,"Timesheet List")])],-1),ie=t("th",{class:"text-uppercase",width:"1%"}," No ",-1),de=t("th",{class:"text-uppercase text-center"},"School/Student Name",-1),ue={class:"text-uppercase text-center"},pe=t("th",{class:"text-uppercase text-center"},"Package",-1),me=t("th",{class:"text-uppercase text-center"},"Tutor/Mentor",-1),_e=t("th",{class:"text-uppercase text-center"},"PIC",-1),ge=t("th",{class:"text-uppercase text-center"},"Total Hours",-1),he=t("th",{class:"text-uppercase text-center"},"Used",-1),fe=t("th",{class:"text-uppercase text-center"},"#",-1),ve=["onClick"],ke={key:0},Ve={key:1},ye={class:"text-start"},xe={class:"text-left"},be={class:"text-left"},we={class:"text-left"},Te={class:"text-left"},Ce={key:0},Pe=t("tr",null,[t("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),Ne=[Pe],Se={class:"d-flex justify-center mt-5"},qe={__name:"timesheet",props:{name:String},setup(M){const h=M,W=K();u([]);const f=u(1),j=u(),C=u(),P=u([]),i=u(!1),B=u([]),V=u(),R=u([]),y=u(),v=async()=>{var a,x;const o="?page="+f.value,_=C.value?"&keyword="+C.value:"",b=V.value?"&program_name="+encodeURIComponent(V.value):"",N=y.value?"&package_id="+y.value:"",n="&paginate=true",w=h.name!="tutoring"?"&is_subject_specialist=true":"";try{i.value=!0;const d=await S.get("api/v1/timesheet/list"+o+_+b+N+n+w);d&&(f.value=d.current_page,j.value=d.last_page,P.value=d),i.value=!1}catch(d){O("error",(x=(a=d.response)==null?void 0:a.data)==null?void 0:x.message,"bottom-end"),console.error(d),i.value=!1}},X=async()=>{try{const o=await S.get("api/v1/program/component/list");o&&(B.value=o)}catch(o){console.error(o)}},Y=async()=>{try{const o=await S.get("api/v1/package/component/list");o&&(R.value=o)}catch(o){console.error(o)}},$=ee(async o=>{f.value=1,C.value=o.target.value,await v()},1e3),q=o=>{W.push("/admin/timesheet/"+h.name+"/"+o)};return G(()=>{v()}),J(()=>{v(),X(),Y()}),(o,_)=>{const b=U("VText"),N=U("router-link");return r(),k(te,null,{default:s(()=>[e(ae,null,{default:s(()=>[ce]),_:1}),e(oe,null,{default:s(()=>[e(H,{class:"my-1 justify-space-between"},{default:s(()=>[h.name=="tutoring"?(r(),k(T,{key:0,cols:"12",md:"6"},{default:s(()=>[e(H,null,{default:s(()=>[e(T,{cols:"12",md:"6"},{default:s(()=>[e(z,{clearable:"",modelValue:l(V),"onUpdate:modelValue":[_[0]||(_[0]=n=>I(V)?V.value=n:null),v],label:"Program Name",items:l(B),"item-title":"program_name",placeholder:"Select Program Name",variant:"solo",loading:l(i),disabled:l(i)},null,8,["modelValue","items","loading","disabled"])]),_:1}),e(T,{cols:"12",md:"6"},{default:s(()=>[e(z,{clearable:"true",modelValue:l(y),"onUpdate:modelValue":[_[1]||(_[1]=n=>I(y)?y.value=n:null),v],label:"Package",items:l(R),"item-props":n=>({title:n.package!=null?n.type_of+" - "+n.package:n.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:l(i),disabled:l(i)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1})):A("",!0),e(T,{cols:"12",md:"3"},{default:s(()=>[e(Q,{loading:l(i),disabled:l(i),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",onInput:l($)},null,8,["loading","disabled","onInput"])]),_:1})]),_:1}),l(i)?(r(),k(se,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(r(),k(le,{key:1,class:"text-no-wrap",hover:""},{default:s(()=>{var n,w;return[t("thead",null,[t("tr",null,[ie,de,t("th",ue,c(h.name=="tutoring"?"Program Name":"Engagement Type"),1),pe,me,_e,ge,he,fe])]),t("tbody",null,[(r(!0),g(L,null,D(l(P).data,(a,x)=>(r(),g("tr",{key:x,class:F([a.void=="true"?"bg-secondary":"","cursor-pointer"]),onClick:d=>q(a.id)},[t("td",null,c(parseInt(x)+1),1),t("td",{class:F(a.group?"cursor-pointer text-left":"text-left")},[a.group?(r(),k(b,{key:0},{default:s(()=>[e(p,{icon:"ri-group-line",class:"me-3"}),m(" "+c(a.clients[0])+" ",1),e(re,{color:"error",content:a.clients.length-1+"+",inline:""},null,8,["content"]),e(E,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:s(()=>[(r(!0),g(L,null,D(a.clients,d=>(r(),g("div",null,c(d),1))),256))]),_:2},1024)]),_:2},1024)):(r(),k(b,{key:1},{default:s(()=>[e(p,{icon:"ri-user-line",class:"me-3"}),m(" "+c(a.clients),1)]),_:2},1024))],2),h.name=="tutoring"?(r(),g("td",ke,[e(p,{icon:"ri-bookmark-3-line",class:"me-3"}),m(" "+c(a.detail_package=="Trial"?"[TRIAL]":"")+" "+c(a.program_name),1)])):(r(),g("td",Ve,[e(p,{icon:"ri-bookmark-3-line",class:"me-3"}),m(" "+c(a.engagement_type),1)])),t("td",ye,[e(p,{icon:"ri-bookmark-line",class:"me-3"}),m(" "+c(a.detail_package?a.package_type+" - "+a.detail_package:a.package_type),1)]),t("td",xe,[e(p,{icon:"ri-user-line",class:"me-3"}),m(" "+c(a.tutor_mentor),1)]),t("td",be,[e(p,{icon:"ri-user-line",class:"cursor-pointer me-3"}),m(" "+c(a.admin),1)]),t("td",we,[e(p,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),m(" "+c(a.duration/60)+" Hours ",1)]),t("td",Te,[e(p,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),m(" "+c(a.spent/60)+" Hours ",1)]),t("td",null,[e(N,{to:"/admin/timesheet/"+h.name+"/"+a.id},{default:s(()=>[e(Z,{color:a.void=="true"?"light":"secondary"},{default:s(()=>[e(p,{icon:"ri-timeline-view",class:"cursor-pointer"}),e(E,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:s(()=>[m(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],10,ve))),128))]),((w=(n=l(P))==null?void 0:n.data)==null?void 0:w.length)==0?(r(),g("tfoot",Ce,Ne)):A("",!0)]}),_:1})),t("div",Se,[e(ne,{modelValue:l(f),"onUpdate:modelValue":[_[2]||(_[2]=n=>I(f)?f.value=n:null),v],length:l(j),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{qe as default};
