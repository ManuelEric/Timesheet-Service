import{r as m,U as b,o as G,p as f,w as o,a3 as J,A as B,s as K,y as j,e as c,b as a,h as l,H as T,V as O,f as t,t as n,a as v,a0 as D,F as A,q as F,n as H,l as d,i as p,k as Q}from"./main-By8SK6S3.js";import{V as W,b as X,c as Y}from"./VCard-CCPni4mg.js";import{V as I,a as U}from"./VRow-AJrP6gfp.js";import{V as Z}from"./VAutocomplete-DqyH-JNf.js";import{V as ee,a as te}from"./VTable-CkKHn9Ec.js";import{V as ae}from"./VPagination-B1dZGeEz.js";import{V as R}from"./VBadge-B7AL3NEs.js";import{V as q}from"./VTooltip-CdGkDs_C.js";import"./VAvatar-DnxIimKR.js";import"./VImg-BCY-WzON.js";import"./VList-De_uO2Z0.js";import"./ssrBoot-CNhTBMKE.js";import"./VDivider-LaNp6F6H.js";import"./VCheckboxBtn-DWlRhZER.js";import"./VSelectionControl-BLsrjHCL.js";import"./VSlideGroup-uX-YxM6E.js";const se=t("div",{class:"d-flex justify-between align-center"},[t("div",{class:"w-100"},[t("h4",null,"Timesheet List")])],-1),oe=t("th",{class:"text-uppercase",width:"1%"}," No ",-1),le=t("th",{class:"text-uppercase text-center"},"Student Name",-1),re=t("th",{class:"text-uppercase text-center"},"Program Name",-1),ne=t("th",{class:"text-uppercase text-center"},"Package",-1),ce={class:"text-uppercase text-center"},ie=t("th",{class:"text-uppercase text-center"},"PIC",-1),ue=t("th",{class:"text-uppercase text-center"},"Total Hours",-1),de=t("th",{class:"text-uppercase text-center"},"Used",-1),pe=t("th",{class:"text-uppercase text-center"},"#",-1),_e=["onClick"],me={class:"text-start"},ge={class:"text-left"},he={class:"text-left"},fe={class:"text-left"},xe={class:"text-left"},Ve={key:0},ke=t("tr",null,[t("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),ve=[ke],ye={class:"d-flex justify-center mt-5"},qe={__name:"timesheet",setup(be){const M=J(),g=m(1),L=m(b.getUser().role_detail[0].role.toLowerCase()),P=m(),x=m(),w=m([]),_=m(!1),N=m([]),V=m(),y=async()=>{var k,e;const h="?page="+g.value,r=x.value?"&keyword="+x.value:"",u=V.value?"&package_id="+V.value:"",C="&paginate=true",s=L.value=="tutor"?"":"&is_subject_specialist=true";try{_.value=!0;const i=await B.get("api/v1/timesheet/list"+h+r+u+s+C);i&&(g.value=i.current_page,P.value=i.last_page,w.value=i),_.value=!1}catch(i){K("error",(e=(k=i.response)==null?void 0:k.data)==null?void 0:e.message,"bottom-end"),console.error(i),_.value=!1}},z=async()=>{const h=b.getUser().role_detail[0].role.toLowerCase()=="external mentor"?"mentor":b.getUser().role_detail[0].role.toLowerCase(),r=b.getUser().role_detail.length==1?"?category="+h:"";try{const u=await B.get("api/v1/package/component/list"+r);u&&(N.value=u)}catch(u){console.error(u)}},E=async()=>{g.value=1,await y()},$=(h,r)=>{M.push("/user/timesheet/"+h+"/"+r.toLowerCase())};return G(()=>{y(),z()}),(h,r)=>{const u=j("VText"),C=j("router-link");return c(),f(W,null,{default:o(()=>[a(X,null,{default:o(()=>[se]),_:1}),a(Y,null,{default:o(()=>[a(I,{class:"my-1 justify-space-between"},{default:o(()=>[a(U,{cols:"12",md:"6"},{default:o(()=>[a(I,null,{default:o(()=>[a(U,{cols:"12",md:"6"},{default:o(()=>[a(Z,{clearable:"true",modelValue:l(V),"onUpdate:modelValue":[r[0]||(r[0]=s=>T(V)?V.value=s:null),y],label:"Package",items:l(N),"item-props":s=>({title:s.package!=null?s.type_of+" - "+s.package:s.type_of}),"item-value":"id",placeholder:"Select Package",loading:l(_),disabled:l(_)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(U,{cols:"12",md:"3"},{default:o(()=>[a(O,{loading:l(_),disabled:l(_),"append-inner-icon":"ri-search-line",label:"Search","hide-details":"","single-line":"",modelValue:l(x),"onUpdate:modelValue":r[1]||(r[1]=s=>T(x)?x.value=s:null),onChange:E},null,8,["loading","disabled","modelValue"])]),_:1})]),_:1}),l(_)?(c(),f(ee,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(c(),f(te,{key:1,class:"text-no-wrap",hover:""},{default:o(()=>{var s,k;return[t("thead",null,[t("tr",null,[oe,le,re,ne,t("th",ce,n(l(L)=="tutor"?"Tutor":"Mentor"),1),ie,ue,de,pe])]),t("tbody",null,[(c(!0),v(A,null,D(l(w).data,(e,i)=>(c(),v("tr",{key:i,class:H([e.void=="true"?"bg-secondary":"","cursor-pointer"]),onClick:S=>$(e.id,e.require)},[t("td",null,n(parseInt(i)+1),1),t("td",{class:H(e.group?"cursor-pointer text-left":"text-left")},[e.group?(c(),f(u,{key:0},{default:o(()=>[a(d,{icon:"ri-group-line",class:"me-3"}),p(" "+n(e.clients[0])+" ",1),a(R,{color:"error",content:e.clients.length-1+"+",inline:""},null,8,["content"]),a(q,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:o(()=>[(c(!0),v(A,null,D(e.clients,S=>(c(),v("div",null,n(S),1))),256))]),_:2},1024)]),_:2},1024)):(c(),f(u,{key:1},{default:o(()=>[a(d,{icon:"ri-user-line",class:"me-3"}),p(" "+n(e.clients),1)]),_:2},1024)),e.spent==e.duration?(c(),f(R,{key:2,color:"success",content:"Done",inline:"",class:"ms-2"})):F("",!0)],2),t("td",null,[a(d,{icon:"ri-bookmark-3-line",class:"me-3"}),p(" "+n(e.free_trial?"[TRIAL]":"")+" "+n(e.program_name),1)]),t("td",me,[a(d,{icon:"ri-bookmark-line",class:"me-3"}),p(" "+n(e.detail_package?e.package_type+" - "+e.detail_package:e.package_type),1)]),t("td",ge,[a(d,{icon:"ri-user-line",class:"mr-2"}),p(" "+n(e.tutor_mentor),1)]),t("td",he,[a(d,{icon:"ri-user-line",class:"cursor-pointer me-3"}),p(" "+n(e.admin),1)]),t("td",fe,[a(d,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),p(" "+n(e.duration/60)+" Hours ",1)]),t("td",xe,[a(d,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),p(" "+n((e.spent/60).toFixed(2))+" Hours ",1)]),t("td",null,[a(C,{to:"/user/timesheet/"+e.id+"/"+e.require.toLowerCase()},{default:o(()=>[a(Q,{color:e.void=="true"?"light":"secondary"},{default:o(()=>[a(d,{icon:"ri-timeline-view",class:"cursor-pointer"}),a(q,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:o(()=>[p(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],10,_e))),128))]),((k=(s=l(w))==null?void 0:s.data)==null?void 0:k.length)==0?(c(),v("tfoot",Ve,ve)):F("",!0)]}),_:1})),t("div",ye,[a(ae,{modelValue:l(g),"onUpdate:modelValue":[r[2]||(r[2]=s=>T(g)?g.value=s:null),y],length:l(P),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{qe as default};
