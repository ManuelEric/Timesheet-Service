import{r as d,an as q,e as G,f as v,w as o,A as S,s as J,l as A,o as n,b as e,u as s,z as I,h as D,W as K,a as t,t as c,c as g,X as L,F as R,n as F,V as u,j as p,Y as O}from"./main-D2tZ1VGO.js";import{d as Q}from"./debounce-CyRkyrla.js";import{V as Z,b as $,a as ee}from"./VCard-BK6OoTbf.js";import{V as H,a as T}from"./VRow-wFe2FcOh.js";import{V as z}from"./VAutocomplete-BHcVWAUP.js";import{V as te,a as ae}from"./VTable-8ErR064e.js";import{V as oe}from"./VPagination-DuioLQs0.js";import{V as se}from"./VBadge-beMK_RgJ.js";import{V as E}from"./VTooltip-FipMZ-so.js";import"./VAvatar-VTquFErh.js";import"./VImg-Cl8OXijM.js";import"./VList-B0UwpDSx.js";import"./ssrBoot-CMOYqA_C.js";import"./VDivider-BumT2gz-.js";import"./VCheckboxBtn-BQmQw39R.js";import"./VSelectionControl-C6abcN-o.js";import"./VSlideGroup-MKS08j6E.js";const le=t("div",{class:"d-flex justify-between align-center"},[t("div",{class:"w-100"},[t("h4",null,"Timesheet List")])],-1),re=t("th",{class:"text-uppercase",width:"1%"}," No ",-1),ne=t("th",{class:"text-uppercase text-center"},"School/Student Name",-1),ce={class:"text-uppercase text-center"},ie=t("th",{class:"text-uppercase text-center"},"Package",-1),de=t("th",{class:"text-uppercase text-center"},"Tutor/Mentor",-1),ue=t("th",{class:"text-uppercase text-center"},"PIC",-1),pe=t("th",{class:"text-uppercase text-center"},"Total Hours",-1),me=t("th",{class:"text-uppercase text-center"},"Used",-1),_e=t("th",{class:"text-uppercase text-center"},"#",-1),ge={key:0},he={key:1},fe={class:"text-start"},ve={class:"text-left"},ke={class:"text-left"},Ve={class:"text-left"},ye={class:"text-left"},xe={key:0},be=t("tr",null,[t("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),we=[be],Te={class:"d-flex justify-center mt-5"},We={__name:"timesheet",props:{name:String},setup(M){const k=M;d([]);const h=d(1),j=d(),P=d(),C=d([]),i=d(!1),B=d([]),V=d(),U=d([]),y=d(),f=async()=>{var a,x;const r="?page="+h.value,_=P.value?"&keyword="+P.value:"",b=V.value?"&program_name="+encodeURIComponent(V.value):"",N=y.value?"&package_id="+y.value:"",l="&paginate=true",w=k.name!="tutoring"?"&is_subject_specialist=true":"";try{i.value=!0;const m=await S.get("api/v1/timesheet/list"+r+_+b+N+l+w);m&&(h.value=m.current_page,j.value=m.last_page,C.value=m),i.value=!1}catch(m){J("error",(x=(a=m.response)==null?void 0:a.data)==null?void 0:x.message,"bottom-end"),console.error(m),i.value=!1}},W=async()=>{try{const r=await S.get("api/v1/program/component/list");r&&(B.value=r)}catch(r){console.error(r)}},X=async()=>{try{const r=await S.get("api/v1/package/component/list");r&&(U.value=r)}catch(r){console.error(r)}},Y=Q(async r=>{h.value=1,P.value=r.target.value,await f()},1e3);return q(()=>{f()}),G(()=>{f(),W(),X()}),(r,_)=>{const b=A("VText"),N=A("router-link");return n(),v(Z,null,{default:o(()=>[e($,null,{default:o(()=>[le]),_:1}),e(ee,null,{default:o(()=>[e(H,{class:"my-1 justify-space-between"},{default:o(()=>[k.name=="tutoring"?(n(),v(T,{key:0,cols:"12",md:"6"},{default:o(()=>[e(H,null,{default:o(()=>[e(T,{cols:"12",md:"6"},{default:o(()=>[e(z,{clearable:"",modelValue:s(V),"onUpdate:modelValue":[_[0]||(_[0]=l=>I(V)?V.value=l:null),f],label:"Program Name",items:s(B),"item-title":"program_name",placeholder:"Select Program Name",variant:"solo",loading:s(i),disabled:s(i)},null,8,["modelValue","items","loading","disabled"])]),_:1}),e(T,{cols:"12",md:"6"},{default:o(()=>[e(z,{clearable:"true",modelValue:s(y),"onUpdate:modelValue":[_[1]||(_[1]=l=>I(y)?y.value=l:null),f],label:"Package",items:s(U),"item-props":l=>({title:l.package!=null?l.type_of+" - "+l.package:l.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:s(i),disabled:s(i)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1})):D("",!0),e(T,{cols:"12",md:"3"},{default:o(()=>[e(K,{loading:s(i),disabled:s(i),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",onInput:s(Y)},null,8,["loading","disabled","onInput"])]),_:1})]),_:1}),s(i)?(n(),v(te,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(n(),v(ae,{key:1,class:"text-no-wrap"},{default:o(()=>{var l,w;return[t("thead",null,[t("tr",null,[re,ne,t("th",ce,c(k.name=="tutoring"?"Program Name":"Engagement Type"),1),ie,de,ue,pe,me,_e])]),t("tbody",null,[(n(!0),g(R,null,L(s(C).data,(a,x)=>(n(),g("tr",{key:x,class:F(a.void=="true"?"bg-secondary":"")},[t("td",null,c(parseInt(x)+1),1),t("td",{class:F(a.group?"cursor-pointer text-left":"text-left")},[a.group?(n(),v(b,{key:0},{default:o(()=>[e(u,{icon:"ri-group-line",class:"me-3"}),p(" "+c(a.clients[0])+" ",1),e(se,{color:"error",content:a.clients.length-1+"+",inline:""},null,8,["content"]),e(E,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:o(()=>[(n(!0),g(R,null,L(a.clients,m=>(n(),g("div",null,c(m),1))),256))]),_:2},1024)]),_:2},1024)):(n(),v(b,{key:1},{default:o(()=>[e(u,{icon:"ri-user-line",class:"me-3"}),p(" "+c(a.clients),1)]),_:2},1024))],2),k.name=="tutoring"?(n(),g("td",ge,[e(u,{icon:"ri-bookmark-3-line",class:"me-3"}),p(" "+c(a.detail_package=="Trial"?"[TRIAL]":"")+" "+c(a.program_name),1)])):(n(),g("td",he,[e(u,{icon:"ri-bookmark-3-line",class:"me-3"}),p(" "+c(a.engagement_type),1)])),t("td",fe,[e(u,{icon:"ri-bookmark-line",class:"me-3"}),p(" "+c(a.detail_package?a.package_type+" - "+a.detail_package:a.package_type),1)]),t("td",ve,[e(u,{icon:"ri-user-line",class:"me-3"}),p(" "+c(a.tutor_mentor),1)]),t("td",ke,[e(u,{icon:"ri-user-line",class:"cursor-pointer me-3"}),p(" "+c(a.admin),1)]),t("td",Ve,[e(u,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),p(" "+c(a.duration/60)+" Hours ",1)]),t("td",ye,[e(u,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),p(" "+c(a.spent/60)+" Hours ",1)]),t("td",null,[e(N,{to:"/admin/timesheet/"+k.name+"/"+a.id},{default:o(()=>[e(O,{color:a.void=="true"?"light":"secondary"},{default:o(()=>[e(u,{icon:"ri-timeline-view",class:"cursor-pointer"}),e(E,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:o(()=>[p(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],2))),128))]),((w=(l=s(C))==null?void 0:l.data)==null?void 0:w.length)==0?(n(),g("tfoot",xe,we)):D("",!0)]}),_:1})),t("div",Te,[e(oe,{modelValue:s(h),"onUpdate:modelValue":[_[2]||(_[2]=l=>I(h)?h.value=l:null),f],length:s(j),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{We as default};
