import{r as m,U as b,a2 as K,o as O,p as f,w as o,a3 as Q,A as j,s as W,y as D,e as c,b as a,h as l,H as U,V as X,f as t,t as n,a as y,a0 as A,F,q as H,n as I,l as d,i as p,k as Y}from"./main-Cpf0oGNm.js";import{V as Z,b as ee,c as te}from"./VCard-CsOx-PjM.js";import{V as R,a as L}from"./VRow-CtLxdo2K.js";import{V as ae}from"./VAutocomplete-BCh18UYS.js";import{V as se,a as oe}from"./VTable-QoDNyBPM.js";import{V as le}from"./VPagination-BKfvr5s_.js";import{V as q}from"./VBadge-DS3xqmqX.js";import{V as M}from"./VTooltip-5T-duFNq.js";import"./VAvatar-LUGhy5up.js";import"./VImg-edUp4sOQ.js";import"./VList-BQckvyL-.js";import"./ssrBoot-BvSlYq-5.js";import"./VDivider-C1I-T_Tw.js";import"./VCheckboxBtn-BSXoVaq2.js";import"./VSelectionControl-DjE1Ve5y.js";import"./VSlideGroup-CDGDzHIO.js";const re=t("div",{class:"d-flex justify-between align-center"},[t("div",{class:"w-100"},[t("h4",null,"Timesheet List")])],-1),ne=t("th",{class:"text-uppercase",width:"1%"}," No ",-1),ce=t("th",{class:"text-uppercase text-center"},"Student Name",-1),ie=t("th",{class:"text-uppercase text-center"},"Program Name",-1),ue=t("th",{class:"text-uppercase text-center"},"Package",-1),de={class:"text-uppercase text-center"},pe=t("th",{class:"text-uppercase text-center"},"PIC",-1),_e=t("th",{class:"text-uppercase text-center"},"Total Hours",-1),me=t("th",{class:"text-uppercase text-center"},"Used",-1),ge=t("th",{class:"text-uppercase text-center"},"#",-1),he=["onClick"],fe={class:"text-start"},xe={class:"text-left"},Ve={class:"text-left"},ke={class:"text-left"},ve={class:"text-left"},ye={key:0},be=t("tr",null,[t("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),we=[be],Ce={class:"d-flex justify-center mt-5"},ze={__name:"timesheet",props:{cat:String},setup(z){const w=z,E=Q(),g=m(1),P=m(b.getUser().role_detail[0].role.toLowerCase()),S=m(),x=m(),C=m([]),_=m(!1),N=m([]),V=m(),k=async()=>{var v,e;const h="?page="+g.value,r=x.value?"&keyword="+x.value:"",u=V.value?"&package_id="+V.value:"",T="&paginate=true",s=P.value=="tutor"||(w==null?void 0:w.cat)=="tutoring"?"":"&is_subject_specialist=true";try{_.value=!0;const i=await j.get("api/v1/timesheet/list"+h+r+u+s+T);i&&(g.value=i.current_page,S.value=i.last_page,C.value=i),_.value=!1}catch(i){W("error",(e=(v=i.response)==null?void 0:v.data)==null?void 0:e.message,"bottom-end"),console.error(i),_.value=!1}},$=async()=>{const h=b.getUser().role_detail[0].role.toLowerCase()=="external mentor"?"mentor":b.getUser().role_detail[0].role.toLowerCase(),r=b.getUser().role_detail.length==1?"?category="+h:"";try{const u=await j.get("api/v1/package/component/list"+r);u&&(N.value=u)}catch(u){console.error(u)}},G=async()=>{g.value=1,await k()},J=(h,r)=>{E.push("/user/timesheet/"+h+"/"+r.toLowerCase())};return K(()=>{k()}),O(()=>{k(),$()}),(h,r)=>{const u=D("VText"),T=D("router-link");return c(),f(Z,null,{default:o(()=>[a(ee,null,{default:o(()=>[re]),_:1}),a(te,null,{default:o(()=>[a(R,{class:"my-1 justify-space-between"},{default:o(()=>[a(L,{cols:"12",md:"6"},{default:o(()=>[a(R,null,{default:o(()=>[a(L,{cols:"12",md:"6"},{default:o(()=>[a(ae,{clearable:"true",modelValue:l(V),"onUpdate:modelValue":[r[0]||(r[0]=s=>U(V)?V.value=s:null),k],label:"Package",items:l(N),"item-props":s=>({title:s.package!=null?s.type_of+" - "+s.package:s.type_of}),"item-value":"id",placeholder:"Select Package",loading:l(_),disabled:l(_)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(L,{cols:"12",md:"3"},{default:o(()=>[a(X,{loading:l(_),disabled:l(_),"append-inner-icon":"ri-search-line",label:"Search","hide-details":"","single-line":"",modelValue:l(x),"onUpdate:modelValue":r[1]||(r[1]=s=>U(x)?x.value=s:null),onChange:G},null,8,["loading","disabled","modelValue"])]),_:1})]),_:1}),l(_)?(c(),f(se,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(c(),f(oe,{key:1,class:"text-no-wrap",hover:""},{default:o(()=>{var s,v;return[t("thead",null,[t("tr",null,[ne,ce,ie,ue,t("th",de,n(l(P)=="tutor"?"Tutor":"Mentor"),1),pe,_e,me,ge])]),t("tbody",null,[(c(!0),y(F,null,A(l(C).data,(e,i)=>(c(),y("tr",{key:i,class:I([e.void=="true"?"bg-secondary":"","cursor-pointer"]),onClick:B=>J(e.id,e.require)},[t("td",null,n(parseInt(i)+1),1),t("td",{class:I(e.group?"cursor-pointer text-left":"text-left")},[e.group?(c(),f(u,{key:0},{default:o(()=>[a(d,{icon:"ri-group-line",class:"me-3"}),p(" "+n(e.clients[0])+" ",1),a(q,{color:"error",content:e.clients.length-1+"+",inline:""},null,8,["content"]),a(M,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:o(()=>[(c(!0),y(F,null,A(e.clients,B=>(c(),y("div",null,n(B),1))),256))]),_:2},1024)]),_:2},1024)):(c(),f(u,{key:1},{default:o(()=>[a(d,{icon:"ri-user-line",class:"me-3"}),p(" "+n(e.clients),1)]),_:2},1024)),e.spent==e.duration?(c(),f(q,{key:2,color:"success",content:"Done",inline:"",class:"ms-2"})):H("",!0)],2),t("td",null,[a(d,{icon:"ri-bookmark-3-line",class:"me-3"}),p(" "+n(e.free_trial?"[TRIAL]":"")+" "+n(e.program_name),1)]),t("td",fe,[a(d,{icon:"ri-bookmark-line",class:"me-3"}),p(" "+n(e.detail_package?e.package_type+" - "+e.detail_package:e.package_type),1)]),t("td",xe,[a(d,{icon:"ri-user-line",class:"mr-2"}),p(" "+n(e.tutor_mentor),1)]),t("td",Ve,[a(d,{icon:"ri-user-line",class:"cursor-pointer me-3"}),p(" "+n(e.admin),1)]),t("td",ke,[a(d,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),p(" "+n(e.duration/60)+" Hours ",1)]),t("td",ve,[a(d,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),p(" "+n((e.spent/60).toFixed(2))+" Hours ",1)]),t("td",null,[a(T,{to:"/user/timesheet/"+e.id+"/"+e.require.toLowerCase()},{default:o(()=>[a(Y,{color:e.void=="true"?"light":"secondary"},{default:o(()=>[a(d,{icon:"ri-timeline-view",class:"cursor-pointer"}),a(M,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:o(()=>[p(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],10,he))),128))]),((v=(s=l(C))==null?void 0:s.data)==null?void 0:v.length)==0?(c(),y("tfoot",ye,we)):H("",!0)]}),_:1})),t("div",Ce,[a(le,{modelValue:l(g),"onUpdate:modelValue":[r[2]||(r[2]=s=>U(g)?g.value=s:null),k],length:l(S),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{ze as default};
