import{r as u,e as X,f as k,w as s,A as N,s as Y,l as U,o as p,b as t,u as l,z as w,W as q,a as e,c as y,X as A,F as j,h as G,n as D,t as c,V as g,j as m,Y as J}from"./main-C7YDAO-v.js";import{V as K,a as O}from"./VBadge-DzUs2IHy.js";import{a as Q,b as Z,c as $,d as ee}from"./avatar-5-DCc5XOFQ.js";import{d as te}from"./debounce-DrptU6Nr.js";import{V as ae,b as oe,a as le}from"./VCard-CvBGH6Er.js";import{V as L,a as T}from"./VRow-C_0NEaca.js";import{V as R}from"./VAutocomplete-2_w2XG8q.js";import{V as se,a as re}from"./VTable-DIqq-92A.js";import{V as ne}from"./VPagination-B9onMoEE.js";import{V as z}from"./VTooltip-_SegqQRd.js";import{V as ce}from"./VAvatar-Dj3SEqcq.js";import"./VImg-BjoC2mFC.js";import"./VList-Cf505by_.js";import"./ssrBoot-Cpx9HoY3.js";import"./VDivider-DEzlGTdp.js";import"./VCheckboxBtn-CMowJJQ1.js";import"./VSelectionControl-auFl3Hul.js";import"./VSlideGroup-7VZfJgtJ.js";const ie=e("div",{class:"d-flex justify-between align-center"},[e("div",{class:"w-100"},[e("h4",null,"Timesheet List")])],-1),de=e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase",width:"1%"}," No "),e("th",{class:"text-uppercase text-center"},"School/Student Name"),e("th",{class:"text-uppercase text-center"},"Program Name"),e("th",{class:"text-uppercase text-center"},"Package"),e("th",{class:"text-uppercase text-center"},"Tutor/Mentor"),e("th",{class:"text-uppercase text-center"},"PIC"),e("th",{class:"text-uppercase text-center"},"Total Hours"),e("th",{class:"text-uppercase text-center"},"Used"),e("th",{class:"text-uppercase text-center"},"#")])],-1),ue={class:"text-start"},pe={class:"text-left"},me={class:"text-left"},ge={class:"text-left"},_e={class:"text-left"},fe={key:0},ve=e("tr",null,[e("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),he=[ve],Ve={class:"d-flex justify-center mt-5"},Fe={__name:"timesheet",setup(xe){const F=[O,Q,Z,$,ee];u([]);const _=u(1),S=u(),f=u(),P=u([]),i=u(!1),I=u([]),v=u(),B=u([]),h=u(),V=async()=>{var x,a;const r="?page="+_.value,d=f.value?"&keyword="+f.value:"",b=v.value?"&program_name="+encodeURIComponent(v.value):"",C=h.value?"&package_id="+h.value:"",o="&paginate=true";try{i.value=!0;const n=await N.get("api/v1/timesheet/list"+r+d+b+C+o);n&&(_.value=n.current_page,S.value=n.last_page,P.value=n),i.value=!1}catch(n){Y("error",(a=(x=n.response)==null?void 0:x.data)==null?void 0:a.message,"bottom-end"),console.error(n),i.value=!1}},H=async()=>{try{const r=await N.get("api/v1/program/component/list");r&&(I.value=r)}catch(r){console.error(r)}},M=async()=>{try{const r=await N.get("api/v1/package/component/list");r&&(B.value=r)}catch(r){console.error(r)}},E=te(async()=>{_.value=1,await V()},1e3);return X(()=>{V(),H(),M()}),(r,d)=>{const b=U("VText"),C=U("router-link");return p(),k(ae,null,{default:s(()=>[t(oe,null,{default:s(()=>[ie]),_:1}),t(le,null,{default:s(()=>[t(L,{class:"my-1 justify-space-between"},{default:s(()=>[t(T,{cols:"12",md:"6"},{default:s(()=>[t(L,null,{default:s(()=>[t(T,{cols:"12",md:"6"},{default:s(()=>[t(R,{clearable:"",modelValue:l(v),"onUpdate:modelValue":[d[0]||(d[0]=o=>w(v)?v.value=o:null),V],label:"Program Name",items:l(I),"item-title":"program_name",placeholder:"Select Program Name",variant:"solo",loading:l(i),disabled:l(i)},null,8,["modelValue","items","loading","disabled"])]),_:1}),t(T,{cols:"12",md:"6"},{default:s(()=>[t(R,{clearable:"true",modelValue:l(h),"onUpdate:modelValue":[d[1]||(d[1]=o=>w(h)?h.value=o:null),V],label:"Package",items:l(B),"item-props":o=>({title:o.package!=null?o.type_of+" - "+o.package:o.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:l(i),disabled:l(i)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),t(T,{cols:"12",md:"3"},{default:s(()=>[t(q,{loading:l(i),disabled:l(i),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:l(f),"onUpdate:modelValue":d[2]||(d[2]=o=>w(f)?f.value=o:null),onInput:l(E)},null,8,["loading","disabled","modelValue","onInput"])]),_:1})]),_:1}),l(i)?(p(),k(se,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(p(),k(re,{key:1,class:"text-no-wrap"},{default:s(()=>{var o,x;return[de,e("tbody",null,[(p(!0),y(j,null,A(l(P).data,(a,n)=>(p(),y("tr",{key:n,class:D(a.void=="true"?"bg-secondary":"")},[e("td",null,c(parseInt(n)+1),1),e("td",{class:D(a.group?"cursor-pointer text-left":"text-left")},[a.group?(p(),k(b,{key:0},{default:s(()=>[t(g,{icon:"ri-group-line",class:"me-3"}),m(" "+c(a.clients[0])+" ",1),t(K,{color:"error",content:a.clients.length-1+"+",inline:""},null,8,["content"]),t(z,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:s(()=>[(p(!0),y(j,null,A(a.clients,W=>(p(),y("div",null,c(W),1))),256))]),_:2},1024)]),_:2},1024)):(p(),k(b,{key:1},{default:s(()=>[t(g,{icon:"ri-user-line",class:"me-3"}),m(" "+c(a.clients),1)]),_:2},1024))],2),e("td",null,[t(g,{icon:"ri-bookmark-3-line",class:"me-3"}),m(" "+c(a.detail_package=="Trial"?"[TRIAL]":"")+" "+c(a.program_name),1)]),e("td",ue,[t(g,{icon:"ri-bookmark-line",class:"me-3"}),m(" "+c(a.detail_package?a.package_type+" - "+a.detail_package:a.package_type),1)]),e("td",pe,[t(ce,{size:"25",class:"avatar-center me-3",image:F[n%5]},null,8,["image"]),m(" "+c(a.tutor_mentor),1)]),e("td",me,[t(g,{icon:"ri-user-line",class:"cursor-pointer me-3"}),m(" "+c(a.admin),1)]),e("td",ge,[t(g,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),m(" "+c(a.duration/60)+" Hours ",1)]),e("td",_e,[t(g,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),m(" "+c(a.spent/60)+" Hours ",1)]),e("td",null,[t(C,{to:"/admin/timesheet/"+a.id},{default:s(()=>[t(J,{color:a.void=="true"?"light":"secondary"},{default:s(()=>[t(g,{icon:"ri-timeline-view",class:"cursor-pointer"}),t(z,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:s(()=>[m(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],2))),128))]),((x=(o=l(P))==null?void 0:o.data)==null?void 0:x.length)==0?(p(),y("tfoot",fe,he)):G("",!0)]}),_:1})),e("div",Ve,[t(ne,{modelValue:l(_),"onUpdate:modelValue":[d[3]||(d[3]=o=>w(_)?_.value=o:null),V],length:l(S),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{Fe as default};
