import{r as i,o as _,f as S,w as t,b as e,Z as M,u as s,Y as U,V as k,j as b,m as L,A as R,s as W,U as X,e as Y,z as q,W as Z,c as x,F as H,X as J,a as r,t as D}from"./main-DGU7N6KA.js";import{r as P}from"./rules-B5G8qOzK.js";import{a as h,V as T}from"./VRow-DIfK1BtW.js";import{V as A,a as B,c as z,b as K}from"./VCard-Cv10e58R.js";import{V as G}from"./VForm-Cdg4ckaA.js";import{V as O}from"./VTextarea-BlevsLJF.js";import{V as F,a as I}from"./VAutocomplete-DwdKX_ll.js";import{V as $}from"./VTooltip-8_wzvTmu.js";import{V as E}from"./VDialog-BBc5sYsR.js";import{V as Q,a as ee}from"./VTable-CW-2IGXd.js";import{V as te}from"./VPagination-BAOb-9eF.js";import"./VAvatar-BECOCVLc.js";import"./VImg-Cn4X80kF.js";import"./VList-CXgkTleB.js";import"./ssrBoot-C_jjOyWE.js";import"./VDivider-CEVGliDe.js";import"./VCheckboxBtn-Cz9KgRfp.js";import"./VSelectionControl-dCywX2m5.js";import"./VSlideGroup-D0pxRed_.js";const le={__name:"cancel-request",props:{data:Object},emits:["close","reload"],setup(N,{emit:v}){const m=v,d=N,f=i(!1),g=i(null),p=i({ref_program:d.data.id,cancellation_reason:null}),u=async()=>{const{valid:n}=await g.value.validate();if(n){f.value=!0;try{await R.patch("api/v1/request/"+d.data.id+"/update",p.value)&&(W("success","Request has been successfully cancelled","bottom-end"),m("reload"))}catch(c){console.log(c)}finally{m("close"),f.value=!1}}};return(n,c)=>(_(),S(T,{class:"justify-center"},{default:t(()=>[e(h,{cols:"12"},{default:t(()=>[e(A,{title:"Cancel Your Request",width:"500","prepend-icon":"ri-send-plane-line"},{default:t(()=>[e(B,null,{default:t(()=>[e(G,{onSubmit:M(u,["prevent"]),ref_key:"formData",ref:g,"validate-on":"input"},{default:t(()=>[e(T,null,{default:t(()=>[e(h,{cols:"12"},{default:t(()=>[e(O,{label:"Reason",modelValue:s(p).cancellation_reason,"onUpdate:modelValue":c[0]||(c[0]=w=>s(p).cancellation_reason=w),rules:s(P).required},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(z,{class:"mt-5"},{default:t(()=>[e(U,{color:"error",type:"button",onClick:c[1]||(c[1]=w=>m("close"))},{default:t(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),b(" Close ")]),_:1}),e(L),e(U,{color:"success",type:"submit"},{default:t(()=>[b(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}},ae={__name:"new-request",emits:["close","reload"],setup(N,{emit:v}){const m=v,d=i(!1),f=i(null),g=i([]),p=i([]),u=i([]);X.getUser();const n=i({clientprog_id:null,invoice_id:null,student_uuid:null,student_name:null,student_school:null,student_grade:null,program_name:null,engagement_type:null,notes:null}),c=async()=>{try{const l=await R.get("api/v1/mentees");l&&(p.value=l)}catch(l){console.log(l)}},w=async()=>{try{const l=await R.get("api/v1/engagement-type/component/list");l&&(g.value=l)}catch(l){console.log(l)}},j=()=>{n.value.clientprog_id=u.value.clientprog_id,n.value.invoice_id=u.value.invoice_id,n.value.student_uuid=u.value.client.uuid,n.value.student_name=u.value.client.first_name+" "+u.value.client.last_name,n.value.student_grade=u.value.client.grade,n.value.student_school=u.value.client.school_name,n.value.program_name=u.value.program_name},V=async()=>{const{valid:l}=await f.value.validate();if(l){d.value=!0;try{await R.post("api/v1/request/create",n.value)&&(W("success","Request has been successfully created","bottom-end"),m("reload"))}catch(a){console.log(a)}finally{m("close"),d.value=!1}}};return Y(()=>{c(),w()}),(l,a)=>(_(),S(T,{class:"justify-center"},{default:t(()=>[e(h,{cols:"12"},{default:t(()=>[e(A,{title:"New Request","max-width":"500","prepend-icon":"ri-send-plane-line"},{default:t(()=>[e(B,null,{default:t(()=>[e(G,{onSubmit:M(V,["prevent"]),ref_key:"formData",ref:f,"validate-on":"input"},{default:t(()=>[e(T,null,{default:t(()=>[e(h,{cols:"12"},{default:t(()=>[e(F,{clearable:"",modelValue:s(u),"onUpdate:modelValue":[a[0]||(a[0]=o=>q(u)?u.value=o:null),j],label:"Mentee Name",items:s(p),"item-props":o=>{var y,C;return{title:((y=o.client)==null?void 0:y.first_name)+" "+((C=o.client)==null?void 0:C.last_name),subtitle:o.client.school_name}},rules:s(P).required,loading:s(d),disabled:s(d)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(h,{cols:"12"},{default:t(()=>[e(F,{clearable:"",modelValue:s(n).engagement_type,"onUpdate:modelValue":a[1]||(a[1]=o=>s(n).engagement_type=o),items:s(g),"item-props":o=>({title:o.name}),"item-value":"id",label:"Engagement Type",rules:s(P).required,loading:s(d),disabled:s(d)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(h,{cols:"12"},{default:t(()=>[e(O,{label:"Notes",modelValue:s(n).notes,"onUpdate:modelValue":a[2]||(a[2]=o=>s(n).notes=o),placeholder:`Please provide a short brief:
What help does your mentee need?
Which subject or topic should the specialist support with?`},null,8,["modelValue"])]),_:1})]),_:1}),e(z,{class:"mt-5 px-0"},{default:t(()=>[e(U,{variant:"tonal",color:"error",type:"button",onClick:a[3]||(a[3]=o=>m("close"))},{default:t(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),b(" Close ")]),_:1}),e(L),e(U,{variant:"tonal",color:"success",type:"submit"},{default:t(()=>[b(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}},se=r("div",{class:"d-flex justify-between align-center"},[r("div",{class:"w-100"},[r("h4",null,"Program List")])],-1),oe=r("thead",null,[r("tr",null,[r("th",{class:"text-uppercase",width:"1%"}," # "),r("th",{class:"text-uppercase text-center"},"Student"),r("th",{class:"text-uppercase text-center"},"School Name"),r("th",{class:"text-uppercase text-center"},"Engagement Type"),r("th",{class:"text-uppercase text-center"},"#")])],-1),ne={key:0},re={key:0},ue={key:1},ie={key:1},de=r("tr",null,[r("td",{colspan:"6",class:"text-center"}," Sorry, no data found. ")],-1),ce=[de],me={class:"d-flex justify-center mt-5"},je={__name:"request",setup(N){const v=i(!1),m=i(!1),d=i(!1),f=i(1),g=i(),p=i(),u=i([]),n=i([]),c=async()=>{v.value=!0;try{const V="api/v1/request",l="?page="+f.value,a=p.value?"&keyword="+p.value:"",o=await R.get(V+l+a);o&&(u.value=o,g.value=o.last_page)}catch(V){console.log(V)}finally{v.value=!1}},w=async()=>{f.value=1,await c()},j=V=>{n.value=V,d.value=!0};return Y(()=>{c()}),(V,l)=>(_(),S(A,null,{default:t(()=>[e(K,null,{default:t(()=>[se]),_:1}),e(B,null,{default:t(()=>[e(T,{class:"my-1 justify-space-between"},{default:t(()=>[e(h,{md:"3",cols:"12"},{default:t(()=>[e(Z,{label:"Search",density:"compact",modelValue:s(p),"onUpdate:modelValue":l[0]||(l[0]=a=>q(p)?p.value=a:null),"single-line":"",loading:s(v),disabled:s(v),onChange:w},null,8,["modelValue","loading","disabled"])]),_:1}),e(h,{md:"1",cols:"12",class:"text-end"},{default:t(()=>[e($,{activator:"parent",location:"start"},{default:t(()=>[b("New Request")]),_:1}),e(U,{density:"compact",color:"info",icon:"ri-add-line",border:"",onClick:l[1]||(l[1]=a=>m.value=!0)})]),_:1})]),_:1}),e(E,{modelValue:s(m),"onUpdate:modelValue":l[3]||(l[3]=a=>q(m)?m.value=a:null),width:"auto",persistent:""},{default:t(()=>[e(ae,{onClose:l[2]||(l[2]=a=>m.value=!1),onReload:c})]),_:1},8,["modelValue"]),e(E,{modelValue:s(d),"onUpdate:modelValue":l[5]||(l[5]=a=>q(d)?d.value=a:null),width:"auto",persistent:""},{default:t(()=>[e(le,{data:s(n),onClose:l[4]||(l[4]=a=>d.value=!1),onReload:c},null,8,["data"])]),_:1},8,["modelValue"]),s(v)?(_(),S(Q,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(_(),S(ee,{key:1,class:"table-responsive"},{default:t(()=>{var a,o;return[oe,((o=(a=s(u))==null?void 0:a.data)==null?void 0:o.length)>0?(_(),x("tbody",ne,[(_(!0),x(H,null,J(s(u).data,(y,C)=>(_(),x("tr",{key:C},[r("th",null,D(parseInt(C)+1),1),r("th",null,D(y.student_name),1),r("th",null,D(y.student_school),1),r("th",null,D(y.engagement_type),1),r("th",null,[y.timesheet_id?(_(),x("div",ue,[e($,{activator:"parent",location:"start"},{default:t(()=>[b("Already Generated Timesheet")]),_:1}),e(I,{color:"success"},{default:t(()=>[e(k,{icon:"ri-check-line",color:"success"})]),_:1})])):(_(),x("div",re,[e($,{activator:"parent",location:"start"},{default:t(()=>[b("Cancel Request")]),_:1}),e(I,{class:"cursor-pointer",onClick:M(pe=>j(y),["prevent"])},{default:t(()=>[e(k,{icon:"ri-close-line",color:"error"})]),_:2},1032,["onClick"])]))])]))),128))])):(_(),x("tfoot",ie,ce))]}),_:1})),r("div",me,[e(te,{modelValue:s(f),"onUpdate:modelValue":l[6]||(l[6]=a=>q(f)?f.value=a:null),length:s(g),"total-visible":4,color:"primary",density:"compact","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1}))}};export{je as default};
