import{_ as ye}from"./DeleteHandler.vue_vue_type_script_setup_true_lang-BtDtjpPX.js";import{r as h,l as Z,o as y,f as Y,w as a,b as t,Z as oe,W as z,u as e,v as I,Y as P,V as x,j as C,m as ne,A as N,s as U,ap as ie,e as de,a as l,x as Q,c as q,F as he,X as be,t as v,h as re,z as Ve,aq as ke,k as le,$ as we,P as xe,i as De,ar as $e,as as Ce,at as ge}from"./main-DLK4PCY5.js";import{r as B}from"./rules-B5G8qOzK.js";import{a as A,c as ue,V as F,b as W,d as se,e as Te}from"./VCard-Cu6R_28A.js";import{V as ce}from"./VForm-BBnkG8-R.js";import{V as K,a as T}from"./VRow-Dh-de3HZ.js";import{V as fe}from"./VTextarea-CiJHFblk.js";import{V as X}from"./VDialog-CfSAOFGP.js";import{a as pe,V as J}from"./VTable-C9xCbNdt.js";import{T as ee}from"./index-DCmnx-Az.js";import{V as Me}from"./VCheckbox-DLYdC5Gg.js";import{V as te}from"./VAutocomplete-0hME6nLp.js";import{V as Se}from"./VDivider-C06oIVOX.js";import{V as Ye,a as ae,b as Ue}from"./VList-B_84BKwF.js";import"./VAvatar-DYLNWjmh.js";import"./VImg-DPq2q_is.js";import"./VTooltip-Cgdfgbf4.js";import"./VCheckboxBtn-CsMV8DSQ.js";import"./VSelectionControl-Dfezxlcg.js";import"./VSlideGroup-DNylPZZt.js";import"./ssrBoot-CKf2ZAfC.js";const je={__name:"activity-add",props:{id:String},emits:["close","reload"],setup(L,{emit:M}){const m=L,k=M,i=h(!1),b=h(),s=h({activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}),_=()=>{s.value={activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}},D=async()=>{const{valid:w}=await b.value.validate();if(w){i.value=!0;try{const n=await N.post("api/v1/timesheet/"+m.id+"/activity",s.value);n&&U("success",n.message,"bottom-end")}catch(n){U("error",n.response.data.errors,"bottom-end")}finally{_(),i.value=!1,k("reload"),k("close")}}};return(w,n)=>{const S=Z("DialogCloseBtn"),c=Z("VDateInput");return y(),Y(F,{title:"New Activity"},{default:a(()=>[t(S,{variant:"text",size:"default",onClick:n[0]||(n[0]=o=>k("close"))}),t(A,null,{default:a(()=>[t(ce,{onSubmit:oe(D,["prevent"]),ref_key:"formData",ref:b,"validate-on":"input"},{default:a(()=>[t(K,null,{default:a(()=>[t(T,{cols:"12",class:"d-none"},{default:a(()=>[t(z,{density:"compact",modelValue:e(s).activity,"onUpdate:modelValue":n[1]||(n[1]=o=>e(s).activity=o),label:"Activity Name",placeholder:"Activity",loading:e(i),disabled:e(i)},null,8,["modelValue","loading","disabled"])]),_:1}),t(T,{cols:"12"},{default:a(()=>[t(fe,{density:"compact",modelValue:e(s).description,"onUpdate:modelValue":n[2]||(n[2]=o=>e(s).description=o),label:"Meeting Discussion",placeholder:"Meeting Discussion",loading:e(i),disabled:e(i),rules:e(B).required},null,8,["modelValue","loading","disabled","rules"])]),_:1}),t(T,{md:"6",cols:"12"},{default:a(()=>[t(c,{density:"compact",modelValue:e(s).date,"onUpdate:modelValue":n[3]||(n[3]=o=>e(s).date=o),label:"Date",placeholder:"Select Date","prepend-icon":"",loading:e(i),disabled:e(i),rules:e(B).required},null,8,["modelValue","loading","disabled","rules"])]),_:1}),t(T,{md:"3",cols:"6"},{default:a(()=>[t(z,{density:"compact",type:"time",modelValue:e(s).start_time,"onUpdate:modelValue":n[4]||(n[4]=o=>e(s).start_time=o),label:"Start Time",placeholder:"Start Time",rules:e(B).required,class:"mb-3",loading:e(i),disabled:e(i),onChange:n[5]||(n[5]=o=>e(s).start_date=e(I)(e(s).date).format("YYYY-MM-DD")+" "+e(s).start_time+":00")},null,8,["modelValue","rules","loading","disabled"])]),_:1}),t(T,{md:"3",cols:"6"},{default:a(()=>[t(z,{density:"compact",type:"time",modelValue:e(s).end_time,"onUpdate:modelValue":n[6]||(n[6]=o=>e(s).end_time=o),label:"End Time",placeholder:"End Time",loading:e(i),disabled:e(i),onChange:n[7]||(n[7]=o=>e(s).end_date=e(I)(e(s).date).format("YYYY-MM-DD")+" "+e(s).end_time+":00")},null,8,["modelValue","loading","disabled"])]),_:1}),t(T,{md:"12",cols:"12"},{default:a(()=>[t(z,{density:"compact",type:"text",modelValue:e(s).meeting_link,"onUpdate:modelValue":n[8]||(n[8]=o=>e(s).meeting_link=o),label:"Meeting Link",placeholder:"Meeting Link",loading:e(i),disabled:e(i)},null,8,["modelValue","loading","disabled"])]),_:1})]),_:1}),t(ue,{class:"mt-5"},{default:a(()=>[t(P,{variant:"tonal",type:"button",color:"error",loading:e(i),disabled:e(i),onClick:n[9]||(n[9]=o=>k("close"))},{default:a(()=>[t(x,{icon:"ri-close-line",class:"me-3"}),C(" Close ")]),_:1},8,["loading","disabled"]),t(ne),t(P,{variant:"tonal",type:"submit",color:"success",loading:e(i),disabled:e(i)},{default:a(()=>[C(" Save "),t(x,{icon:"ri-save-line",class:"ms-3"})]),_:1},8,["loading","disabled"])]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Ne={__name:"activity-edit",props:{timesheet_id:Number,activity:String},emits:["close","reload"],setup(L,{emit:M}){const m=h(!1),k=h(),i=L,b=M,s=ie("updateReload"),_=h({activity:i==null?void 0:i.activity.activity,description:i==null?void 0:i.activity.description,date:new Date(i==null?void 0:i.activity.start_date),start_time:i==null?void 0:i.activity.start_time,end_time:i==null?void 0:i.activity.end_time,start_date:I(i==null?void 0:i.activity.start_date).format("YYYY-MM-DD")+" "+(i==null?void 0:i.activity.start_time)+":00",end_date:(i==null?void 0:i.activity.end_time)!=0?I(i==null?void 0:i.activity.start_date).format("YYYY-MM-DD")+" "+(i==null?void 0:i.activity.end_time)+":00":null,meeting_link:i==null?void 0:i.activity.meeting_link}),D=async()=>{var n,S;const{valid:w}=await k.value.validate();if(w){m.value=!0;try{_.value.start_date=I(_.value.date).format("YYYY-MM-DD")+" "+_.value.start_time+":00",_.value.end_date=I(_.value.date).format("YYYY-MM-DD")+" "+_.value.end_time+":00";const c=await N.put("api/v1/timesheet/"+i.timesheet_id+"/activity/"+i.activity.id,_.value);c&&(U("success",c.message,"bottom-end"),b("reload"))}catch(c){if((S=(n=c==null?void 0:c.response)==null?void 0:n.data)!=null&&S.errors){const o=c.response.data.errors;let u="Validation errors:";if(typeof o!="string"){for(const r in o)o.hasOwnProperty(r)&&(u+=`
${r}: ${o[r].join(", ")}`);U("error",u,"bottom-end")}else U("error",c.response.data.errors,"bottom-end")}}finally{m.value=!1,b("close"),setTimeout(()=>{s(!0)},3e3)}}};return(w,n)=>{const S=Z("DialogCloseBtn"),c=Z("VDateInput");return y(),Y(F,{title:"Edit Activity"},{default:a(()=>[t(S,{variant:"text",size:"default",onClick:n[0]||(n[0]=o=>b("close"))}),t(A,null,{default:a(()=>[t(ce,{onSubmit:oe(D,["prevent"]),ref_key:"formData",ref:k,"validate-on":"input"},{default:a(()=>[t(K,null,{default:a(()=>[t(T,{cols:"12",class:"d-none"},{default:a(()=>[t(z,{density:"compact",modelValue:e(_).activity,"onUpdate:modelValue":n[1]||(n[1]=o=>e(_).activity=o),label:"Activity Name",placeholder:"Activity",disabled:e(m),loading:e(m)},null,8,["modelValue","disabled","loading"])]),_:1}),t(T,{cols:"12"},{default:a(()=>[t(fe,{density:"compact",modelValue:e(_).description,"onUpdate:modelValue":n[2]||(n[2]=o=>e(_).description=o),label:"Meeting Discussion",rules:e(B).required,placeholder:"Meeting Discussion",disabled:e(m),loading:e(m)},null,8,["modelValue","rules","disabled","loading"])]),_:1}),t(T,{md:"6",cols:"12"},{default:a(()=>[t(c,{density:"compact",modelValue:e(_).date,"onUpdate:modelValue":n[3]||(n[3]=o=>e(_).date=o),label:"Date",placeholder:"Select Date","prepend-icon":"",disabled:e(m),loading:e(m),rules:e(B).required},null,8,["modelValue","disabled","loading","rules"])]),_:1}),t(T,{md:"3",cols:"6"},{default:a(()=>[t(z,{density:"compact",type:"time",modelValue:e(_).start_time,"onUpdate:modelValue":n[4]||(n[4]=o=>e(_).start_time=o),label:"Start Time",rules:e(B).required,placeholder:"Start Time",disabled:e(m),loading:e(m),onChange:n[5]||(n[5]=o=>e(_).start_date=e(I)(i==null?void 0:i.activity.date).format("YYYY-MM-DD")+" "+e(_).start_time+":00")},null,8,["modelValue","rules","disabled","loading"])]),_:1}),t(T,{md:"3",cols:"6"},{default:a(()=>[t(z,{density:"compact",type:"time",modelValue:e(_).end_time,"onUpdate:modelValue":n[6]||(n[6]=o=>e(_).end_time=o),label:"End Time",placeholder:"End Time",disabled:e(m),loading:e(m),onChange:n[7]||(n[7]=o=>e(_).end_date=e(I)(i==null?void 0:i.activity.date).format("YYYY-MM-DD")+" "+e(_).end_time+":00")},null,8,["modelValue","disabled","loading"])]),_:1}),t(T,{md:"12",cols:"12"},{default:a(()=>[t(z,{density:"compact",type:"text",modelValue:e(_).meeting_link,"onUpdate:modelValue":n[8]||(n[8]=o=>e(_).meeting_link=o),label:"Meeting Link",placeholder:"Meeting Link",disabled:e(m),loading:e(m)},null,8,["modelValue","disabled","loading"])]),_:1})]),_:1}),t(ue,{class:"mt-5"},{default:a(()=>[t(P,{variant:"tonal",color:"error",disabled:e(m),loading:e(m),onClick:n[9]||(n[9]=o=>b("close"))},{default:a(()=>[t(x,{icon:"ri-close-line",class:"me-3"}),C(" Close ")]),_:1},8,["disabled","loading"]),t(ne),t(P,{variant:"tonal",color:"success",type:"submit",disabled:e(m),loading:e(m)},{default:a(()=>[C(" Save "),t(x,{icon:"ri-save-line",class:"ms-3"})]),_:1},8,["disabled","loading"])]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Pe={class:"d-flex justify-between align-center"},Le=l("div",{class:"w-100"},[l("h4",null,"Activity")],-1),Ae=l("thead",null,[l("tr",null,[l("th",{class:"text-uppercase",width:"1%"}," No "),l("th",{class:"text-uppercase text-center"},"Meeting Discussion"),l("th",{class:"text-uppercase text-center"},"Date"),l("th",{class:"text-uppercase text-center"},"Start Time"),l("th",{class:"text-uppercase text-center"},"End Time"),l("th",{class:"text-uppercase text-center"},"Time Spent"),l("th",{class:"text-uppercase text-center"},"Status"),l("th",{class:"text-uppercase text-end"},"#")])],-1),qe={key:0},Be=l("tr",null,[l("th",{colspan:"8",class:"text-center"}," No Activity Found ")],-1),Ee=[Be],Re={key:1},Ie={width:"1%"},ze={class:"d-none"},Fe={class:"text-start"},Oe={class:"text-center"},He={class:"text-center"},Ge={class:"text-center"},Je={class:"text-end"},We=["href"],Xe={__name:"timesheet-detail",props:{id:String},setup(L){const M=L,m=ie("updateReload"),k=h([]),i=h(!1),b=h([{add:!1,edit:!1,delete:!1}]),s=h([]),_=async()=>{i.value=!0;try{const c=await N.get("api/v1/timesheet/"+M.id+"/activities");c&&(k.value=c)}catch(c){console.error(c)}finally{i.value=!1}},D=c=>{b.value[c]?b.value[c]=!1:b.value[c]=!0},w=(c,o)=>{s.value=o,D(c)},n=async()=>{var c,o,u;try{const r=await N.delete("api/v1/timesheet/"+M.id+"/activity/"+s.value.id);r&&(U("success",r.message,"bottom-end"),D("delete"))}catch(r){((c=r.response)==null?void 0:c.status)==400&&U("error",(u=(o=r.response)==null?void 0:o.data)==null?void 0:u.errors,"bottom-end")}finally{_(),m(!0)}},S=async c=>{var o,u;try{const r=await N.patch("api/v1/timesheet/"+M.id+"/activity/"+c.id,c);r&&U("success",r.message,"bottom-end")}catch(r){if((u=(o=r==null?void 0:r.response)==null?void 0:o.data)!=null&&u.errors){const d=r.response.data.errors;let p="Validation errors:";if(typeof d!="string"){for(const f in d)d.hasOwnProperty(f)&&(p+=`
${f}: ${d[f].join(", ")}`);U("error",p,"bottom-end")}else U("error",r.response.data.errors,"bottom-end")}}finally{_(),m(!0)}};return de(()=>{_()}),(c,o)=>(y(),Y(F,null,{default:a(()=>[t(W,null,{default:a(()=>[l("div",Pe,[Le,Q((y(),Y(P,{onClick:o[0]||(o[0]=u=>D("add"))},{default:a(()=>[t(x,{icon:"ri-add-line"})]),_:1})),[[ee,"New Activity","start"]]),t(X,{modelValue:e(b).add,"onUpdate:modelValue":o[2]||(o[2]=u=>e(b).add=u),"max-width":"600",persistent:""},{default:a(()=>[t(je,{id:M.id,onClose:o[1]||(o[1]=u=>D("add")),onReload:_},null,8,["id"])]),_:1},8,["modelValue"])])]),_:1}),t(A,null,{default:a(()=>[e(i)?(y(),Y(J,{key:1,type:"table"})):(y(),Y(pe,{key:0,class:"text-no-wrap","max-height":"400","fixed-header":""},{default:a(()=>{var u;return[Ae,((u=e(k))==null?void 0:u.length)==0?(y(),q("tbody",qe,Ee)):(y(),q("tbody",Re,[(y(!0),q(he,null,be(e(k),(r,d)=>(y(),q("tr",{key:d},[l("td",Ie,v(d+1),1),l("td",ze,v(r.activity),1),l("td",Fe,v(r.description),1),l("td",null,v(c.$moment(r.start_date).format("dddd"))+", "+v(c.$moment(r.start_date).format("MMM Do YYYY")),1),l("td",Oe,v(r.start_time),1),l("td",He,v(r.end_time),1),l("td",Ge,[t(x,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),C(" "+v(r.estimate)+" Minutes ",1)]),l("td",null,[Q(t(Me,{color:"success",modelValue:r.status,"onUpdate:modelValue":[p=>r.status=p,p=>S(r)],value:!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue"]),[[ee,r.status?"Completed":"Not Yet","start"]])]),l("td",Je,[r.meeting_link?(y(),Y(P,{key:0,color:"primary",density:"compact",class:"me-1"},{default:a(()=>[l("a",{href:r.meeting_link,target:"_blank",class:"bg-primary"},[t(x,{icon:"ri ri-link"}),C(" Join ")],8,We)]),_:2},1024)):re("",!0),Q((y(),Y(P,{color:"warning",density:"compact",class:"me-1",onClick:p=>w("edit",r)},{default:a(()=>[t(x,{icon:"ri-edit-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Edit Activity","start"]]),Q((y(),Y(P,{color:"error",density:"compact",onClick:p=>w("delete",r)},{default:a(()=>[t(x,{icon:"ri-delete-bin-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Delete Activity","start"]])])]))),128))]))]}),_:1}))]),_:1}),t(X,{modelValue:e(b).edit,"onUpdate:modelValue":o[4]||(o[4]=u=>e(b).edit=u),"max-width":"600",persistent:""},{default:a(()=>[t(Ne,{timesheet_id:M==null?void 0:M.id,activity:e(s),onClose:o[3]||(o[3]=u=>D("edit")),onReload:_},null,8,["timesheet_id","activity"])]),_:1},8,["modelValue"]),t(X,{modelValue:e(b).delete,"onUpdate:modelValue":o[6]||(o[6]=u=>e(b).delete=u),"max-width":"400",persistent:""},{default:a(()=>[t(ye,{title:"activity",onClose:o[5]||(o[5]=u=>D("delete")),onDelete:n})]),_:1},8,["modelValue"])]),_:1}))}},Ze={__name:"timesheet-transfer",props:{timesheet_id:Number,require:String},emits:["close","reload"],setup(L,{emit:M}){const m=h(),k=L,i=M,b=h([]),s=h([]),_=h([]),D=k.require.toLowerCase(),w=h(!1),n=h({mentortutor_email:null,subject_id:null}),S=async()=>{const u="api/v1/user/mentor-tutors?role="+D;w.value=!0;try{const r=await N.get(u);r&&(b.value=r)}catch(r){console.error(r)}finally{w.value=!1}},c=async(u,r=null)=>{if(n.value.subject_id=null,D=="mentor")n.value.subject_id=u[0].subjects[0].id;else{w.value=!0;try{const d=await N.get("api/v1/user/mentor-tutors/"+r+"/subjects");d&&(_.value=d)}catch(d){console.error(d)}finally{w.value=!1}}},o=async()=>{var d,p;i("close"),n.value.mentortutor_email=s.value.email;const{valid:u}=await m.value.validate(),r=await ke("Are you sure you want to change the owner?");if(u&&r){w.value=!0;try{const f=await N.patch("api/v1/timesheet/"+k.timesheet_id+"/void/",n.value);f&&(U("success",f.message,"bottom-end"),le.push({path:"/admin/timesheet/"+f.data.timesheet_id}),n.value={mentortutor_email:null,subject_id:null},s.value=[],setTimeout(()=>{le.go(0)},1e3))}catch(f){if(console.log(f),(p=(d=f==null?void 0:f.response)==null?void 0:d.data)!=null&&p.errors){const R=f.response.data.errors;U("error",R,"bottom-end")}}finally{i("close"),w.value=!1}}};return de(()=>{S()}),(u,r)=>(y(),Y(F,{class:"mx-auto my-8",elevation:"16",width:"450"},{default:a(()=>[t(ce,{ref_key:"formData",ref:m,"validate-on":"input",onSubmit:oe(o,["prevent"])},{default:a(()=>[t(se,null,{default:a(()=>[t(W,null,{default:a(()=>[C(" Timesheet Ownership Transfer ")]),_:1}),t(Te,null,{default:a(()=>[C(" Change Timesheet Handler ")]),_:1})]),_:1}),t(A,null,{default:a(()=>[t(K,null,{default:a(()=>{var d;return[t(T,{md:"12"},{default:a(()=>[t(te,{clearable:"",modelValue:e(s),"onUpdate:modelValue":[r[0]||(r[0]=p=>Ve(s)?s.value=p:null),r[1]||(r[1]=p=>c(e(s).roles,e(s).uuid))],label:"Mentor/Tutor",items:e(b),"item-props":p=>({title:p.full_name,subtitle:p.roles.map(f=>f.name).join(", ")}),rules:e(B).required,loading:e(w),disabled:e(w)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),((d=k.require)==null?void 0:d.toLowerCase())=="tutor"?(y(),Y(T,{key:0,md:"12"},{default:a(()=>[t(te,{clearable:"",modelValue:e(n).subject_id,"onUpdate:modelValue":r[2]||(r[2]=p=>e(n).subject_id=p),label:"Subject Tutoring",items:e(_),"item-title":"subject","item-value":"id",loading:e(w),disabled:e(w),rules:e(B).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1})):re("",!0)]}),_:1})]),_:1}),t(ue,{class:"mx-3 mb-3"},{default:a(()=>[t(P,{color:"error",onClick:r[3]||(r[3]=d=>i("close"))},{default:a(()=>[t(x,{icon:"ri-close-line",class:"me-3"}),C(" Close ")]),_:1}),t(ne),t(P,{color:"success",type:"submit"},{default:a(()=>[C(" Save Changes "),t(x,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1}))}},Ke={__name:"user-edit",props:["id","item","package_id"],emits:["close","reload"],setup(L,{emit:M}){var f,R,O,E,H,G;const m=L,k=M,i=h([]),b=h([]),s=h([]),_=h([]),D=h(!1),w=h(!0),n=h(!0),S=h(),c=h({mentortutor_email:(f=m.item)==null?void 0:f.tutormentor_email,subject_id:(R=m.item)==null?void 0:R.subject_id,inhouse_id:(O=m.item)==null?void 0:O.inhouse_id,package_id:m.package_id,duration:(E=m.item)==null?void 0:E.duration,notes:(H=m.item)==null?void 0:H.notes,pic_id:(G=m.item)==null?void 0:G.pic_id}),o=async($=!1)=>{n.value=!0;const V=$?"api/v1/user/mentor-tutors?inhouse=true":"api/v1/user/mentor-tutors";try{const j=await N.get(V);j&&($?_.value=Object.values(j):i.value=j)}catch(j){console.error(j)}finally{n.value=!1}},u=async()=>{n.value=!0;try{const $=await N.get("api/v1/package/component/list");$&&(b.value=$)}catch($){console.error($)}finally{n.value=!1}},r=()=>{const $=c.value.package_id,V=b.value.findIndex(g=>g.id===$);let j=b.value[V];j.detail?(D.value=!0,c.value.duration=j.detail):(D.value=!1,c.value.duration=null)},d=async()=>{n.value=!0;try{const $=await N.get("api/v1/user/component/list");$&&(s.value=$)}catch($){console.error($)}finally{n.value=!1}},p=async()=>{var V,j;const{valid:$}=await S.value.validate();if($)try{const g=await N.put("api/v1/timesheet/"+m.id+"/update",c.value);g&&(c.value={mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[]},U("success",g.message,"bottom-end"),k("reload"))}catch(g){if((j=(V=g==null?void 0:g.response)==null?void 0:V.data)!=null&&j.errors){const me=g.response.data.errors;let ve="Validation errors:";for(const _e in me)me.hasOwnProperty(_e)&&(ve+=`
${_e}: ${me[_e].join(", ")}`);U("error",ve,"bottom-end")}}finally{k("close")}};return de(()=>{o(!0),u(),d(),setTimeout(()=>{w.value=!1},2e3)}),($,V)=>{const j=Z("DialogCloseBtn");return y(),Y(F,{title:"Edit Detail"},{default:a(()=>[t(j,{variant:"text",size:"default",onClick:V[0]||(V[0]=g=>k("close"))}),t(A,null,{default:a(()=>[t(ce,{onSubmit:oe(p,["prevent"]),ref_key:"formData",ref:S,"validate-on":"input"},{default:a(()=>[t(K,null,{default:a(()=>[t(T,{md:"8"},{default:a(()=>[t(te,{density:"compact",clearable:"",label:"Package",modelValue:e(c).package_id,"onUpdate:modelValue":[V[1]||(V[1]=g=>e(c).package_id=g),r],items:e(b),"item-props":g=>({title:g.package!=null?g.type_of+" - "+g.package:g.type_of}),"item-value":"id",rules:e(B).required,loading:e(n),disabled:e(n)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),t(T,{md:"4"},{default:a(()=>[t(z,{type:"number",clearable:"",label:+e(c).duration/60?"Minutes ("+e(c).duration/60+" Hours)":"Minutes",readonly:e(D),modelValue:e(c).duration,"onUpdate:modelValue":V[2]||(V[2]=g=>e(c).duration=g),rules:e(B).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),t(T,{md:"12"},{default:a(()=>[t(te,{density:"compact",clearable:"",modelValue:e(c).inhouse_id,"onUpdate:modelValue":V[3]||(V[3]=g=>e(c).inhouse_id=g),label:"Inhouse Mentor/Tutor",items:e(_),"item-props":g=>({title:g.full_name}),"item-value":"uuid",rules:e(B).required,loading:e(n),disabled:e(n)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),t(T,{md:"12"},{default:a(()=>[t(te,{density:"compact",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:e(c).pic_id,"onUpdate:modelValue":V[4]||(V[4]=g=>e(c).pic_id=g),items:e(s),"item-title":"full_name","item-value":"id",rules:e(B).required,loading:e(n),disabled:e(n)},null,8,["modelValue","items","rules","loading","disabled"])]),_:1}),t(T,{md:"12"},{default:a(()=>[t(fe,{density:"compact",label:"Notes",modelValue:e(c).notes,"onUpdate:modelValue":V[5]||(V[5]=g=>e(c).notes=g)},null,8,["modelValue"])]),_:1})]),_:1}),t(Se,{class:"my-3 px-0"}),t(ue,null,{default:a(()=>[t(P,{variant:"tonal",color:"error",type:"button",onClick:V[6]||(V[6]=g=>k("close"))},{default:a(()=>[t(x,{icon:"ri-close-line",class:"me-3"}),C(" Close ")]),_:1}),t(ne),t(P,{variant:"tonal",color:"success",type:"submit"},{default:a(()=>[C(" Save "),t(x,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Qe={class:"w-100"},et={class:"mt-3 font-weight-light"},tt=l("hr",{class:"my-2"},null,-1),lt={key:0},at=l("tr",{class:"bg-secondary"},[l("td",null,"Name"),l("td",null,"School"),l("td",null,"Grade")],-1),st={key:1},it=l("td",{width:"20%"},"Name",-1),ot=l("td",{width:"1%"},":",-1),nt=l("td",null,"School Name",-1),dt=l("td",{width:"1%"},":",-1),rt=l("td",null,"Grade",-1),ut=l("td",{width:"1%"},":",-1),ct=l("td",null,"Email",-1),mt=l("td",{width:"1%"},":",-1),_t={class:"mt-5 font-weight-light"},pt=l("hr",{class:"my-2"},null,-1),ft={width:"30%"},vt=l("td",{width:"1%"},":",-1),gt={key:0},yt={key:1},ht=l("td",null,"Package",-1),bt=l("td",{width:"1%"},":",-1),Vt=l("td",null,"Person in Charge",-1),kt=l("td",{width:"1%"},":",-1),wt=l("td",{width:"1%"},":",-1),xt=l("td",{width:"1%"},":",-1),Dt=l("td",null,"Notes",-1),$t=l("td",{width:"1%"},":",-1),Ct=l("td",null,"Update On",-1),Tt=l("td",{width:"1%"},":",-1),Mt={class:"d-flex align-end w-100"},St={class:"m-0 mb-1 text-white"},Yt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Ut={class:"text-end w-100"},jt={class:"d-flex align-end w-100"},Nt={class:"m-0 mb-1 text-white"},Pt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Lt={class:"text-end w-100"},At={class:"d-flex align-end w-100"},qt={class:"m-0 mb-1 text-white"},Bt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Et={class:"text-end w-100"},Rt={__name:"user-detail",props:{id:String,name:String},emits:["void"],setup(L,{emit:M}){const m=L,k=M,i=ie("reloadData"),b=ie("updateReload"),s=h([]),_=h([{edit:!1,void:!1,delete:!1}]),D=h(!1),w=async o=>{var u,r,d;D.value=!0;try{const p=await N.get("api/v1/timesheet/"+o+"/detail");p&&(s.value=p,k("void",p.packageDetails.void))}catch(p){((u=p.response)==null?void 0:u.status)==400&&(U("error",(d=(r=p.response)==null?void 0:r.data)==null?void 0:d.errors,"bottom-end"),le.push("/admin/timesheet")),console.log(p)}finally{D.value=!1}},n=async()=>{var o,u,r;try{const d=await N.delete("api/v1/timesheet/"+m.id+"/delete");d&&(s.value=d,U("success",d.message,"bottom-end"),_.value.delete=!1,le.push("/admin/timesheet/tutoring"))}catch(d){((o=d.response)==null?void 0:o.status)==400&&U("error",(r=(u=d.response)==null?void 0:u.data)==null?void 0:r.errors,"bottom-end")}},S=o=>{_.value[o]?_.value[o]=!1:_.value[o]=!0},c=async(o,u)=>{var r;$e();try{const d=await N.get("api/v1/timesheet/"+o+"/export",{responseType:"blob"});if(d){const p=window.URL.createObjectURL(new Blob([d],{type:'"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"'})),f=document.createElement("a");f.href=p,f.setAttribute("download",`Timesheet_${u}.xlsx`),document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(p),Ce.close()}}catch(d){U("error",(r=d.response)==null?void 0:r.statusText,"bottom-end"),console.log(d)}};return de(()=>{w(m.id)}),we(()=>{i.value&&(w(m.id),b(!1))}),(o,u)=>{const r=Z("router-link");return y(),Y(F,{class:"mb-3"},{default:a(()=>[e(D)?(y(),Y(J,{key:0,type:"heading"})):(y(),Y(W,{key:1,class:"d-flex justify-between align-center"},{default:a(()=>{var d,p,f,R,O;return[l("div",Qe,[t(r,{to:"/admin/timesheet/"+m.name},{default:a(()=>[t(x,{icon:"ri-arrow-left-line",color:"secondary",class:"me-2",size:"25"})]),_:1},8,["to"]),C(" "+v((d=e(s).packageDetails)==null?void 0:d.tutormentor_name)+" | "+v(((f=(p=e(s))==null?void 0:p.packageDetails)==null?void 0:f.package_type)+" - "+((O=(R=e(s))==null?void 0:R.packageDetails)==null?void 0:O.package_name)),1)]),l("div",null,[t(De,{"close-on-content-click":!1,location:"bottom"},{activator:a(({props:E})=>[Q((y(),Y(P,xe({color:"secondary"},E),{default:a(()=>[t(x,{icon:"ri-settings-3-line"})]),_:2},1040)),[[ee,"Settings","start"]])]),default:a(()=>[t(Ye,null,{default:a(()=>[t(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:u[0]||(u[0]=E=>S("edit"))},[t(x,{icon:"ri-pencil-line",class:"me-2"}),C(" Edit TimeSheet ")])]),_:1}),t(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:u[1]||(u[1]=E=>S("void"))},[t(x,{icon:"ri-exchange-2-line",class:"me-2"}),C(" Timesheet Ownership Transfer ")])]),_:1}),t(ae,null,{default:a(()=>[t(Ue,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:u[2]||(u[2]=E=>{var H,G,$,V,j,g;return c(m.id,((G=(H=e(s))==null?void 0:H.packageDetails)==null?void 0:G.package_type)+"-"+((V=($=e(s))==null?void 0:$.packageDetails)==null?void 0:V.package_name)+"_"+((g=(j=e(s))==null?void 0:j.packageDetails)==null?void 0:g.tutormentor_name))})},[t(x,{icon:"ri-download-line",class:"me-2"}),C(" Download TimeSheet ")])]),_:1})]),_:1}),t(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:u[3]||(u[3]=E=>S("delete"))},[t(x,{icon:"ri-delete-bin-line",class:"me-2"}),C(" Delete TimeSheet ")])]),_:1})]),_:1})]),_:1})])]}),_:1})),t(A,null,{default:a(()=>[e(D)?(y(),Y(K,{key:1},{default:a(()=>[t(T,{md:"7"},{default:a(()=>[t(J,{type:"heading, paragraph, heading, paragraph",class:"mb-3"})]),_:1}),t(T,{md:"5"},{default:a(()=>[t(J,{type:"text@3",color:"#16B1FF",class:"mb-3"}),t(J,{type:"text@3",color:"#91c45e",class:"mb-3"}),t(J,{type:"text@3",color:"#e05e5e",class:"mb-3"})]),_:1})]),_:1})):(y(),Y(K,{key:0,align:"center"},{default:a(()=>[t(T,{md:"7"},{default:a(()=>[l("h4",et,[t(x,{icon:"ri-user-line",size:"17",class:"me-2"}),C(" Basic Profile ")]),tt,t(pe,{density:"compact"},{default:a(()=>{var d,p;return[((d=e(s).clientProfile)==null?void 0:d.length)>1?(y(),q("tbody",lt,[at,(y(!0),q(he,null,be(e(s).clientProfile,f=>(y(),q("tr",null,[l("td",null,v(f.client_name),1),l("td",null,v(f.client_school),1),l("td",null,v(f.client_grade<=12?f.client_grade:"Not High School"),1)]))),256))])):((p=e(s).clientProfile)==null?void 0:p.length)==1?(y(),q("tbody",st,[l("tr",null,[it,ot,l("td",null,v(e(s).clientProfile[0].client_name),1)]),l("tr",null,[nt,dt,l("td",null,v(e(s).clientProfile[0].client_school),1)]),l("tr",null,[rt,ut,l("td",null,v(e(s).clientProfile[0].client_grade<=12?e(s).clientProfile[0].client_grade:"Not High School"),1)]),l("tr",null,[ct,mt,l("td",null,v(e(s).clientProfile[0].client_mail),1)])])):re("",!0)]}),_:1}),l("h4",_t,[t(x,{icon:"ri-bookmark-line",class:"me-2",size:"17"}),C(" Package Details ")]),pt,t(pe,{density:"compact"},{default:a(()=>{var d,p,f,R,O,E,H,G,$,V;return[l("tbody",null,[l("tr",null,[l("td",ft,v(m.name=="tutoring"?"Program Name":"Engagement Type"),1),vt,m.name=="tutoring"?(y(),q("td",gt,v((d=e(s).packageDetails)!=null&&d.free_trial?"[TRIAL]":"")+" "+v((p=e(s).packageDetails)==null?void 0:p.program_name),1)):(y(),q("td",yt,v((f=e(s).packageDetails)==null?void 0:f.engagement_type),1))]),l("tr",null,[ht,bt,l("td",null,v((R=e(s).packageDetails)==null?void 0:R.package_type)+" "+v((O=e(s).packageDetails)!=null&&O.package_name?" - "+((E=e(s).packageDetails)==null?void 0:E.package_name):""),1)]),l("tr",null,[Vt,kt,l("td",null,v((H=e(s).packageDetails)==null?void 0:H.pic_name),1)]),l("tr",null,[l("td",null,v(m.name=="tutoring"?"Tutor":"Mentor")+" Name",1),wt,l("td",null,v((G=e(s).packageDetails)==null?void 0:G.tutormentor_name),1)]),l("tr",null,[l("td",null,"Inhouse "+v(m.name=="tutoring"?"Tutor":"Mentor"),1),xt,l("td",null,v(($=e(s).packageDetails)==null?void 0:$.inhouse_name),1)]),l("tr",null,[Dt,$t,l("td",null,v((V=e(s).editableColumns)==null?void 0:V.notes),1)]),l("tr",null,[Ct,Tt,l("td",null,v(e(I)().format("LLL")),1)])])]}),_:1})]),_:1}),t(T,{md:"5"},{default:a(()=>[t(F,{color:"#16B1FF",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[t(se,null,{default:a(()=>[t(W,{class:"text-white"},{default:a(()=>[C(" Total Minutes of Package ")]),_:1})]),_:1}),t(A,{class:"d-flex justify-between"},{default:a(()=>{var d;return[l("div",Mt,[l("h1",St,v((d=e(s).packageDetails)==null?void 0:d.duration_in_minutes),1),Yt])]}),_:1})]),t(A,null,{default:a(()=>[l("div",Ut,[t(x,{icon:"ri-calendar-schedule-line",size:"60"})])]),_:1})]),_:1}),t(F,{color:"#91c45e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[t(se,null,{default:a(()=>[t(W,{class:"text-white"},{default:a(()=>[C(" Total Minutes Spent ")]),_:1})]),_:1}),t(A,{class:"d-flex justify-between"},{default:a(()=>{var d;return[l("div",jt,[l("h1",Nt,v((d=e(s).packageDetails)==null?void 0:d.time_spent_in_minutes),1),Pt])]}),_:1})]),t(A,null,{default:a(()=>[l("div",Lt,[t(x,{icon:"ri-timer-flash-line",size:"60",color:"white"})])]),_:1})]),_:1}),t(F,{color:"#e05e5e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[t(se,null,{default:a(()=>[t(W,{class:"text-white"},{default:a(()=>[C(" Total Minutes Left ")]),_:1})]),_:1}),t(A,{class:"d-flex justify-between"},{default:a(()=>{var d,p;return[l("div",At,[l("h1",qt,v(((d=e(s).packageDetails)==null?void 0:d.duration_in_minutes)-((p=e(s).packageDetails)==null?void 0:p.time_spent_in_minutes)),1),Bt])]}),_:1})]),t(A,null,{default:a(()=>[l("div",Et,[t(x,{icon:"ri-timer-2-line",size:"60"})])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),t(X,{modelValue:e(_).edit,"onUpdate:modelValue":u[6]||(u[6]=d=>e(_).edit=d),"max-width":"600",persistent:""},{default:a(()=>{var d;return[t(Ke,{item:e(s).editableColumns,package_id:(d=e(s).packageDetails)==null?void 0:d.package_id,id:m.id,onClose:u[4]||(u[4]=p=>S("edit")),onReload:u[5]||(u[5]=p=>w(m.id))},null,8,["item","package_id","id"])]}),_:1},8,["modelValue"]),t(X,{modelValue:e(_).delete,"onUpdate:modelValue":u[8]||(u[8]=d=>e(_).delete=d),"max-width":"400",persistent:""},{default:a(()=>[t(ye,{title:"timesheet",onDelete:n,onClose:u[7]||(u[7]=d=>S("delete"))})]),_:1},8,["modelValue"]),t(X,{modelValue:e(_).void,"onUpdate:modelValue":u[10]||(u[10]=d=>e(_).void=d),"max-width":"400",persistent:""},{default:a(()=>[t(Ze,{timesheet_id:m.id,require:e(s).editableColumns.tutormentor_role,onClose:u[9]||(u[9]=d=>S("void"))},null,8,["timesheet_id","require"])]),_:1},8,["modelValue"])]),_:1})}}},It={class:"h-auto position-relative"},zt={key:0,class:"overlay"},Ft=l("div",{class:"bg-secondary",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9998",width:"100%",opacity:"0.6"}},null,-1),Ot={class:"d-flex align-center justify-center",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9999",width:"100%",opacity:"1"}},Ht={class:"text-center"},Gt=l("h2",{class:"text-white mt-3"},"This Timesheet Has Changed Owner",-1),fl={__name:"timesheet-detail",props:{id:Number,name:String},setup(L){const M=L,m=M.id,k=h(!1),i=h(!1);ge("reloadData",k),ge("updateReload",s=>{k.value=s});const b=s=>{i.value=s};return(s,_)=>(y(),q("div",It,[e(i)=="true"?(y(),q("div",zt,[Ft,l("div",Ot,[l("div",Ht,[t(x,{color:"white",icon:"ri-lock-line",size:"50"}),Gt,t(P,{color:"light",class:"mt-4",onClick:_[0]||(_[0]=D=>e(le).push({path:"/admin/timesheet"+M.name}))},{default:a(()=>[C(" Back to List ")]),_:1})])])])):re("",!0),t(Rt,{id:e(m),name:M.name,onVoid:b},null,8,["id","name"]),t(Xe,{id:e(m)},null,8,["id"])]))}};export{fl as default};
