import{r as m,U as b,e as M,f as x,w as o,A as S,s as q,l as j,o as i,b as t,u as l,z as T,W as E,a as e,t as r,c as v,X as B,F as A,h as W,n as D,V as u,j as p,Y as X}from"./main-zVU3Tu4j.js";import{V as Y,b as G,a as J}from"./VCard-cizFPHoN.js";import{V as I,a as U}from"./VRow-CUXYczn_.js";import{V as K}from"./VAutocomplete-LWzyneEo.js";import{V as O,a as Q}from"./VTable-9dvaU19i.js";import{V as Z}from"./VPagination-JnPSGxc0.js";import{V as $}from"./VBadge-CESyrTnz.js";import{V as F}from"./VTooltip-D7RC9ceD.js";import"./VAvatar-C3o0_N2u.js";import"./VImg-CsmeMsq-.js";import"./VList-CnjcSxdi.js";import"./ssrBoot-mTSZYjJO.js";import"./VDivider-lZip_1AI.js";import"./VCheckboxBtn-CnRMB2gK.js";import"./VSelectionControl-C4v-B3mw.js";import"./VSlideGroup-CamyHkJV.js";const ee=e("div",{class:"d-flex justify-between align-center"},[e("div",{class:"w-100"},[e("h4",null,"Timesheet List")])],-1),te=e("th",{class:"text-uppercase",width:"1%"}," No ",-1),ae=e("th",{class:"text-uppercase text-center"},"Student Name",-1),se=e("th",{class:"text-uppercase text-center"},"Program Name",-1),oe=e("th",{class:"text-uppercase text-center"},"Package",-1),le={class:"text-uppercase text-center"},re=e("th",{class:"text-uppercase text-center"},"PIC",-1),ne=e("th",{class:"text-uppercase text-center"},"Total Hours",-1),ce=e("th",{class:"text-uppercase text-center"},"Used",-1),ie=e("th",{class:"text-uppercase text-center"},"#",-1),de={class:"text-start"},ue={class:"text-left"},pe={class:"text-left"},_e={class:"text-left"},me={class:"text-left"},ge={key:0},fe=e("tr",null,[e("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),he=[fe],Ve={class:"d-flex justify-center mt-5"},Ie={__name:"timesheet",setup(xe){const g=m(1),P=m(b.getUser().role_detail[0].role.toLowerCase()),L=m(),f=m(),w=m([]),_=m(!1),N=m([]),h=m(),k=async()=>{var V,a;const y="?page="+g.value,n=f.value?"&keyword="+f.value:"",d=h.value?"&package_id="+h.value:"",C="&paginate=true",s=P.value=="tutor"?"":"&is_subject_specialist=true";try{_.value=!0;const c=await S.get("api/v1/timesheet/list"+y+n+d+s+C);c&&(g.value=c.current_page,L.value=c.last_page,w.value=c),_.value=!1}catch(c){q("error",(a=(V=c.response)==null?void 0:V.data)==null?void 0:a.message,"bottom-end"),console.error(c),_.value=!1}},H=async()=>{const y=b.getUser().role_detail[0].role.toLowerCase()=="external mentor"?"mentor":b.getUser().role_detail[0].role.toLowerCase(),n=b.getUser().role_detail.length==1?"?category="+y:"";try{const d=await S.get("api/v1/package/component/list"+n);d&&(N.value=d)}catch(d){console.error(d)}},R=async()=>{g.value=1,await k()};return M(()=>{k(),H()}),(y,n)=>{const d=j("VText"),C=j("router-link");return i(),x(Y,null,{default:o(()=>[t(G,null,{default:o(()=>[ee]),_:1}),t(J,null,{default:o(()=>[t(I,{class:"my-1 justify-space-between"},{default:o(()=>[t(U,{cols:"12",md:"6"},{default:o(()=>[t(I,null,{default:o(()=>[t(U,{cols:"12",md:"6"},{default:o(()=>[t(K,{clearable:"true",modelValue:l(h),"onUpdate:modelValue":[n[0]||(n[0]=s=>T(h)?h.value=s:null),k],label:"Package",items:l(N),"item-props":s=>({title:s.package!=null?s.type_of+" - "+s.package:s.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:l(_),disabled:l(_)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),t(U,{cols:"12",md:"3"},{default:o(()=>[t(E,{loading:l(_),disabled:l(_),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:l(f),"onUpdate:modelValue":n[1]||(n[1]=s=>T(f)?f.value=s:null),onChange:R},null,8,["loading","disabled","modelValue"])]),_:1})]),_:1}),l(_)?(i(),x(O,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(i(),x(Q,{key:1,class:"text-no-wrap"},{default:o(()=>{var s,V;return[e("thead",null,[e("tr",null,[te,ae,se,oe,e("th",le,r(l(P)=="tutor"?"Tutor":"Mentor"),1),re,ne,ce,ie])]),e("tbody",null,[(i(!0),v(A,null,B(l(w).data,(a,c)=>(i(),v("tr",{key:c,class:D(a.void=="true"?"bg-secondary":"")},[e("td",null,r(parseInt(c)+1),1),e("td",{class:D(a.group?"cursor-pointer text-left":"text-left")},[a.group?(i(),x(d,{key:0},{default:o(()=>[t(u,{icon:"ri-group-line",class:"me-3"}),p(" "+r(a.clients[0])+" ",1),t($,{color:"error",content:a.clients.length-1+"+",inline:""},null,8,["content"]),t(F,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:o(()=>[(i(!0),v(A,null,B(a.clients,z=>(i(),v("div",null,r(z),1))),256))]),_:2},1024)]),_:2},1024)):(i(),x(d,{key:1},{default:o(()=>[t(u,{icon:"ri-user-line",class:"me-3"}),p(" "+r(a.clients),1)]),_:2},1024))],2),e("td",null,[t(u,{icon:"ri-bookmark-3-line",class:"me-3"}),p(" "+r(a.free_trial?"[TRIAL]":"")+" "+r(a.program_name),1)]),e("td",de,[t(u,{icon:"ri-bookmark-line",class:"me-3"}),p(" "+r(a.detail_package?a.package_type+" - "+a.detail_package:a.package_type),1)]),e("td",ue,[t(u,{icon:"ri-user-line",class:"mr-2"}),p(" "+r(a.tutor_mentor),1)]),e("td",pe,[t(u,{icon:"ri-user-line",class:"cursor-pointer me-3"}),p(" "+r(a.admin),1)]),e("td",_e,[t(u,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),p(" "+r(a.duration/60)+" Hours ",1)]),e("td",me,[t(u,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),p(" "+r(a.spent/60)+" Hours ",1)]),e("td",null,[t(C,{to:"/user/timesheet/"+a.id+"/"+a.require.toLowerCase()},{default:o(()=>[t(X,{color:a.void=="true"?"light":"secondary"},{default:o(()=>[t(u,{icon:"ri-timeline-view",class:"cursor-pointer"}),t(F,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:o(()=>[p(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],2))),128))]),((V=(s=l(w))==null?void 0:s.data)==null?void 0:V.length)==0?(i(),v("tfoot",ge,he)):W("",!0)]}),_:1})),e("div",Ve,[t(Z,{modelValue:l(g),"onUpdate:modelValue":[n[2]||(n[2]=s=>T(g)?g.value=s:null),k],length:l(L),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{Ie as default};
