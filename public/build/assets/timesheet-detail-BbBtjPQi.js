import{_ as ye}from"./DeleteHandler.vue_vue_type_script_setup_true_lang-CdI-AqiO.js";import{r as h,l as J,o as D,f as j,w as a,b as e,Z as ie,W as E,u as t,v as F,Y as P,V as k,j as x,m as ne,A as Y,s as S,$ as oe,e as de,a as l,x as K,c as O,X as he,F as be,t as V,z as Ve,h as fe,a0 as ke,k as le,a1 as we,i as xe,P as De,a2 as $e,a3 as Ce,a4 as ge}from"./main-BKvLdBrx.js";import{r as L}from"./rules-B5G8qOzK.js";import{a as N,c as re,V as R,b as H,d as se,e as Te}from"./VCard-D759cCDt.js";import{V as ue}from"./VForm-ZiF8id15.js";import{V as W,a as $}from"./VRow-Bhp_9kUF.js";import{V as pe}from"./VTextarea-BvxKJgHV.js";import{V as G}from"./VDialog-D2bc-uqc.js";import{a as _e,V as Q}from"./VTable-DNBERKWi.js";import{T as ee}from"./index-DKBV4Sgu.js";import{V as Me}from"./VCheckbox-Dm3sqSM5.js";import{V as te}from"./VAutocomplete-iY6-Axry.js";import{V as Se}from"./VDivider-ApnYz-DT.js";import{V as Ue,a as ae,b as je}from"./VList-y8uoYqCA.js";import"./VAvatar-DzW8Gaxg.js";import"./VImg-1MDC0qvx.js";import"./VTooltip-mi5CCgc0.js";import"./VCheckboxBtn-rEbwOnn0.js";import"./VSelectionControl-CTFHpcKz.js";import"./VSlideGroup-BOyZbiU6.js";import"./ssrBoot-DuFpjdmd.js";const Ye={__name:"activity-add",props:{id:String},emits:["close","reload"],setup(q,{emit:M}){const v=q,r=M,C=h(),c=h({activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}),d=()=>{c.value={activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}},g=async()=>{const{valid:w}=await C.value.validate();if(w)try{const i=await Y.post("api/v1/timesheet/"+v.id+"/activity",c.value);i&&S("success",i.message,"bottom-end")}catch(i){S("error",i.response.data.errors,"bottom-end")}finally{d(),r("reload"),r("close")}};return(w,i)=>{const p=J("DialogCloseBtn"),b=J("VDateInput");return D(),j(R,{title:"New Activity"},{default:a(()=>[e(p,{variant:"text",size:"default",onClick:i[0]||(i[0]=s=>r("close"))}),e(N,null,{default:a(()=>[e(ue,{onSubmit:ie(g,["prevent"]),ref_key:"formData",ref:C,"validate-on":"input"},{default:a(()=>[e(W,null,{default:a(()=>[e($,{cols:"12",class:"d-none"},{default:a(()=>[e(E,{modelValue:t(c).activity,"onUpdate:modelValue":i[1]||(i[1]=s=>t(c).activity=s),label:"Activity Name",placeholder:"Activity",variant:"solo"},null,8,["modelValue"])]),_:1}),e($,{cols:"12"},{default:a(()=>[e(pe,{modelValue:t(c).description,"onUpdate:modelValue":i[2]||(i[2]=s=>t(c).description=s),label:"Meeting Discussion",placeholder:"Meeting Discussion",variant:"solo",rules:t(L).required},null,8,["modelValue","rules"])]),_:1}),e($,{md:"6",cols:"12"},{default:a(()=>[e(b,{modelValue:t(c).date,"onUpdate:modelValue":i[3]||(i[3]=s=>t(c).date=s),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(L).required},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(E,{type:"time",modelValue:t(c).start_time,"onUpdate:modelValue":i[4]||(i[4]=s=>t(c).start_time=s),label:"Start Time",placeholder:"Start Time",rules:t(L).required,variant:"solo",class:"mb-3",onChange:i[5]||(i[5]=s=>t(c).start_date=t(F)(t(c).date).format("YYYY-MM-DD")+" "+t(c).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(E,{type:"time",modelValue:t(c).end_time,"onUpdate:modelValue":i[6]||(i[6]=s=>t(c).end_time=s),label:"End Time",placeholder:"End Time",variant:"solo",onChange:i[7]||(i[7]=s=>t(c).end_date=t(F)(t(c).date).format("YYYY-MM-DD")+" "+t(c).end_time+":00")},null,8,["modelValue"])]),_:1}),e($,{md:"12",cols:"12"},{default:a(()=>[e(E,{type:"text",modelValue:t(c).meeting_link,"onUpdate:modelValue":i[8]||(i[8]=s=>t(c).meeting_link=s),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(L).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(re,{class:"mt-5"},{default:a(()=>[e(P,{type:"button",color:"error",onClick:i[9]||(i[9]=s=>r("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{type:"submit",color:"success"},{default:a(()=>[x(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Pe={__name:"activity-edit",props:{timesheet_id:Number,activity:String},emits:["close","reload"],setup(q,{emit:M}){const v=h(),r=q,C=M,c=oe("updateReload"),d=h({activity:r==null?void 0:r.activity.activity,description:r==null?void 0:r.activity.description,date:new Date(r==null?void 0:r.activity.start_date),start_time:r==null?void 0:r.activity.start_time,end_time:r==null?void 0:r.activity.end_time,start_date:F(r==null?void 0:r.activity.start_date).format("YYYY-MM-DD")+" "+(r==null?void 0:r.activity.start_time)+":00",end_date:(r==null?void 0:r.activity.end_time)!=0?F(r==null?void 0:r.activity.start_date).format("YYYY-MM-DD")+" "+(r==null?void 0:r.activity.end_time)+":00":null,meeting_link:r==null?void 0:r.activity.meeting_link}),g=async()=>{var i,p;const{valid:w}=await v.value.validate();if(w)try{const b=await Y.put("api/v1/timesheet/"+r.timesheet_id+"/activity/"+r.activity.id,d.value);b&&(S("success",b.message,"bottom-end"),C("reload"))}catch(b){if((p=(i=b==null?void 0:b.response)==null?void 0:i.data)!=null&&p.errors){const s=b.response.data.errors;let _="Validation errors:";if(typeof s!="string"){for(const o in s)s.hasOwnProperty(o)&&(_+=`
${o}: ${s[o].join(", ")}`);S("error",_,"bottom-end")}else S("error",b.response.data.errors,"bottom-end")}}finally{C("close"),setTimeout(()=>{c(!0)},3e3)}};return(w,i)=>{const p=J("DialogCloseBtn"),b=J("VDateInput");return D(),j(R,{title:"Edit Activity"},{default:a(()=>[e(p,{variant:"text",size:"default",onClick:i[0]||(i[0]=s=>C("close"))}),e(N,null,{default:a(()=>[e(ue,{onSubmit:ie(g,["prevent"]),ref_key:"formData",ref:v,"validate-on":"input"},{default:a(()=>[e(W,null,{default:a(()=>[e($,{cols:"12",class:"d-none"},{default:a(()=>[e(E,{modelValue:t(d).activity,"onUpdate:modelValue":i[1]||(i[1]=s=>t(d).activity=s),label:"Activity Name",placeholder:"Activity",variant:"solo"},null,8,["modelValue"])]),_:1}),e($,{cols:"12"},{default:a(()=>[e(pe,{modelValue:t(d).description,"onUpdate:modelValue":i[2]||(i[2]=s=>t(d).description=s),label:"Meeting Discussion",rules:t(L).required,placeholder:"Meeting Discussion",variant:"solo"},null,8,["modelValue","rules"])]),_:1}),e($,{md:"6",cols:"12"},{default:a(()=>[e(b,{modelValue:t(d).date,"onUpdate:modelValue":i[3]||(i[3]=s=>t(d).date=s),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(L).required},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(E,{type:"time",modelValue:t(d).start_time,"onUpdate:modelValue":i[4]||(i[4]=s=>t(d).start_time=s),label:"Start Time",rules:t(L).required,placeholder:"Start Time",variant:"solo",onChange:i[5]||(i[5]=s=>t(d).start_date=t(F)(r==null?void 0:r.activity.date).format("YYYY-MM-DD")+" "+t(d).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(E,{type:"time",modelValue:t(d).end_time,"onUpdate:modelValue":i[6]||(i[6]=s=>t(d).end_time=s),label:"End Time",placeholder:"End Time",variant:"solo",onChange:i[7]||(i[7]=s=>t(d).end_date=t(F)(r==null?void 0:r.activity.date).format("YYYY-MM-DD")+" "+t(d).end_time+":00")},null,8,["modelValue"])]),_:1}),e($,{md:"12",cols:"12"},{default:a(()=>[e(E,{type:"text",modelValue:t(d).meeting_link,"onUpdate:modelValue":i[8]||(i[8]=s=>t(d).meeting_link=s),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(L).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(re,{class:"mt-5"},{default:a(()=>[e(P,{color:"error",onClick:i[9]||(i[9]=s=>C("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[x(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Le={class:"d-flex justify-between align-center"},qe=l("div",{class:"w-100"},[l("h4",null,"Activity")],-1),Ae=l("thead",null,[l("tr",null,[l("th",{class:"text-uppercase",width:"1%"}," No "),l("th",{class:"text-uppercase text-center"},"Meeting Discussion"),l("th",{class:"text-uppercase text-center"},"Date"),l("th",{class:"text-uppercase text-center"},"Start Time"),l("th",{class:"text-uppercase text-center"},"End Time"),l("th",{class:"text-uppercase text-center"},"Time Spent"),l("th",{class:"text-uppercase text-center"},"Status"),l("th",{class:"text-uppercase text-end"},"#")])],-1),Ne={width:"1%"},Be={class:"d-none"},Ee={class:"text-start"},Re={class:"text-center"},Ie={class:"text-center"},ze={class:"text-center"},Oe={class:"text-end"},Fe=["href"],He={__name:"timesheet-detail",props:{id:String},setup(q){const M=q,v=oe("updateReload"),r=h([]),C=h(!1),c=h([{add:!1,edit:!1,delete:!1}]),d=h([]),g=async()=>{C.value=!0;try{const s=await Y.get("api/v1/timesheet/"+M.id+"/activities");s&&(r.value=s)}catch(s){console.error(s)}finally{C.value=!1}},w=s=>{c.value[s]?c.value[s]=!1:c.value[s]=!0},i=(s,_)=>{d.value=_,w(s)},p=async()=>{var s,_,o;try{const u=await Y.delete("api/v1/timesheet/"+M.id+"/activity/"+d.value.id);u&&(S("success",u.message,"bottom-end"),w("delete"))}catch(u){((s=u.response)==null?void 0:s.status)==400&&S("error",(o=(_=u.response)==null?void 0:_.data)==null?void 0:o.errors,"bottom-end")}finally{g(),v(!0)}},b=async s=>{var _,o;try{const u=await Y.patch("api/v1/timesheet/"+M.id+"/activity/"+s.id,s);u&&S("success",u.message,"bottom-end")}catch(u){if((o=(_=u==null?void 0:u.response)==null?void 0:_.data)!=null&&o.errors){const n=u.response.data.errors;let m="Validation errors:";if(typeof n!="string"){for(const f in n)n.hasOwnProperty(f)&&(m+=`
${f}: ${n[f].join(", ")}`);S("error",m,"bottom-end")}else S("error",u.response.data.errors,"bottom-end")}}finally{g(),v(!0)}};return de(()=>{g()}),(s,_)=>(D(),j(R,null,{default:a(()=>[e(H,null,{default:a(()=>[l("div",Le,[qe,K((D(),j(P,{onClick:_[0]||(_[0]=o=>w("add"))},{default:a(()=>[e(k,{icon:"ri-add-line"})]),_:1})),[[ee,"New Activity","start"]]),e(G,{modelValue:t(c).add,"onUpdate:modelValue":_[2]||(_[2]=o=>t(c).add=o),"max-width":"600",persistent:""},{default:a(()=>[e(Ye,{id:M.id,onClose:_[1]||(_[1]=o=>w("add")),onReload:g},null,8,["id"])]),_:1},8,["modelValue"])])]),_:1}),e(N,null,{default:a(()=>[t(C)?(D(),j(Q,{key:1,type:"table"})):(D(),j(_e,{key:0,class:"text-no-wrap",height:"400","fixed-header":""},{default:a(()=>[Ae,l("tbody",null,[(D(!0),O(be,null,he(t(r),(o,u)=>(D(),O("tr",{key:u},[l("td",Ne,V(u+1),1),l("td",Be,V(o.activity),1),l("td",Ee,V(o.description),1),l("td",null,V(s.$moment(o.start_date).format("dddd"))+", "+V(s.$moment(o.start_date).format("MMM Do YYYY")),1),l("td",Re,V(o.start_time),1),l("td",Ie,V(o.end_time),1),l("td",ze,[e(k,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),x(" "+V(o.estimate)+" Minutes ",1)]),l("td",null,[K(e(Me,{color:"success",modelValue:o.status,"onUpdate:modelValue":[n=>o.status=n,n=>b(o)],value:"1","false-value":!1},null,8,["modelValue","onUpdate:modelValue"]),[[ee,o.statusg?"Completed":"Not Yet","start"]])]),l("td",Oe,[e(P,{color:"primary",density:"compact",class:"me-1"},{default:a(()=>[l("a",{href:o.meeting_link,target:"_blank",class:"bg-primary"},[e(k,{icon:"ri ri-link"}),x(" Join ")],8,Fe)]),_:2},1024),K((D(),j(P,{color:"warning",density:"compact",class:"me-1",onClick:n=>i("edit",o)},{default:a(()=>[e(k,{icon:"ri-edit-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Edit Activity","start"]]),K((D(),j(P,{color:"error",density:"compact",onClick:n=>i("delete",o)},{default:a(()=>[e(k,{icon:"ri-delete-bin-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Delete Activity","start"]])])]))),128))])]),_:1}))]),_:1}),e(G,{modelValue:t(c).edit,"onUpdate:modelValue":_[4]||(_[4]=o=>t(c).edit=o),"max-width":"600",persistent:""},{default:a(()=>[e(Pe,{timesheet_id:M==null?void 0:M.id,activity:t(d),onClose:_[3]||(_[3]=o=>w("edit")),onReload:g},null,8,["timesheet_id","activity"])]),_:1},8,["modelValue"]),e(G,{modelValue:t(c).delete,"onUpdate:modelValue":_[6]||(_[6]=o=>t(c).delete=o),"max-width":"400",persistent:""},{default:a(()=>[e(ye,{title:"activity",onClose:_[5]||(_[5]=o=>w("delete")),onDelete:p})]),_:1},8,["modelValue"])]),_:1}))}},Ge={__name:"timesheet-transfer",props:{timesheet_id:Number,require:String},emits:["close","reload"],setup(q,{emit:M}){const v=h(),r=q,C=M,c=h([]),d=h([]),g=h([]),w=r.require.toLowerCase(),i=h(!1),p=h({mentortutor_email:null,subject_id:null}),b=async()=>{const o="api/v1/user/mentor-tutors?role="+w;i.value=!0;try{const u=await Y.get(o);u&&(c.value=u)}catch(u){console.error(u)}finally{i.value=!1}},s=async(o,u=null)=>{if(p.value.subject_id=null,w=="mentor")p.value.subject_id=o[0].subjects[0].id;else{i.value=!0;try{const n=await Y.get("api/v1/user/mentor-tutors/"+u+"/subjects");n&&(g.value=n)}catch(n){console.error(n)}finally{i.value=!1}}},_=async()=>{var n,m;C("close"),p.value.mentortutor_email=d.value.email;const{valid:o}=await v.value.validate(),u=await ke("Are you sure you want to change the owner?");if(o&&u){i.value=!0;try{const f=await Y.patch("api/v1/timesheet/"+r.timesheet_id+"/void/",p.value);f&&(S("success",f.message,"bottom-end"),le.push({path:"/admin/timesheet/"+f.data.timesheet_id}),p.value={mentortutor_email:null,subject_id:null},d.value=[],setTimeout(()=>{le.go(0)},1e3))}catch(f){if(console.log(f),(m=(n=f==null?void 0:f.response)==null?void 0:n.data)!=null&&m.errors){const B=f.response.data.errors;S("error",B,"bottom-end")}}finally{C("close"),i.value=!1}}};return de(()=>{b()}),(o,u)=>(D(),j(R,{class:"mx-auto my-8",elevation:"16",width:"450"},{default:a(()=>[e(ue,{ref_key:"formData",ref:v,"validate-on":"input",onSubmit:ie(_,["prevent"])},{default:a(()=>[e(se,null,{default:a(()=>[e(H,null,{default:a(()=>[x(" Timesheet Ownership Transfer ")]),_:1}),e(Te,null,{default:a(()=>[x(" Change Timesheet Handler ")]),_:1})]),_:1}),e(N,null,{default:a(()=>[e(W,null,{default:a(()=>{var n;return[e($,{md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(d),"onUpdate:modelValue":[u[0]||(u[0]=m=>Ve(d)?d.value=m:null),u[1]||(u[1]=m=>s(t(d).roles,t(d).uuid))],label:"Mentor/Tutor",items:t(c),"item-props":m=>({title:m.full_name,subtitle:m.roles.map(f=>f.name).join(", ")}),rules:t(L).required,loading:t(i),disabled:t(i)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),((n=r.require)==null?void 0:n.toLowerCase())=="tutor"?(D(),j($,{key:0,md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(p).subject_id,"onUpdate:modelValue":u[2]||(u[2]=m=>t(p).subject_id=m),label:"Subject Tutoring",items:t(g),"item-title":"subject","item-value":"id",loading:t(i),disabled:t(i),rules:t(L).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1})):fe("",!0)]}),_:1})]),_:1}),e(re,{class:"mx-3 mb-3"},{default:a(()=>[e(P,{color:"error",onClick:u[3]||(u[3]=n=>C("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[x(" Save Changes "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1}))}},Je={__name:"user-edit",props:["id","item","package_id"],emits:["close","reload"],setup(q,{emit:M}){var f,B,I,z,X,Z;const v=q,r=M,C=h([]),c=h([]),d=h([]),g=h([]),w=h(!1),i=h(!0),p=h(!0),b=h(),s=h({mentortutor_email:(f=v.item)==null?void 0:f.tutormentor_email,subject_id:(B=v.item)==null?void 0:B.subject_id,inhouse_id:(I=v.item)==null?void 0:I.inhouse_id,package_id:v.package_id,duration:(z=v.item)==null?void 0:z.duration,notes:(X=v.item)==null?void 0:X.notes,pic_id:(Z=v.item)==null?void 0:Z.pic_id}),_=async(U=!1)=>{p.value=!0;const T=U?"api/v1/user/mentor-tutors?inhouse=true":"api/v1/user/mentor-tutors";try{const A=await Y.get(T);A&&(U?g.value=Object.values(A):C.value=A)}catch(A){console.error(A)}finally{p.value=!1}},o=async()=>{p.value=!0;try{const U=await Y.get("api/v1/package/component/list");U&&(c.value=U)}catch(U){console.error(U)}finally{p.value=!1}},u=()=>{const U=s.value.package_id,T=c.value.findIndex(y=>y.id===U);let A=c.value[T];A.detail?(w.value=!0,s.value.duration=A.detail):(w.value=!1,s.value.duration=null)},n=async()=>{p.value=!0;try{const U=await Y.get("api/v1/user/component/list");U&&(d.value=U)}catch(U){console.error(U)}finally{p.value=!1}},m=async()=>{var T,A;const{valid:U}=await b.value.validate();if(U)try{const y=await Y.put("api/v1/timesheet/"+v.id+"/update",s.value);y&&(s.value={mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[]},S("success",y.message,"bottom-end"),r("reload"))}catch(y){if((A=(T=y==null?void 0:y.response)==null?void 0:T.data)!=null&&A.errors){const ce=y.response.data.errors;let ve="Validation errors:";for(const me in ce)ce.hasOwnProperty(me)&&(ve+=`
${me}: ${ce[me].join(", ")}`);S("error",ve,"bottom-end")}}finally{r("close")}};return de(()=>{_(!0),o(),n(),setTimeout(()=>{i.value=!1},2e3)}),(U,T)=>{const A=J("DialogCloseBtn");return D(),j(R,{title:"Edit Detail"},{default:a(()=>[e(A,{variant:"text",size:"default",onClick:T[0]||(T[0]=y=>r("close"))}),e(N,null,{default:a(()=>[e(ue,{onSubmit:ie(m,["prevent"]),ref_key:"formData",ref:b,"validate-on":"input"},{default:a(()=>[e(W,null,{default:a(()=>[e($,{md:"8"},{default:a(()=>[e(te,{variant:"solo",clearable:"",label:"Package",modelValue:t(s).package_id,"onUpdate:modelValue":[T[1]||(T[1]=y=>t(s).package_id=y),u],items:t(c),"item-props":y=>({title:y.package!=null?y.type_of+" - "+y.package:y.type_of}),"item-value":"id",rules:t(L).required,loading:t(p),disabled:t(p)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e($,{md:"4"},{default:a(()=>[e(E,{type:"number",variant:"solo",clearable:"",label:+t(s).duration/60?"Minutes ("+t(s).duration/60+" Hours)":"Minutes",readonly:t(w),modelValue:t(s).duration,"onUpdate:modelValue":T[2]||(T[2]=y=>t(s).duration=y),rules:t(L).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),e($,{md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(s).inhouse_id,"onUpdate:modelValue":T[3]||(T[3]=y=>t(s).inhouse_id=y),label:"Inhouse Mentor/Tutor",items:t(g),"item-props":y=>({title:y.full_name}),"item-value":"uuid",rules:t(L).required,loading:t(p),disabled:t(p)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e($,{md:"12"},{default:a(()=>[e(te,{variant:"solo",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:t(s).pic_id,"onUpdate:modelValue":T[4]||(T[4]=y=>t(s).pic_id=y),items:t(d),"item-title":"full_name","item-value":"id",rules:t(L).required,loading:t(p),disabled:t(p)},null,8,["modelValue","items","rules","loading","disabled"])]),_:1}),e($,{md:"12"},{default:a(()=>[e(pe,{label:"Notes",modelValue:t(s).notes,"onUpdate:modelValue":T[5]||(T[5]=y=>t(s).notes=y),variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1}),e(Se,{class:"my-3"}),e(re,null,{default:a(()=>[e(P,{color:"error",type:"button",onClick:T[6]||(T[6]=y=>r("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[x(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},We={class:"w-100"},Xe={class:"mt-3 font-weight-light"},Ze=l("hr",{class:"my-2"},null,-1),Ke={key:0},Qe=l("tr",{class:"bg-secondary"},[l("td",null,"Name"),l("td",null,"School"),l("td",null,"Grade")],-1),et={key:1},tt=l("td",{width:"20%"},"Name",-1),lt=l("td",{width:"1%"},":",-1),at=l("td",null,"School Name",-1),st=l("td",{width:"1%"},":",-1),ot=l("td",null,"Grade",-1),it=l("td",{width:"1%"},":",-1),nt=l("td",null,"Email",-1),dt=l("td",{width:"1%"},":",-1),rt={class:"mt-5 font-weight-light"},ut=l("hr",{class:"my-2"},null,-1),ct=l("td",{width:"30%"},"Program",-1),mt=l("td",{width:"1%"},":",-1),_t=l("td",null,"Package",-1),ft=l("td",{width:"1%"},":",-1),pt=l("td",null,"Person in Charge",-1),vt=l("td",{width:"1%"},":",-1),gt={class:"ms-4",type:"1"},yt=l("td",null,"Tutor/Mentor",-1),ht=l("td",{width:"1%"},":",-1),bt=l("td",null,"Inhouse Tutor/Mentor",-1),Vt=l("td",{width:"1%"},":",-1),kt=l("td",null,"Update On",-1),wt=l("td",{width:"1%"},":",-1),xt={class:"d-flex align-end w-100"},Dt={class:"m-0 mb-1 text-white"},$t=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Ct={class:"text-end w-100"},Tt={class:"d-flex align-end w-100"},Mt={class:"m-0 mb-1 text-white"},St=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Ut={class:"text-end w-100"},jt={class:"d-flex align-end w-100"},Yt={class:"m-0 mb-1 text-white"},Pt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Lt={class:"text-end w-100"},qt={__name:"user-detail",props:{id:String},emits:["void"],setup(q,{emit:M}){const v=q,r=M,C=oe("reloadData"),c=oe("updateReload"),d=h([]),g=h([{edit:!1,void:!1,delete:!1}]),w=h(!1),i=async _=>{var o,u,n;w.value=!0;try{const m=await Y.get("api/v1/timesheet/"+_+"/detail");m&&(d.value=m,r("void",m.packageDetails.void))}catch(m){((o=m.response)==null?void 0:o.status)==400&&(S("error",(n=(u=m.response)==null?void 0:u.data)==null?void 0:n.errors,"bottom-end"),le.push("/admin/timesheet")),console.log(m)}finally{w.value=!1}},p=async()=>{var _,o,u;try{const n=await Y.delete("api/v1/timesheet/"+v.id+"/delete");n&&(d.value=n,S("success",n.message,"bottom-end"),g.value.delete=!1,le.push("/admin/timesheet"))}catch(n){((_=n.response)==null?void 0:_.status)==400&&S("error",(u=(o=n.response)==null?void 0:o.data)==null?void 0:u.errors,"bottom-end")}},b=_=>{g.value[_]?g.value[_]=!1:g.value[_]=!0},s=async(_,o)=>{var u;$e();try{const n=await Y.get("api/v1/timesheet/"+_+"/export",{responseType:"blob"});if(n){const m=window.URL.createObjectURL(new Blob([n],{type:'"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"'})),f=document.createElement("a");f.href=m,f.setAttribute("download",`timesheet_${o}.xlsx`),document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(m),Ce.close()}}catch(n){S("error",(u=n.response)==null?void 0:u.statusText,"bottom-end"),console.log(n)}};return de(()=>{i(v.id)}),we(()=>{C.value&&(i(v.id),c(!1))}),(_,o)=>{const u=J("router-link");return D(),j(R,{class:"mb-3"},{default:a(()=>[e(H,{class:"d-flex justify-between align-center"},{default:a(()=>{var n;return[l("div",We,[e(u,{to:"/admin/timesheet"},{default:a(()=>[e(k,{icon:"ri-arrow-left-line",color:"secondary",class:"me-2",size:"25"})]),_:1}),x(" Timesheet - "+V((n=t(d).packageDetails)==null?void 0:n.package_type),1)]),l("div",null,[e(xe,{"close-on-content-click":!1,location:"bottom"},{activator:a(({props:m})=>[K((D(),j(P,De({color:"secondary"},m),{default:a(()=>[e(k,{icon:"ri-settings-3-line"})]),_:2},1040)),[[ee,"Settings","start"]])]),default:a(()=>[e(Ue,null,{default:a(()=>[e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[0]||(o[0]=m=>b("edit"))},[e(k,{icon:"ri-pencil-line",class:"me-2"}),x(" Edit TimeSheet ")])]),_:1}),e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[1]||(o[1]=m=>b("void"))},[e(k,{icon:"ri-exchange-2-line",class:"me-2"}),x(" Timesheet Ownership Transfer ")])]),_:1}),e(ae,null,{default:a(()=>[e(je,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[2]||(o[2]=m=>{var f,B,I,z,X,Z;return s(v.id,((B=(f=t(d))==null?void 0:f.packageDetails)==null?void 0:B.package_type)+"-"+((z=(I=t(d))==null?void 0:I.packageDetails)==null?void 0:z.package_name)+"_"+((Z=(X=t(d))==null?void 0:X.packageDetails)==null?void 0:Z.tutormentor_name))})},[e(k,{icon:"ri-download-line",class:"me-2"}),x(" Download TimeSheet ")])]),_:1})]),_:1}),e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[3]||(o[3]=m=>b("delete"))},[e(k,{icon:"ri-delete-bin-line",class:"me-2"}),x(" Delete TimeSheet ")])]),_:1})]),_:1})]),_:1})])]}),_:1}),e(N,null,{default:a(()=>[t(w)?(D(),j(W,{key:1},{default:a(()=>[e($,{md:"7"},{default:a(()=>[e(Q,{type:"heading, paragraph, heading, paragraph",class:"mb-3"})]),_:1}),e($,{md:"5"},{default:a(()=>[e(Q,{type:"text@3",color:"#16B1FF",class:"mb-3"}),e(Q,{type:"text@3",color:"#91c45e",class:"mb-3"}),e(Q,{type:"text@3",color:"#e05e5e",class:"mb-3"})]),_:1})]),_:1})):(D(),j(W,{key:0,align:"center"},{default:a(()=>[e($,{md:"7"},{default:a(()=>[l("h4",Xe,[e(k,{icon:"ri-user-line",size:"17",class:"me-2"}),x(" Basic Profile ")]),Ze,e(_e,{density:"compact"},{default:a(()=>{var n,m;return[((n=t(d).clientProfile)==null?void 0:n.length)>1?(D(),O("tbody",Ke,[Qe,(D(!0),O(be,null,he(t(d).clientProfile,f=>(D(),O("tr",null,[l("td",null,V(f.client_name),1),l("td",null,V(f.client_school),1),l("td",null,V(f.client_grade),1)]))),256))])):((m=t(d).clientProfile)==null?void 0:m.length)==1?(D(),O("tbody",et,[l("tr",null,[tt,lt,l("td",null,V(t(d).clientProfile[0].client_name),1)]),l("tr",null,[at,st,l("td",null,V(t(d).clientProfile[0].client_school),1)]),l("tr",null,[ot,it,l("td",null,V(t(d).clientProfile[0].client_grade),1)]),l("tr",null,[nt,dt,l("td",null,V(t(d).clientProfile[0].client_mail),1)])])):fe("",!0)]}),_:1}),l("h4",rt,[e(k,{icon:"ri-bookmark-line",class:"me-2",size:"17"}),x(" Package Details ")]),ut,e(_e,{density:"compact"},{default:a(()=>{var n,m,f,B,I,z;return[l("tbody",null,[l("tr",null,[ct,mt,l("td",null,V((n=t(d).packageDetails)==null?void 0:n.program_name),1)]),l("tr",null,[_t,ft,l("td",null,V(((m=t(d).packageDetails)==null?void 0:m.package_type)+" - "+((f=t(d).packageDetails)==null?void 0:f.package_name)),1)]),l("tr",null,[pt,vt,l("td",null,[l("ol",gt,[l("li",null,V((B=t(d).packageDetails)==null?void 0:B.pic_name),1)])])]),l("tr",null,[yt,ht,l("td",null,V((I=t(d).packageDetails)==null?void 0:I.tutormentor_name),1)]),l("tr",null,[bt,Vt,l("td",null,V((z=t(d).packageDetails)==null?void 0:z.inhouse_name),1)]),l("tr",null,[kt,wt,l("td",null,V(t(F)().format("LLL")),1)])])]}),_:1})]),_:1}),e($,{md:"5"},{default:a(()=>[e(R,{color:"#16B1FF",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(H,{class:"text-white"},{default:a(()=>[x(" Total Minutes of Package ")]),_:1})]),_:1}),e(N,{class:"d-flex justify-between"},{default:a(()=>{var n;return[l("div",xt,[l("h1",Dt,V((n=t(d).packageDetails)==null?void 0:n.duration_in_minutes),1),$t])]}),_:1})]),e(N,null,{default:a(()=>[l("div",Ct,[e(k,{icon:"ri-calendar-schedule-line",size:"60"})])]),_:1})]),_:1}),e(R,{color:"#91c45e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(H,{class:"text-white"},{default:a(()=>[x(" Total Minutes Spent ")]),_:1})]),_:1}),e(N,{class:"d-flex justify-between"},{default:a(()=>{var n;return[l("div",Tt,[l("h1",Mt,V((n=t(d).packageDetails)==null?void 0:n.time_spent_in_minutes),1),St])]}),_:1})]),e(N,null,{default:a(()=>[l("div",Ut,[e(k,{icon:"ri-timer-flash-line",size:"60",color:"white"})])]),_:1})]),_:1}),e(R,{color:"#e05e5e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(H,{class:"text-white"},{default:a(()=>[x(" Total Minutes Left ")]),_:1})]),_:1}),e(N,{class:"d-flex justify-between"},{default:a(()=>{var n,m;return[l("div",jt,[l("h1",Yt,V(((n=t(d).packageDetails)==null?void 0:n.duration_in_minutes)-((m=t(d).packageDetails)==null?void 0:m.time_spent_in_minutes)),1),Pt])]}),_:1})]),e(N,null,{default:a(()=>[l("div",Lt,[e(k,{icon:"ri-timer-2-line",size:"60"})])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),e(G,{modelValue:t(g).edit,"onUpdate:modelValue":o[6]||(o[6]=n=>t(g).edit=n),"max-width":"600",persistent:""},{default:a(()=>{var n;return[e(Je,{item:t(d).editableColumns,package_id:(n=t(d).packageDetails)==null?void 0:n.package_id,id:v.id,onClose:o[4]||(o[4]=m=>b("edit")),onReload:o[5]||(o[5]=m=>i(v.id))},null,8,["item","package_id","id"])]}),_:1},8,["modelValue"]),e(G,{modelValue:t(g).delete,"onUpdate:modelValue":o[8]||(o[8]=n=>t(g).delete=n),"max-width":"400",persistent:""},{default:a(()=>[e(ye,{title:"timesheet",onDelete:p,onClose:o[7]||(o[7]=n=>b("delete"))})]),_:1},8,["modelValue"]),e(G,{modelValue:t(g).void,"onUpdate:modelValue":o[10]||(o[10]=n=>t(g).void=n),"max-width":"400",persistent:""},{default:a(()=>[e(Ge,{timesheet_id:v.id,require:t(d).editableColumns.tutormentor_role,onClose:o[9]||(o[9]=n=>b("void"))},null,8,["timesheet_id","require"])]),_:1},8,["modelValue"])]),_:1})}}},At={class:"h-auto position-relative"},Nt={key:0,class:"overlay"},Bt=l("div",{class:"bg-secondary",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9998",width:"100%",opacity:"0.6"}},null,-1),Et={class:"d-flex align-center justify-center",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9999",width:"100%",opacity:"1"}},Rt={class:"text-center"},It=l("h2",{class:"text-white mt-3"},"This Timesheet Has Changed Owner",-1),ul={__name:"timesheet-detail",props:{id:Number},setup(q){const v=q.id,r=h(!1),C=h(!1);ge("reloadData",r),ge("updateReload",d=>{r.value=d});const c=d=>{C.value=d};return(d,g)=>(D(),O("div",At,[t(C)=="true"?(D(),O("div",Nt,[Bt,l("div",Et,[l("div",Rt,[e(k,{color:"white",icon:"ri-lock-line",size:"50"}),It,e(P,{color:"light",class:"mt-4",onClick:g[0]||(g[0]=w=>t(le).push({path:"/admin/timesheet"}))},{default:a(()=>[x(" Back to List ")]),_:1})])])])):fe("",!0),e(qt,{id:t(v),onVoid:c},null,8,["id"]),e(He,{id:t(v)},null,8,["id"])]))}};export{ul as default};
