import{_ as ye}from"./DeleteHandler.vue_vue_type_script_setup_true_lang-BDiu4Tdj.js";import{r as h,l as J,o as D,f as j,w as a,b as e,Z as ie,W as R,u as t,v as F,Y as P,V as k,j as x,m as ne,A as Y,s as M,$ as oe,e as de,a as l,x as K,c as O,X as he,F as be,t as V,z as Ve,h as fe,a0 as ke,k as le,a1 as we,i as xe,P as De,a2 as $e,a3 as Ce,a4 as ge}from"./main-DiavuC11.js";import{r as L}from"./rules-B5G8qOzK.js";import{a as E,c as re,V as I,b as H,d as se,e as Te}from"./VCard-Y-T-Ka0a.js";import{V as ue}from"./VForm-DTJSrPTM.js";import{V as W,a as $}from"./VRow-BWRkT_yo.js";import{V as pe}from"./VTextarea-8nBJ-ZyU.js";import{V as G}from"./VDialog-BPb3o0vx.js";import{a as _e,V as Q}from"./VTable-Dyy6GjWo.js";import{T as ee}from"./index-8wYMMPPW.js";import{V as Me}from"./VCheckbox-E-EU9thV.js";import{V as te}from"./VAutocomplete-DugExmaw.js";import{V as Se}from"./VDivider-zRcmWAed.js";import{V as Ue,a as ae,b as je}from"./VList-CL3XYsKL.js";import"./VAvatar-CjmHWuvR.js";import"./VImg-DVMV4Jyj.js";import"./VTooltip-DXWmKPbK.js";import"./VCheckboxBtn-CneQpW36.js";import"./VSelectionControl-D_i6kd7L.js";import"./VSlideGroup-LOL9XD62.js";import"./ssrBoot-GtDbNqnP.js";const Ye={__name:"activity-add",props:{id:String},emits:["close","reload"],setup(q,{emit:S}){const v=q,r=S,C=h(),c=h({activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}),n=()=>{c.value={activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}},g=async()=>{const{valid:w}=await C.value.validate();if(w)try{const i=await Y.post("api/v1/timesheet/"+v.id+"/activity",c.value);i&&M("success",i.message,"bottom-end")}catch(i){M("error",i.response.data.errors,"bottom-end")}finally{n(),r("reload"),r("close")}};return(w,i)=>{const p=J("DialogCloseBtn"),b=J("VDateInput");return D(),j(I,{title:"New Activity"},{default:a(()=>[e(p,{variant:"text",size:"default",onClick:i[0]||(i[0]=s=>r("close"))}),e(E,null,{default:a(()=>[e(ue,{onSubmit:ie(g,["prevent"]),ref_key:"formData",ref:C,"validate-on":"input"},{default:a(()=>[e(W,null,{default:a(()=>[e($,{cols:"12",class:"d-none"},{default:a(()=>[e(R,{modelValue:t(c).activity,"onUpdate:modelValue":i[1]||(i[1]=s=>t(c).activity=s),label:"Activity Name",placeholder:"Activity",variant:"solo"},null,8,["modelValue"])]),_:1}),e($,{cols:"12"},{default:a(()=>[e(pe,{modelValue:t(c).description,"onUpdate:modelValue":i[2]||(i[2]=s=>t(c).description=s),label:"Meeting Discussion",placeholder:"Meeting Discussion",variant:"solo",rules:t(L).required},null,8,["modelValue","rules"])]),_:1}),e($,{md:"6",cols:"12"},{default:a(()=>[e(b,{modelValue:t(c).date,"onUpdate:modelValue":i[3]||(i[3]=s=>t(c).date=s),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(L).required},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(R,{type:"time",modelValue:t(c).start_time,"onUpdate:modelValue":i[4]||(i[4]=s=>t(c).start_time=s),label:"Start Time",placeholder:"Start Time",rules:t(L).required,variant:"solo",class:"mb-3",onChange:i[5]||(i[5]=s=>t(c).start_date=t(F)(t(c).date).format("YYYY-MM-DD")+" "+t(c).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(R,{type:"time",modelValue:t(c).end_time,"onUpdate:modelValue":i[6]||(i[6]=s=>t(c).end_time=s),label:"End Time",placeholder:"End Time",variant:"solo",onChange:i[7]||(i[7]=s=>t(c).end_date=t(F)(t(c).date).format("YYYY-MM-DD")+" "+t(c).end_time+":00")},null,8,["modelValue"])]),_:1}),e($,{md:"12",cols:"12"},{default:a(()=>[e(R,{type:"text",modelValue:t(c).meeting_link,"onUpdate:modelValue":i[8]||(i[8]=s=>t(c).meeting_link=s),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(L).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(re,{class:"mt-5"},{default:a(()=>[e(P,{type:"button",color:"error",onClick:i[9]||(i[9]=s=>r("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{type:"submit",color:"success"},{default:a(()=>[x(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Pe={__name:"activity-edit",props:{timesheet_id:Number,activity:String},emits:["close","reload"],setup(q,{emit:S}){const v=h(),r=q,C=S,c=oe("updateReload"),n=h({activity:r==null?void 0:r.activity.activity,description:r==null?void 0:r.activity.description,date:new Date(r==null?void 0:r.activity.start_date),start_time:r==null?void 0:r.activity.start_time,end_time:r==null?void 0:r.activity.end_time,start_date:F(r==null?void 0:r.activity.start_date).format("YYYY-MM-DD")+" "+(r==null?void 0:r.activity.start_time)+":00",end_date:(r==null?void 0:r.activity.end_time)!=0?F(r==null?void 0:r.activity.start_date).format("YYYY-MM-DD")+" "+(r==null?void 0:r.activity.end_time)+":00":null,meeting_link:r==null?void 0:r.activity.meeting_link}),g=async()=>{var i,p;const{valid:w}=await v.value.validate();if(w)try{const b=await Y.put("api/v1/timesheet/"+r.timesheet_id+"/activity/"+r.activity.id,n.value);b&&(M("success",b.message,"bottom-end"),C("reload"))}catch(b){if((p=(i=b==null?void 0:b.response)==null?void 0:i.data)!=null&&p.errors){const s=b.response.data.errors;let _="Validation errors:";if(typeof s!="string"){for(const o in s)s.hasOwnProperty(o)&&(_+=`
${o}: ${s[o].join(", ")}`);M("error",_,"bottom-end")}else M("error",b.response.data.errors,"bottom-end")}}finally{C("close"),setTimeout(()=>{c(!0)},3e3)}};return(w,i)=>{const p=J("DialogCloseBtn"),b=J("VDateInput");return D(),j(I,{title:"Edit Activity"},{default:a(()=>[e(p,{variant:"text",size:"default",onClick:i[0]||(i[0]=s=>C("close"))}),e(E,null,{default:a(()=>[e(ue,{onSubmit:ie(g,["prevent"]),ref_key:"formData",ref:v,"validate-on":"input"},{default:a(()=>[e(W,null,{default:a(()=>[e($,{cols:"12",class:"d-none"},{default:a(()=>[e(R,{modelValue:t(n).activity,"onUpdate:modelValue":i[1]||(i[1]=s=>t(n).activity=s),label:"Activity Name",placeholder:"Activity",variant:"solo"},null,8,["modelValue"])]),_:1}),e($,{cols:"12"},{default:a(()=>[e(pe,{modelValue:t(n).description,"onUpdate:modelValue":i[2]||(i[2]=s=>t(n).description=s),label:"Meeting Discussion",rules:t(L).required,placeholder:"Meeting Discussion",variant:"solo"},null,8,["modelValue","rules"])]),_:1}),e($,{md:"6",cols:"12"},{default:a(()=>[e(b,{modelValue:t(n).date,"onUpdate:modelValue":i[3]||(i[3]=s=>t(n).date=s),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(L).required},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(R,{type:"time",modelValue:t(n).start_time,"onUpdate:modelValue":i[4]||(i[4]=s=>t(n).start_time=s),label:"Start Time",rules:t(L).required,placeholder:"Start Time",variant:"solo",onChange:i[5]||(i[5]=s=>t(n).start_date=t(F)(r==null?void 0:r.activity.date).format("YYYY-MM-DD")+" "+t(n).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(R,{type:"time",modelValue:t(n).end_time,"onUpdate:modelValue":i[6]||(i[6]=s=>t(n).end_time=s),label:"End Time",placeholder:"End Time",variant:"solo",onChange:i[7]||(i[7]=s=>t(n).end_date=t(F)(r==null?void 0:r.activity.date).format("YYYY-MM-DD")+" "+t(n).end_time+":00")},null,8,["modelValue"])]),_:1}),e($,{md:"12",cols:"12"},{default:a(()=>[e(R,{type:"text",modelValue:t(n).meeting_link,"onUpdate:modelValue":i[8]||(i[8]=s=>t(n).meeting_link=s),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(L).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(re,{class:"mt-5"},{default:a(()=>[e(P,{color:"error",onClick:i[9]||(i[9]=s=>C("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[x(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Le={class:"d-flex justify-between align-center"},qe=l("div",{class:"w-100"},[l("h4",null,"Activity")],-1),Ae=l("thead",null,[l("tr",null,[l("th",{class:"text-uppercase",width:"1%"}," No "),l("th",{class:"text-uppercase text-center"},"Meeting Discussion"),l("th",{class:"text-uppercase text-center"},"Date"),l("th",{class:"text-uppercase text-center"},"Start Time"),l("th",{class:"text-uppercase text-center"},"End Time"),l("th",{class:"text-uppercase text-center"},"Time Spent"),l("th",{class:"text-uppercase text-center"},"Status"),l("th",{class:"text-uppercase text-end"},"#")])],-1),Ne={width:"1%"},Be={class:"d-none"},Ee={class:"text-start"},Re={class:"text-center"},Ie={class:"text-center"},ze={class:"text-center"},Oe={class:"text-end"},Fe=["href"],He={__name:"timesheet-detail",props:{id:String},setup(q){const S=q,v=oe("updateReload"),r=h([]),C=h(!1),c=h([{add:!1,edit:!1,delete:!1}]),n=h([]),g=async()=>{C.value=!0;try{const s=await Y.get("api/v1/timesheet/"+S.id+"/activities");s&&(r.value=s)}catch(s){console.error(s)}finally{C.value=!1}},w=s=>{c.value[s]?c.value[s]=!1:c.value[s]=!0},i=(s,_)=>{n.value=_,w(s)},p=async()=>{var s,_,o;try{const m=await Y.delete("api/v1/timesheet/"+S.id+"/activity/"+n.value.id);m&&(M("success",m.message,"bottom-end"),w("delete"))}catch(m){((s=m.response)==null?void 0:s.status)==400&&M("error",(o=(_=m.response)==null?void 0:_.data)==null?void 0:o.errors,"bottom-end")}finally{g(),v(!0)}},b=async s=>{var _,o,m,d;try{const u=await Y.patch("api/v1/timesheet/"+S.id+"/activity/"+s.id,s);u&&M("success",u.message,"bottom-end")}catch(u){if((o=(_=u==null?void 0:u.response)==null?void 0:_.data)!=null&&o.message)M("error",u.response.data.message,"bottom-end");else if((d=(m=u==null?void 0:u.response)==null?void 0:m.data)!=null&&d.errors){const f=u.response.data.errors;let A="Validation errors:";if(typeof f!="string"){for(const B in f)f.hasOwnProperty(B)&&(A+=`
${B}: ${f[B].join(", ")}`);M("error",A,"bottom-end")}else M("error",u.response.data.errors,"bottom-end")}}finally{g(),v(!0)}};return de(()=>{g()}),(s,_)=>(D(),j(I,null,{default:a(()=>[e(H,null,{default:a(()=>[l("div",Le,[qe,K((D(),j(P,{onClick:_[0]||(_[0]=o=>w("add"))},{default:a(()=>[e(k,{icon:"ri-add-line"})]),_:1})),[[ee,"New Activity","start"]]),e(G,{modelValue:t(c).add,"onUpdate:modelValue":_[2]||(_[2]=o=>t(c).add=o),"max-width":"600",persistent:""},{default:a(()=>[e(Ye,{id:S.id,onClose:_[1]||(_[1]=o=>w("add")),onReload:g},null,8,["id"])]),_:1},8,["modelValue"])])]),_:1}),e(E,null,{default:a(()=>[t(C)?(D(),j(Q,{key:1,type:"table"})):(D(),j(_e,{key:0,class:"text-no-wrap",height:"400","fixed-header":""},{default:a(()=>[Ae,l("tbody",null,[(D(!0),O(be,null,he(t(r),(o,m)=>(D(),O("tr",{key:m},[l("td",Ne,V(m+1),1),l("td",Be,V(o.activity),1),l("td",Ee,V(o.description),1),l("td",null,V(s.$moment(o.start_date).format("dddd"))+", "+V(s.$moment(o.start_date).format("MMM Do YYYY")),1),l("td",Re,V(o.start_time),1),l("td",Ie,V(o.end_time),1),l("td",ze,[e(k,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),x(" "+V(o.estimate)+" Minutes ",1)]),l("td",null,[K(e(Me,{color:"success",modelValue:o.status,"onUpdate:modelValue":[d=>o.status=d,d=>b(o)],value:!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue"]),[[ee,o.status?"Completed":"Not Yet","start"]])]),l("td",Oe,[e(P,{color:"primary",density:"compact",class:"me-1"},{default:a(()=>[l("a",{href:o.meeting_link,target:"_blank",class:"bg-primary"},[e(k,{icon:"ri ri-link"}),x(" Join ")],8,Fe)]),_:2},1024),K((D(),j(P,{color:"warning",density:"compact",class:"me-1",onClick:d=>i("edit",o)},{default:a(()=>[e(k,{icon:"ri-edit-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Edit Activity","start"]]),K((D(),j(P,{color:"error",density:"compact",onClick:d=>i("delete",o)},{default:a(()=>[e(k,{icon:"ri-delete-bin-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Delete Activity","start"]])])]))),128))])]),_:1}))]),_:1}),e(G,{modelValue:t(c).edit,"onUpdate:modelValue":_[4]||(_[4]=o=>t(c).edit=o),"max-width":"600",persistent:""},{default:a(()=>[e(Pe,{timesheet_id:S==null?void 0:S.id,activity:t(n),onClose:_[3]||(_[3]=o=>w("edit")),onReload:g},null,8,["timesheet_id","activity"])]),_:1},8,["modelValue"]),e(G,{modelValue:t(c).delete,"onUpdate:modelValue":_[6]||(_[6]=o=>t(c).delete=o),"max-width":"400",persistent:""},{default:a(()=>[e(ye,{title:"activity",onClose:_[5]||(_[5]=o=>w("delete")),onDelete:p})]),_:1},8,["modelValue"])]),_:1}))}},Ge={__name:"timesheet-transfer",props:{timesheet_id:Number,require:String},emits:["close","reload"],setup(q,{emit:S}){const v=h(),r=q,C=S,c=h([]),n=h([]),g=h([]),w=r.require.toLowerCase(),i=h(!1),p=h({mentortutor_email:null,subject_id:null}),b=async()=>{const o="api/v1/user/mentor-tutors?role="+w;i.value=!0;try{const m=await Y.get(o);m&&(c.value=m)}catch(m){console.error(m)}finally{i.value=!1}},s=async(o,m=null)=>{if(p.value.subject_id=null,w=="mentor")p.value.subject_id=o[0].subjects[0].id;else{i.value=!0;try{const d=await Y.get("api/v1/user/mentor-tutors/"+m+"/subjects");d&&(g.value=d)}catch(d){console.error(d)}finally{i.value=!1}}},_=async()=>{var d,u;C("close"),p.value.mentortutor_email=n.value.email;const{valid:o}=await v.value.validate(),m=await ke("Are you sure you want to change the owner?");if(o&&m){i.value=!0;try{const f=await Y.patch("api/v1/timesheet/"+r.timesheet_id+"/void/",p.value);f&&(M("success",f.message,"bottom-end"),le.push({path:"/admin/timesheet/"+f.data.timesheet_id}),p.value={mentortutor_email:null,subject_id:null},n.value=[],setTimeout(()=>{le.go(0)},1e3))}catch(f){if(console.log(f),(u=(d=f==null?void 0:f.response)==null?void 0:d.data)!=null&&u.errors){const A=f.response.data.errors;M("error",A,"bottom-end")}}finally{C("close"),i.value=!1}}};return de(()=>{b()}),(o,m)=>(D(),j(I,{class:"mx-auto my-8",elevation:"16",width:"450"},{default:a(()=>[e(ue,{ref_key:"formData",ref:v,"validate-on":"input",onSubmit:ie(_,["prevent"])},{default:a(()=>[e(se,null,{default:a(()=>[e(H,null,{default:a(()=>[x(" Timesheet Ownership Transfer ")]),_:1}),e(Te,null,{default:a(()=>[x(" Change Timesheet Handler ")]),_:1})]),_:1}),e(E,null,{default:a(()=>[e(W,null,{default:a(()=>{var d;return[e($,{md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(n),"onUpdate:modelValue":[m[0]||(m[0]=u=>Ve(n)?n.value=u:null),m[1]||(m[1]=u=>s(t(n).roles,t(n).uuid))],label:"Mentor/Tutor",items:t(c),"item-props":u=>({title:u.full_name,subtitle:u.roles.map(f=>f.name).join(", ")}),rules:t(L).required,loading:t(i),disabled:t(i)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),((d=r.require)==null?void 0:d.toLowerCase())=="tutor"?(D(),j($,{key:0,md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(p).subject_id,"onUpdate:modelValue":m[2]||(m[2]=u=>t(p).subject_id=u),label:"Subject Tutoring",items:t(g),"item-title":"subject","item-value":"id",loading:t(i),disabled:t(i),rules:t(L).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1})):fe("",!0)]}),_:1})]),_:1}),e(re,{class:"mx-3 mb-3"},{default:a(()=>[e(P,{color:"error",onClick:m[3]||(m[3]=d=>C("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[x(" Save Changes "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1}))}},Je={__name:"user-edit",props:["id","item","package_id"],emits:["close","reload"],setup(q,{emit:S}){var f,A,B,z,X,Z;const v=q,r=S,C=h([]),c=h([]),n=h([]),g=h([]),w=h(!1),i=h(!0),p=h(!0),b=h(),s=h({mentortutor_email:(f=v.item)==null?void 0:f.tutormentor_email,subject_id:(A=v.item)==null?void 0:A.subject_id,inhouse_id:(B=v.item)==null?void 0:B.inhouse_id,package_id:v.package_id,duration:(z=v.item)==null?void 0:z.duration,notes:(X=v.item)==null?void 0:X.notes,pic_id:(Z=v.item)==null?void 0:Z.pic_id}),_=async(U=!1)=>{p.value=!0;const T=U?"api/v1/user/mentor-tutors?inhouse=true":"api/v1/user/mentor-tutors";try{const N=await Y.get(T);N&&(U?g.value=Object.values(N):C.value=N)}catch(N){console.error(N)}finally{p.value=!1}},o=async()=>{p.value=!0;try{const U=await Y.get("api/v1/package/component/list");U&&(c.value=U)}catch(U){console.error(U)}finally{p.value=!1}},m=()=>{const U=s.value.package_id,T=c.value.findIndex(y=>y.id===U);let N=c.value[T];N.detail?(w.value=!0,s.value.duration=N.detail):(w.value=!1,s.value.duration=null)},d=async()=>{p.value=!0;try{const U=await Y.get("api/v1/user/component/list");U&&(n.value=U)}catch(U){console.error(U)}finally{p.value=!1}},u=async()=>{var T,N;const{valid:U}=await b.value.validate();if(U)try{const y=await Y.put("api/v1/timesheet/"+v.id+"/update",s.value);y&&(s.value={mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[]},M("success",y.message,"bottom-end"),r("reload"))}catch(y){if((N=(T=y==null?void 0:y.response)==null?void 0:T.data)!=null&&N.errors){const ce=y.response.data.errors;let ve="Validation errors:";for(const me in ce)ce.hasOwnProperty(me)&&(ve+=`
${me}: ${ce[me].join(", ")}`);M("error",ve,"bottom-end")}}finally{r("close")}};return de(()=>{_(!0),o(),d(),setTimeout(()=>{i.value=!1},2e3)}),(U,T)=>{const N=J("DialogCloseBtn");return D(),j(I,{title:"Edit Detail"},{default:a(()=>[e(N,{variant:"text",size:"default",onClick:T[0]||(T[0]=y=>r("close"))}),e(E,null,{default:a(()=>[e(ue,{onSubmit:ie(u,["prevent"]),ref_key:"formData",ref:b,"validate-on":"input"},{default:a(()=>[e(W,null,{default:a(()=>[e($,{md:"8"},{default:a(()=>[e(te,{variant:"solo",clearable:"",label:"Package",modelValue:t(s).package_id,"onUpdate:modelValue":[T[1]||(T[1]=y=>t(s).package_id=y),m],items:t(c),"item-props":y=>({title:y.package!=null?y.type_of+" - "+y.package:y.type_of}),"item-value":"id",rules:t(L).required,loading:t(p),disabled:t(p)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e($,{md:"4"},{default:a(()=>[e(R,{type:"number",variant:"solo",clearable:"",label:+t(s).duration/60?"Minutes ("+t(s).duration/60+" Hours)":"Minutes",readonly:t(w),modelValue:t(s).duration,"onUpdate:modelValue":T[2]||(T[2]=y=>t(s).duration=y),rules:t(L).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),e($,{md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(s).inhouse_id,"onUpdate:modelValue":T[3]||(T[3]=y=>t(s).inhouse_id=y),label:"Inhouse Mentor/Tutor",items:t(g),"item-props":y=>({title:y.full_name}),"item-value":"uuid",rules:t(L).required,loading:t(p),disabled:t(p)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e($,{md:"12"},{default:a(()=>[e(te,{variant:"solo",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:t(s).pic_id,"onUpdate:modelValue":T[4]||(T[4]=y=>t(s).pic_id=y),items:t(n),"item-title":"full_name","item-value":"id",rules:t(L).required,loading:t(p),disabled:t(p)},null,8,["modelValue","items","rules","loading","disabled"])]),_:1}),e($,{md:"12"},{default:a(()=>[e(pe,{label:"Notes",modelValue:t(s).notes,"onUpdate:modelValue":T[5]||(T[5]=y=>t(s).notes=y),variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1}),e(Se,{class:"my-3"}),e(re,null,{default:a(()=>[e(P,{color:"error",type:"button",onClick:T[6]||(T[6]=y=>r("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[x(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},We={class:"w-100"},Xe={class:"mt-3 font-weight-light"},Ze=l("hr",{class:"my-2"},null,-1),Ke={key:0},Qe=l("tr",{class:"bg-secondary"},[l("td",null,"Name"),l("td",null,"School"),l("td",null,"Grade")],-1),et={key:1},tt=l("td",{width:"20%"},"Name",-1),lt=l("td",{width:"1%"},":",-1),at=l("td",null,"School Name",-1),st=l("td",{width:"1%"},":",-1),ot=l("td",null,"Grade",-1),it=l("td",{width:"1%"},":",-1),nt=l("td",null,"Email",-1),dt=l("td",{width:"1%"},":",-1),rt={class:"mt-5 font-weight-light"},ut=l("hr",{class:"my-2"},null,-1),ct=l("td",{width:"30%"},"Program",-1),mt=l("td",{width:"1%"},":",-1),_t=l("td",null,"Package",-1),ft=l("td",{width:"1%"},":",-1),pt=l("td",null,"Person in Charge",-1),vt=l("td",{width:"1%"},":",-1),gt={class:"ms-4",type:"1"},yt=l("td",null,"Tutor/Mentor",-1),ht=l("td",{width:"1%"},":",-1),bt=l("td",null,"Inhouse Tutor/Mentor",-1),Vt=l("td",{width:"1%"},":",-1),kt=l("td",null,"Update On",-1),wt=l("td",{width:"1%"},":",-1),xt={class:"d-flex align-end w-100"},Dt={class:"m-0 mb-1 text-white"},$t=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Ct={class:"text-end w-100"},Tt={class:"d-flex align-end w-100"},Mt={class:"m-0 mb-1 text-white"},St=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Ut={class:"text-end w-100"},jt={class:"d-flex align-end w-100"},Yt={class:"m-0 mb-1 text-white"},Pt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Lt={class:"text-end w-100"},qt={__name:"user-detail",props:{id:String},emits:["void"],setup(q,{emit:S}){const v=q,r=S,C=oe("reloadData"),c=oe("updateReload"),n=h([]),g=h([{edit:!1,void:!1,delete:!1}]),w=h(!1),i=async _=>{var o,m,d;w.value=!0;try{const u=await Y.get("api/v1/timesheet/"+_+"/detail");u&&(n.value=u,r("void",u.packageDetails.void))}catch(u){((o=u.response)==null?void 0:o.status)==400&&(M("error",(d=(m=u.response)==null?void 0:m.data)==null?void 0:d.errors,"bottom-end"),le.push("/admin/timesheet")),console.log(u)}finally{w.value=!1}},p=async()=>{var _,o,m;try{const d=await Y.delete("api/v1/timesheet/"+v.id+"/delete");d&&(n.value=d,M("success",d.message,"bottom-end"),g.value.delete=!1,le.push("/admin/timesheet"))}catch(d){((_=d.response)==null?void 0:_.status)==400&&M("error",(m=(o=d.response)==null?void 0:o.data)==null?void 0:m.errors,"bottom-end")}},b=_=>{g.value[_]?g.value[_]=!1:g.value[_]=!0},s=async(_,o)=>{var m;$e();try{const d=await Y.get("api/v1/timesheet/"+_+"/export",{responseType:"blob"});if(d){const u=window.URL.createObjectURL(new Blob([d],{type:'"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"'})),f=document.createElement("a");f.href=u,f.setAttribute("download",`timesheet_${o}.xlsx`),document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(u),Ce.close()}}catch(d){M("error",(m=d.response)==null?void 0:m.statusText,"bottom-end"),console.log(d)}};return de(()=>{i(v.id)}),we(()=>{C.value&&(i(v.id),c(!1))}),(_,o)=>{const m=J("router-link");return D(),j(I,{class:"mb-3"},{default:a(()=>[e(H,{class:"d-flex justify-between align-center"},{default:a(()=>{var d;return[l("div",We,[e(m,{to:"/admin/timesheet"},{default:a(()=>[e(k,{icon:"ri-arrow-left-line",color:"secondary",class:"me-2",size:"25"})]),_:1}),x(" Timesheet - "+V((d=t(n).packageDetails)==null?void 0:d.package_type),1)]),l("div",null,[e(xe,{"close-on-content-click":!1,location:"bottom"},{activator:a(({props:u})=>[K((D(),j(P,De({color:"secondary"},u),{default:a(()=>[e(k,{icon:"ri-settings-3-line"})]),_:2},1040)),[[ee,"Settings","start"]])]),default:a(()=>[e(Ue,null,{default:a(()=>[e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[0]||(o[0]=u=>b("edit"))},[e(k,{icon:"ri-pencil-line",class:"me-2"}),x(" Edit TimeSheet ")])]),_:1}),e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[1]||(o[1]=u=>b("void"))},[e(k,{icon:"ri-exchange-2-line",class:"me-2"}),x(" Timesheet Ownership Transfer ")])]),_:1}),e(ae,null,{default:a(()=>[e(je,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[2]||(o[2]=u=>{var f,A,B,z,X,Z;return s(v.id,((A=(f=t(n))==null?void 0:f.packageDetails)==null?void 0:A.package_type)+"-"+((z=(B=t(n))==null?void 0:B.packageDetails)==null?void 0:z.package_name)+"_"+((Z=(X=t(n))==null?void 0:X.packageDetails)==null?void 0:Z.tutormentor_name))})},[e(k,{icon:"ri-download-line",class:"me-2"}),x(" Download TimeSheet ")])]),_:1})]),_:1}),e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[3]||(o[3]=u=>b("delete"))},[e(k,{icon:"ri-delete-bin-line",class:"me-2"}),x(" Delete TimeSheet ")])]),_:1})]),_:1})]),_:1})])]}),_:1}),e(E,null,{default:a(()=>[t(w)?(D(),j(W,{key:1},{default:a(()=>[e($,{md:"7"},{default:a(()=>[e(Q,{type:"heading, paragraph, heading, paragraph",class:"mb-3"})]),_:1}),e($,{md:"5"},{default:a(()=>[e(Q,{type:"text@3",color:"#16B1FF",class:"mb-3"}),e(Q,{type:"text@3",color:"#91c45e",class:"mb-3"}),e(Q,{type:"text@3",color:"#e05e5e",class:"mb-3"})]),_:1})]),_:1})):(D(),j(W,{key:0,align:"center"},{default:a(()=>[e($,{md:"7"},{default:a(()=>[l("h4",Xe,[e(k,{icon:"ri-user-line",size:"17",class:"me-2"}),x(" Basic Profile ")]),Ze,e(_e,{density:"compact"},{default:a(()=>{var d,u;return[((d=t(n).clientProfile)==null?void 0:d.length)>1?(D(),O("tbody",Ke,[Qe,(D(!0),O(be,null,he(t(n).clientProfile,f=>(D(),O("tr",null,[l("td",null,V(f.client_name),1),l("td",null,V(f.client_school),1),l("td",null,V(f.client_grade),1)]))),256))])):((u=t(n).clientProfile)==null?void 0:u.length)==1?(D(),O("tbody",et,[l("tr",null,[tt,lt,l("td",null,V(t(n).clientProfile[0].client_name),1)]),l("tr",null,[at,st,l("td",null,V(t(n).clientProfile[0].client_school),1)]),l("tr",null,[ot,it,l("td",null,V(t(n).clientProfile[0].client_grade),1)]),l("tr",null,[nt,dt,l("td",null,V(t(n).clientProfile[0].client_mail),1)])])):fe("",!0)]}),_:1}),l("h4",rt,[e(k,{icon:"ri-bookmark-line",class:"me-2",size:"17"}),x(" Package Details ")]),ut,e(_e,{density:"compact"},{default:a(()=>{var d,u,f,A,B,z;return[l("tbody",null,[l("tr",null,[ct,mt,l("td",null,V((d=t(n).packageDetails)==null?void 0:d.program_name),1)]),l("tr",null,[_t,ft,l("td",null,V(((u=t(n).packageDetails)==null?void 0:u.package_type)+" - "+((f=t(n).packageDetails)==null?void 0:f.package_name)),1)]),l("tr",null,[pt,vt,l("td",null,[l("ol",gt,[l("li",null,V((A=t(n).packageDetails)==null?void 0:A.pic_name),1)])])]),l("tr",null,[yt,ht,l("td",null,V((B=t(n).packageDetails)==null?void 0:B.tutormentor_name),1)]),l("tr",null,[bt,Vt,l("td",null,V((z=t(n).packageDetails)==null?void 0:z.inhouse_name),1)]),l("tr",null,[kt,wt,l("td",null,V(t(F)().format("LLL")),1)])])]}),_:1})]),_:1}),e($,{md:"5"},{default:a(()=>[e(I,{color:"#16B1FF",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(H,{class:"text-white"},{default:a(()=>[x(" Total Minutes of Package ")]),_:1})]),_:1}),e(E,{class:"d-flex justify-between"},{default:a(()=>{var d;return[l("div",xt,[l("h1",Dt,V((d=t(n).packageDetails)==null?void 0:d.duration_in_minutes),1),$t])]}),_:1})]),e(E,null,{default:a(()=>[l("div",Ct,[e(k,{icon:"ri-calendar-schedule-line",size:"60"})])]),_:1})]),_:1}),e(I,{color:"#91c45e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(H,{class:"text-white"},{default:a(()=>[x(" Total Minutes Spent ")]),_:1})]),_:1}),e(E,{class:"d-flex justify-between"},{default:a(()=>{var d;return[l("div",Tt,[l("h1",Mt,V((d=t(n).packageDetails)==null?void 0:d.time_spent_in_minutes),1),St])]}),_:1})]),e(E,null,{default:a(()=>[l("div",Ut,[e(k,{icon:"ri-timer-flash-line",size:"60",color:"white"})])]),_:1})]),_:1}),e(I,{color:"#e05e5e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(H,{class:"text-white"},{default:a(()=>[x(" Total Minutes Left ")]),_:1})]),_:1}),e(E,{class:"d-flex justify-between"},{default:a(()=>{var d,u;return[l("div",jt,[l("h1",Yt,V(((d=t(n).packageDetails)==null?void 0:d.duration_in_minutes)-((u=t(n).packageDetails)==null?void 0:u.time_spent_in_minutes)),1),Pt])]}),_:1})]),e(E,null,{default:a(()=>[l("div",Lt,[e(k,{icon:"ri-timer-2-line",size:"60"})])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),e(G,{modelValue:t(g).edit,"onUpdate:modelValue":o[6]||(o[6]=d=>t(g).edit=d),"max-width":"600",persistent:""},{default:a(()=>{var d;return[e(Je,{item:t(n).editableColumns,package_id:(d=t(n).packageDetails)==null?void 0:d.package_id,id:v.id,onClose:o[4]||(o[4]=u=>b("edit")),onReload:o[5]||(o[5]=u=>i(v.id))},null,8,["item","package_id","id"])]}),_:1},8,["modelValue"]),e(G,{modelValue:t(g).delete,"onUpdate:modelValue":o[8]||(o[8]=d=>t(g).delete=d),"max-width":"400",persistent:""},{default:a(()=>[e(ye,{title:"timesheet",onDelete:p,onClose:o[7]||(o[7]=d=>b("delete"))})]),_:1},8,["modelValue"]),e(G,{modelValue:t(g).void,"onUpdate:modelValue":o[10]||(o[10]=d=>t(g).void=d),"max-width":"400",persistent:""},{default:a(()=>[e(Ge,{timesheet_id:v.id,require:t(n).editableColumns.tutormentor_role,onClose:o[9]||(o[9]=d=>b("void"))},null,8,["timesheet_id","require"])]),_:1},8,["modelValue"])]),_:1})}}},At={class:"h-auto position-relative"},Nt={key:0,class:"overlay"},Bt=l("div",{class:"bg-secondary",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9998",width:"100%",opacity:"0.6"}},null,-1),Et={class:"d-flex align-center justify-center",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9999",width:"100%",opacity:"1"}},Rt={class:"text-center"},It=l("h2",{class:"text-white mt-3"},"This Timesheet Has Changed Owner",-1),ul={__name:"timesheet-detail",props:{id:Number},setup(q){const v=q.id,r=h(!1),C=h(!1);ge("reloadData",r),ge("updateReload",n=>{r.value=n});const c=n=>{C.value=n};return(n,g)=>(D(),O("div",At,[t(C)=="true"?(D(),O("div",Nt,[Bt,l("div",Et,[l("div",Rt,[e(k,{color:"white",icon:"ri-lock-line",size:"50"}),It,e(P,{color:"light",class:"mt-4",onClick:g[0]||(g[0]=w=>t(le).push({path:"/admin/timesheet"}))},{default:a(()=>[x(" Back to List ")]),_:1})])])])):fe("",!0),e(qt,{id:t(v),onVoid:c},null,8,["id"]),e(He,{id:t(v)},null,8,["id"])]))}};export{ul as default};
