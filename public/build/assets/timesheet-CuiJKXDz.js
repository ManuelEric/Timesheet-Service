import{r as m,U as b,e as E,f as x,w as s,ao as W,A as j,s as X,l as B,o as i,b as a,u as l,z as T,W as Y,a as e,t as n,c as k,X as A,F as D,h as $,n as I,V as d,j as p,Y as G}from"./main-Disvcf21.js";import{V as J,b as K,a as O}from"./VCard-D2h_jgQf.js";import{V as R,a as U}from"./VRow-CtAsk63f.js";import{V as Q}from"./VAutocomplete-DZHR5m28.js";import{V as Z,a as ee}from"./VTable-ByejExhA.js";import{V as te}from"./VPagination-CK5JAJ82.js";import{V as ae}from"./VBadge-DTDaS90n.js";import{V as F}from"./VTooltip-DseQJ8qT.js";import"./VAvatar-D-FfQCeH.js";import"./VImg-BiTm9QQs.js";import"./VList-BTdYnPmf.js";import"./ssrBoot-D4HbVE3-.js";import"./VDivider-BoQFqxdn.js";import"./VCheckboxBtn-BsiZ4IXT.js";import"./VSelectionControl-Dpx_jDd0.js";import"./VSlideGroup-B8lqBhCo.js";const oe=e("div",{class:"d-flex justify-between align-center"},[e("div",{class:"w-100"},[e("h4",null,"Timesheet List")])],-1),se=e("th",{class:"text-uppercase",width:"1%"}," No ",-1),le=e("th",{class:"text-uppercase text-center"},"Student Name",-1),re=e("th",{class:"text-uppercase text-center"},"Program Name",-1),ne=e("th",{class:"text-uppercase text-center"},"Package",-1),ce={class:"text-uppercase text-center"},ie=e("th",{class:"text-uppercase text-center"},"PIC",-1),ue=e("th",{class:"text-uppercase text-center"},"Total Hours",-1),de=e("th",{class:"text-uppercase text-center"},"Used",-1),pe=e("th",{class:"text-uppercase text-center"},"#",-1),_e=["onClick"],me={class:"text-start"},ge={class:"text-left"},he={class:"text-left"},fe={class:"text-left"},Ve={class:"text-left"},ve={key:0},xe=e("tr",null,[e("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),ke=[xe],ye={class:"d-flex justify-center mt-5"},qe={__name:"timesheet",setup(be){const H=W(),g=m(1),L=m(b.getUser().role_detail[0].role.toLowerCase()),P=m(),f=m(),w=m([]),_=m(!1),N=m([]),V=m(),y=async()=>{var v,t;const h="?page="+g.value,r=f.value?"&keyword="+f.value:"",u=V.value?"&package_id="+V.value:"",C="&paginate=true",o=L.value=="tutor"?"":"&is_subject_specialist=true";try{_.value=!0;const c=await j.get("api/v1/timesheet/list"+h+r+u+o+C);c&&(g.value=c.current_page,P.value=c.last_page,w.value=c),_.value=!1}catch(c){X("error",(t=(v=c.response)==null?void 0:v.data)==null?void 0:t.message,"bottom-end"),console.error(c),_.value=!1}},q=async()=>{const h=b.getUser().role_detail[0].role.toLowerCase()=="external mentor"?"mentor":b.getUser().role_detail[0].role.toLowerCase(),r=b.getUser().role_detail.length==1?"?category="+h:"";try{const u=await j.get("api/v1/package/component/list"+r);u&&(N.value=u)}catch(u){console.error(u)}},z=async()=>{g.value=1,await y()},M=(h,r)=>{H.push("/user/timesheet/"+h+"/"+r.toLowerCase())};return E(()=>{y(),q()}),(h,r)=>{const u=B("VText"),C=B("router-link");return i(),x(J,null,{default:s(()=>[a(K,null,{default:s(()=>[oe]),_:1}),a(O,null,{default:s(()=>[a(R,{class:"my-1 justify-space-between"},{default:s(()=>[a(U,{cols:"12",md:"6"},{default:s(()=>[a(R,null,{default:s(()=>[a(U,{cols:"12",md:"6"},{default:s(()=>[a(Q,{clearable:"true",modelValue:l(V),"onUpdate:modelValue":[r[0]||(r[0]=o=>T(V)?V.value=o:null),y],label:"Package",items:l(N),"item-props":o=>({title:o.package!=null?o.type_of+" - "+o.package:o.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:l(_),disabled:l(_)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(U,{cols:"12",md:"3"},{default:s(()=>[a(Y,{loading:l(_),disabled:l(_),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:l(f),"onUpdate:modelValue":r[1]||(r[1]=o=>T(f)?f.value=o:null),onChange:z},null,8,["loading","disabled","modelValue"])]),_:1})]),_:1}),l(_)?(i(),x(Z,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(i(),x(ee,{key:1,class:"text-no-wrap",hover:""},{default:s(()=>{var o,v;return[e("thead",null,[e("tr",null,[se,le,re,ne,e("th",ce,n(l(L)=="tutor"?"Tutor":"Mentor"),1),ie,ue,de,pe])]),e("tbody",null,[(i(!0),k(D,null,A(l(w).data,(t,c)=>(i(),k("tr",{key:c,class:I([t.void=="true"?"bg-secondary":"","cursor-pointer"]),onClick:S=>M(t.id,t.require)},[e("td",null,n(parseInt(c)+1),1),e("td",{class:I(t.group?"cursor-pointer text-left":"text-left")},[t.group?(i(),x(u,{key:0},{default:s(()=>[a(d,{icon:"ri-group-line",class:"me-3"}),p(" "+n(t.clients[0])+" ",1),a(ae,{color:"error",content:t.clients.length-1+"+",inline:""},null,8,["content"]),a(F,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:s(()=>[(i(!0),k(D,null,A(t.clients,S=>(i(),k("div",null,n(S),1))),256))]),_:2},1024)]),_:2},1024)):(i(),x(u,{key:1},{default:s(()=>[a(d,{icon:"ri-user-line",class:"me-3"}),p(" "+n(t.clients),1)]),_:2},1024))],2),e("td",null,[a(d,{icon:"ri-bookmark-3-line",class:"me-3"}),p(" "+n(t.free_trial?"[TRIAL]":"")+" "+n(t.program_name),1)]),e("td",me,[a(d,{icon:"ri-bookmark-line",class:"me-3"}),p(" "+n(t.detail_package?t.package_type+" - "+t.detail_package:t.package_type),1)]),e("td",ge,[a(d,{icon:"ri-user-line",class:"mr-2"}),p(" "+n(t.tutor_mentor),1)]),e("td",he,[a(d,{icon:"ri-user-line",class:"cursor-pointer me-3"}),p(" "+n(t.admin),1)]),e("td",fe,[a(d,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),p(" "+n(t.duration/60)+" Hours ",1)]),e("td",Ve,[a(d,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),p(" "+n(t.spent/60)+" Hours ",1)]),e("td",null,[a(C,{to:"/user/timesheet/"+t.id+"/"+t.require.toLowerCase()},{default:s(()=>[a(G,{color:t.void=="true"?"light":"secondary"},{default:s(()=>[a(d,{icon:"ri-timeline-view",class:"cursor-pointer"}),a(F,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:s(()=>[p(" View Detail ")]),_:1})]),_:2},1032,["color"])]),_:2},1032,["to"])])],10,_e))),128))]),((v=(o=l(w))==null?void 0:o.data)==null?void 0:v.length)==0?(i(),k("tfoot",ve,ke)):$("",!0)]}),_:1})),e("div",ye,[a(te,{modelValue:l(g),"onUpdate:modelValue":[r[2]||(r[2]=o=>T(g)?g.value=o:null),y],length:l(P),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{qe as default};
